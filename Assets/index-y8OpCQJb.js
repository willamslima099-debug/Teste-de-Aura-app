(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();function BT(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var wh={exports:{}},Sl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G_;function sI(){if(G_)return Sl;G_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(o,r,l){var u=null;if(l!==void 0&&(u=""+l),r.key!==void 0&&(u=""+r.key),"key"in r){l={};for(var d in r)d!=="key"&&(l[d]=r[d])}else l=r;return r=l.ref,{$$typeof:n,type:o,key:u,ref:r!==void 0?r:null,props:l}}return Sl.Fragment=e,Sl.jsx=t,Sl.jsxs=t,Sl}var F_;function rI(){return F_||(F_=1,wh.exports=sI()),wh.exports}var ie=rI(),Nh={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_;function aI(){if(H_)return Ve;H_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function R(L){return L===null||typeof L!="object"?null:(L=S&&L[S]||L["@@iterator"],typeof L=="function"?L:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,k={};function K(L,ee,ue){this.props=L,this.context=ee,this.refs=k,this.updater=ue||x}K.prototype.isReactComponent={},K.prototype.setState=function(L,ee){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,ee,"setState")},K.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function ne(){}ne.prototype=K.prototype;function j(L,ee,ue){this.props=L,this.context=ee,this.refs=k,this.updater=ue||x}var ae=j.prototype=new ne;ae.constructor=j,O(ae,K.prototype),ae.isPureReactComponent=!0;var W=Array.isArray;function F(){}var M={H:null,A:null,T:null,S:null},b=Object.prototype.hasOwnProperty;function N(L,ee,ue){var fe=ue.ref;return{$$typeof:n,type:L,key:ee,ref:fe!==void 0?fe:null,props:ue}}function P(L,ee){return N(L.type,ee,L.props)}function V(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function B(L){var ee={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ue){return ee[ue]})}var D=/\/+/g;function Ce(L,ee){return typeof L=="object"&&L!==null&&L.key!=null?B(""+L.key):ee.toString(36)}function Xe(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(F,F):(L.status="pending",L.then(function(ee){L.status==="pending"&&(L.status="fulfilled",L.value=ee)},function(ee){L.status==="pending"&&(L.status="rejected",L.reason=ee)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function $(L,ee,ue,fe,Se){var Me=typeof L;(Me==="undefined"||Me==="boolean")&&(L=null);var Be=!1;if(L===null)Be=!0;else switch(Me){case"bigint":case"string":case"number":Be=!0;break;case"object":switch(L.$$typeof){case n:case e:Be=!0;break;case v:return Be=L._init,$(Be(L._payload),ee,ue,fe,Se)}}if(Be)return Se=Se(L),Be=fe===""?"."+Ce(L,0):fe,W(Se)?(ue="",Be!=null&&(ue=Be.replace(D,"$&/")+"/"),$(Se,ee,ue,"",function($e){return $e})):Se!=null&&(V(Se)&&(Se=P(Se,ue+(Se.key==null||L&&L.key===Se.key?"":(""+Se.key).replace(D,"$&/")+"/")+Be)),ee.push(Se)),1;Be=0;var Tt=fe===""?".":fe+":";if(W(L))for(var Ie=0;Ie<L.length;Ie++)fe=L[Ie],Me=Tt+Ce(fe,Ie),Be+=$(fe,ee,ue,Me,Se);else if(Ie=R(L),typeof Ie=="function")for(L=Ie.call(L),Ie=0;!(fe=L.next()).done;)fe=fe.value,Me=Tt+Ce(fe,Ie++),Be+=$(fe,ee,ue,Me,Se);else if(Me==="object"){if(typeof L.then=="function")return $(Xe(L),ee,ue,fe,Se);throw ee=String(L),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Be}function le(L,ee,ue){if(L==null)return L;var fe=[],Se=0;return $(L,fe,"","",function(Me){return ee.call(ue,Me,Se++)}),fe}function pe(L){if(L._status===-1){var ee=L._result;ee=ee(),ee.then(function(ue){(L._status===0||L._status===-1)&&(L._status=1,L._result=ue)},function(ue){(L._status===0||L._status===-1)&&(L._status=2,L._result=ue)}),L._status===-1&&(L._status=0,L._result=ee)}if(L._status===1)return L._result.default;throw L._result}var Ne=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},be={map:le,forEach:function(L,ee,ue){le(L,function(){ee.apply(this,arguments)},ue)},count:function(L){var ee=0;return le(L,function(){ee++}),ee},toArray:function(L){return le(L,function(ee){return ee})||[]},only:function(L){if(!V(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Ve.Activity=T,Ve.Children=be,Ve.Component=K,Ve.Fragment=t,Ve.Profiler=r,Ve.PureComponent=j,Ve.StrictMode=o,Ve.Suspense=g,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(L){return M.H.useMemoCache(L)}},Ve.cache=function(L){return function(){return L.apply(null,arguments)}},Ve.cacheSignal=function(){return null},Ve.cloneElement=function(L,ee,ue){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var fe=O({},L.props),Se=L.key;if(ee!=null)for(Me in ee.key!==void 0&&(Se=""+ee.key),ee)!b.call(ee,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&ee.ref===void 0||(fe[Me]=ee[Me]);var Me=arguments.length-2;if(Me===1)fe.children=ue;else if(1<Me){for(var Be=Array(Me),Tt=0;Tt<Me;Tt++)Be[Tt]=arguments[Tt+2];fe.children=Be}return N(L.type,Se,fe)},Ve.createContext=function(L){return L={$$typeof:u,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:l,_context:L},L},Ve.createElement=function(L,ee,ue){var fe,Se={},Me=null;if(ee!=null)for(fe in ee.key!==void 0&&(Me=""+ee.key),ee)b.call(ee,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(Se[fe]=ee[fe]);var Be=arguments.length-2;if(Be===1)Se.children=ue;else if(1<Be){for(var Tt=Array(Be),Ie=0;Ie<Be;Ie++)Tt[Ie]=arguments[Ie+2];Se.children=Tt}if(L&&L.defaultProps)for(fe in Be=L.defaultProps,Be)Se[fe]===void 0&&(Se[fe]=Be[fe]);return N(L,Me,Se)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(L){return{$$typeof:d,render:L}},Ve.isValidElement=V,Ve.lazy=function(L){return{$$typeof:v,_payload:{_status:-1,_result:L},_init:pe}},Ve.memo=function(L,ee){return{$$typeof:m,type:L,compare:ee===void 0?null:ee}},Ve.startTransition=function(L){var ee=M.T,ue={};M.T=ue;try{var fe=L(),Se=M.S;Se!==null&&Se(ue,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(F,Ne)}catch(Me){Ne(Me)}finally{ee!==null&&ue.types!==null&&(ee.types=ue.types),M.T=ee}},Ve.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Ve.use=function(L){return M.H.use(L)},Ve.useActionState=function(L,ee,ue){return M.H.useActionState(L,ee,ue)},Ve.useCallback=function(L,ee){return M.H.useCallback(L,ee)},Ve.useContext=function(L){return M.H.useContext(L)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(L,ee){return M.H.useDeferredValue(L,ee)},Ve.useEffect=function(L,ee){return M.H.useEffect(L,ee)},Ve.useEffectEvent=function(L){return M.H.useEffectEvent(L)},Ve.useId=function(){return M.H.useId()},Ve.useImperativeHandle=function(L,ee,ue){return M.H.useImperativeHandle(L,ee,ue)},Ve.useInsertionEffect=function(L,ee){return M.H.useInsertionEffect(L,ee)},Ve.useLayoutEffect=function(L,ee){return M.H.useLayoutEffect(L,ee)},Ve.useMemo=function(L,ee){return M.H.useMemo(L,ee)},Ve.useOptimistic=function(L,ee){return M.H.useOptimistic(L,ee)},Ve.useReducer=function(L,ee,ue){return M.H.useReducer(L,ee,ue)},Ve.useRef=function(L){return M.H.useRef(L)},Ve.useState=function(L){return M.H.useState(L)},Ve.useSyncExternalStore=function(L,ee,ue){return M.H.useSyncExternalStore(L,ee,ue)},Ve.useTransition=function(){return M.H.useTransition()},Ve.version="19.2.4",Ve}var z_;function bp(){return z_||(z_=1,Nh.exports=aI()),Nh.exports}var we=bp();const lI=BT(we);var bh={exports:{}},Al={},Mh={exports:{}},Dh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y_;function uI(){return Y_||(Y_=1,(function(n){function e($,le){var pe=$.length;$.push(le);e:for(;0<pe;){var Ne=pe-1>>>1,be=$[Ne];if(0<r(be,le))$[Ne]=le,$[pe]=be,pe=Ne;else break e}}function t($){return $.length===0?null:$[0]}function o($){if($.length===0)return null;var le=$[0],pe=$.pop();if(pe!==le){$[0]=pe;e:for(var Ne=0,be=$.length,L=be>>>1;Ne<L;){var ee=2*(Ne+1)-1,ue=$[ee],fe=ee+1,Se=$[fe];if(0>r(ue,pe))fe<be&&0>r(Se,ue)?($[Ne]=Se,$[fe]=pe,Ne=fe):($[Ne]=ue,$[ee]=pe,Ne=ee);else if(fe<be&&0>r(Se,pe))$[Ne]=Se,$[fe]=pe,Ne=fe;else break e}}return le}function r($,le){var pe=$.sortIndex-le.sortIndex;return pe!==0?pe:$.id-le.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var g=[],m=[],v=1,T=null,S=3,R=!1,x=!1,O=!1,k=!1,K=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function ae($){for(var le=t(m);le!==null;){if(le.callback===null)o(m);else if(le.startTime<=$)o(m),le.sortIndex=le.expirationTime,e(g,le);else break;le=t(m)}}function W($){if(O=!1,ae($),!x)if(t(g)!==null)x=!0,F||(F=!0,B());else{var le=t(m);le!==null&&Xe(W,le.startTime-$)}}var F=!1,M=-1,b=5,N=-1;function P(){return k?!0:!(n.unstable_now()-N<b)}function V(){if(k=!1,F){var $=n.unstable_now();N=$;var le=!0;try{e:{x=!1,O&&(O=!1,ne(M),M=-1),R=!0;var pe=S;try{t:{for(ae($),T=t(g);T!==null&&!(T.expirationTime>$&&P());){var Ne=T.callback;if(typeof Ne=="function"){T.callback=null,S=T.priorityLevel;var be=Ne(T.expirationTime<=$);if($=n.unstable_now(),typeof be=="function"){T.callback=be,ae($),le=!0;break t}T===t(g)&&o(g),ae($)}else o(g);T=t(g)}if(T!==null)le=!0;else{var L=t(m);L!==null&&Xe(W,L.startTime-$),le=!1}}break e}finally{T=null,S=pe,R=!1}le=void 0}}finally{le?B():F=!1}}}var B;if(typeof j=="function")B=function(){j(V)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Ce=D.port2;D.port1.onmessage=V,B=function(){Ce.postMessage(null)}}else B=function(){K(V,0)};function Xe($,le){M=K(function(){$(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function($){switch(S){case 1:case 2:case 3:var le=3;break;default:le=S}var pe=S;S=le;try{return $()}finally{S=pe}},n.unstable_requestPaint=function(){k=!0},n.unstable_runWithPriority=function($,le){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var pe=S;S=$;try{return le()}finally{S=pe}},n.unstable_scheduleCallback=function($,le,pe){var Ne=n.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Ne+pe:Ne):pe=Ne,$){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=pe+be,$={id:v++,callback:le,priorityLevel:$,startTime:pe,expirationTime:be,sortIndex:-1},pe>Ne?($.sortIndex=pe,e(m,$),t(g)===null&&$===t(m)&&(O?(ne(M),M=-1):O=!0,Xe(W,pe-Ne))):($.sortIndex=be,e(g,$),x||R||(x=!0,F||(F=!0,B()))),$},n.unstable_shouldYield=P,n.unstable_wrapCallback=function($){var le=S;return function(){var pe=S;S=le;try{return $.apply(this,arguments)}finally{S=pe}}}})(Dh)),Dh}var J_;function cI(){return J_||(J_=1,Mh.exports=uI()),Mh.exports}var xh={exports:{}},cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K_;function fI(){if(K_)return cn;K_=1;var n=bp();function e(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var o={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(g,m,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:T==null?null:""+T,children:g,containerInfo:m,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,cn.createPortal=function(g,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(g,m,null,v)},cn.flushSync=function(g){var m=u.T,v=o.p;try{if(u.T=null,o.p=2,g)return g()}finally{u.T=m,o.p=v,o.d.f()}},cn.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,o.d.C(g,m))},cn.prefetchDNS=function(g){typeof g=="string"&&o.d.D(g)},cn.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var v=m.as,T=d(v,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,R=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?o.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:R}):v==="script"&&o.d.X(g,{crossOrigin:T,integrity:S,fetchPriority:R,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},cn.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=d(m.as,m.crossOrigin);o.d.M(g,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&o.d.M(g)},cn.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,T=d(v,m.crossOrigin);o.d.L(g,v,{crossOrigin:T,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},cn.preloadModule=function(g,m){if(typeof g=="string")if(m){var v=d(m.as,m.crossOrigin);o.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else o.d.m(g)},cn.requestFormReset=function(g){o.d.r(g)},cn.unstable_batchedUpdates=function(g,m){return g(m)},cn.useFormState=function(g,m,v){return u.H.useFormState(g,m,v)},cn.useFormStatus=function(){return u.H.useHostTransitionStatus()},cn.version="19.2.4",cn}var Q_;function dI(){if(Q_)return xh.exports;Q_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),xh.exports=fI(),xh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X_;function hI(){if(X_)return Al;X_=1;var n=cI(),e=bp(),t=dI();function o(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,a=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(a=s.return),i=s.return;while(i)}return s.tag===3?a:null}function u(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function g(i){if(l(i)!==i)throw Error(o(188))}function m(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(o(188));return s!==i?null:i}for(var a=i,c=s;;){var y=a.return;if(y===null)break;var _=y.alternate;if(_===null){if(c=y.return,c!==null){a=c;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===a)return g(y),i;if(_===c)return g(y),s;_=_.sibling}throw Error(o(188))}if(a.return!==c.return)a=y,c=_;else{for(var A=!1,I=y.child;I;){if(I===a){A=!0,a=y,c=_;break}if(I===c){A=!0,c=y,a=_;break}I=I.sibling}if(!A){for(I=_.child;I;){if(I===a){A=!0,a=_,c=y;break}if(I===c){A=!0,c=_,a=y;break}I=I.sibling}if(!A)throw Error(o(189))}}if(a.alternate!==c)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?i:s}function v(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=v(i),s!==null)return s;i=i.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),ne=Symbol.for("react.consumer"),j=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function B(i){return i===null||typeof i!="object"?null:(i=V&&i[V]||i["@@iterator"],typeof i=="function"?i:null)}var D=Symbol.for("react.client.reference");function Ce(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===D?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case O:return"Fragment";case K:return"Profiler";case k:return"StrictMode";case W:return"Suspense";case F:return"SuspenseList";case N:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case x:return"Portal";case j:return i.displayName||"Context";case ne:return(i._context.displayName||"Context")+".Consumer";case ae:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case M:return s=i.displayName||null,s!==null?s:Ce(i.type)||"Memo";case b:s=i._payload,i=i._init;try{return Ce(i(s))}catch{}}return null}var Xe=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},Ne=[],be=-1;function L(i){return{current:i}}function ee(i){0>be||(i.current=Ne[be],Ne[be]=null,be--)}function ue(i,s){be++,Ne[be]=i.current,i.current=s}var fe=L(null),Se=L(null),Me=L(null),Be=L(null);function Tt(i,s){switch(ue(Me,s),ue(Se,i),ue(fe,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?c_(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=c_(s),i=f_(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ee(fe),ue(fe,i)}function Ie(){ee(fe),ee(Se),ee(Me)}function $e(i){i.memoizedState!==null&&ue(Be,i);var s=fe.current,a=f_(s,i.type);s!==a&&(ue(Se,i),ue(fe,a))}function bt(i){Se.current===i&&(ee(fe),ee(Se)),Be.current===i&&(ee(Be),_l._currentValue=pe)}var Jt,Si;function vn(i){if(Jt===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Jt=s&&s[1]||"",Si=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Jt+i+Si}var Ai=!1;function bn(i,s){if(!i||Ai)return"";Ai=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(X){var J=X}Reflect.construct(i,[],se)}else{try{se.call()}catch(X){J=X}i.call(se.prototype)}}else{try{throw Error()}catch(X){J=X}(se=i())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(X){if(X&&J&&typeof X.stack=="string")return[X.stack,J.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),A=_[0],I=_[1];if(A&&I){var U=A.split(`
`),Y=I.split(`
`);for(y=c=0;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;for(;y<Y.length&&!Y[y].includes("DetermineComponentFrameRoot");)y++;if(c===U.length||y===Y.length)for(c=U.length-1,y=Y.length-1;1<=c&&0<=y&&U[c]!==Y[y];)y--;for(;1<=c&&0<=y;c--,y--)if(U[c]!==Y[y]){if(c!==1||y!==1)do if(c--,y--,0>y||U[c]!==Y[y]){var Z=`
`+U[c].replace(" at new "," at ");return i.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",i.displayName)),Z}while(1<=c&&0<=y);break}}}finally{Ai=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?vn(a):""}function ye(i,s){switch(i.tag){case 26:case 27:case 5:return vn(i.type);case 16:return vn("Lazy");case 13:return i.child!==s&&s!==null?vn("Suspense Fallback"):vn("Suspense");case 19:return vn("SuspenseList");case 0:case 15:return bn(i.type,!1);case 11:return bn(i.type.render,!1);case 1:return bn(i.type,!0);case 31:return vn("Activity");default:return""}}function Ue(i){try{var s="",a=null;do s+=ye(i,a),a=i,i=i.return;while(i);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Ee=Object.prototype.hasOwnProperty,qe=n.unstable_scheduleCallback,Mt=n.unstable_cancelCallback,Kt=n.unstable_shouldYield,ni=n.unstable_requestPaint,yt=n.unstable_now,ii=n.unstable_getCurrentPriorityLevel,jt=n.unstable_ImmediatePriority,Io=n.unstable_UserBlockingPriority,oi=n.unstable_NormalPriority,lr=n.unstable_LowPriority,_s=n.unstable_IdlePriority,vs=n.log,Ts=n.unstable_setDisableYieldValue,Tn=null,Dt=null;function St(i){if(typeof vs=="function"&&Ts(i),Dt&&typeof Dt.setStrictMode=="function")try{Dt.setStrictMode(Tn,i)}catch{}}var Ge=Math.clz32?Math.clz32:tu,un=Math.log,Ci=Math.LN2;function tu(i){return i>>>=0,i===0?32:31-(un(i)/Ci|0)|0}var Ii=256,Es=262144,xt=4194304;function Ri(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function wi(i,s,a){var c=i.pendingLanes;if(c===0)return 0;var y=0,_=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var I=c&134217727;return I!==0?(c=I&~_,c!==0?y=Ri(c):(A&=I,A!==0?y=Ri(A):a||(a=I&~i,a!==0&&(y=Ri(a))))):(I=c&~_,I!==0?y=Ri(I):A!==0?y=Ri(A):a||(a=c&~i,a!==0&&(y=Ri(a)))),y===0?0:s!==0&&s!==y&&(s&_)===0&&(_=y&-y,a=s&-s,_>=a||_===32&&(a&4194048)!==0)?s:y}function si(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function Df(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nu(){var i=xt;return xt<<=1,(xt&62914560)===0&&(xt=4194304),i}function Ni(i){for(var s=[],a=0;31>a;a++)s.push(i);return s}function Ss(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function xf(i,s,a,c,y,_){var A=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var I=i.entanglements,U=i.expirationTimes,Y=i.hiddenUpdates;for(a=A&~a;0<a;){var Z=31-Ge(a),se=1<<Z;I[Z]=0,U[Z]=-1;var J=Y[Z];if(J!==null)for(Y[Z]=null,Z=0;Z<J.length;Z++){var X=J[Z];X!==null&&(X.lane&=-536870913)}a&=~se}c!==0&&As(i,c,0),_!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=_&~(A&~s))}function As(i,s,a){i.pendingLanes|=s,i.suspendedLanes&=~s;var c=31-Ge(s);i.entangledLanes|=s,i.entanglements[c]=i.entanglements[c]|1073741824|a&261930}function Aa(i,s){var a=i.entangledLanes|=s;for(i=i.entanglements;a;){var c=31-Ge(a),y=1<<c;y&s|i[c]&s&&(i[c]|=s),a&=~y}}function Ca(i,s){var a=s&-s;return a=(a&42)!==0?1:Cs(a),(a&(i.suspendedLanes|s))!==0?0:a}function Cs(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Zi(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function iu(){var i=le.p;return i!==0?i:(i=window.event,i===void 0?32:P_(i.type))}function ri(i,s){var a=le.p;try{return le.p=i,s()}finally{le.p=a}}var ai=Math.random().toString(36).slice(2),Vt="__reactFiber$"+ai,Qt="__reactProps$"+ai,bi="__reactContainer$"+ai,ur="__reactEvents$"+ai,Vf="__reactListeners$"+ai,ou="__reactHandles$"+ai,su="__reactResources$"+ai,Mi="__reactMarker$"+ai;function cr(i){delete i[Vt],delete i[Qt],delete i[ur],delete i[Vf],delete i[ou]}function Di(i){var s=i[Vt];if(s)return s;for(var a=i.parentNode;a;){if(s=a[bi]||a[Vt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(i=__(i);i!==null;){if(a=i[Vt])return a;i=__(i)}return s}i=a,a=i.parentNode}return null}function Bn(i){if(i=i[Vt]||i[bi]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function Mn(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(o(33))}function xi(i){var s=i[su];return s||(s=i[su]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Pt(i){i[Mi]=!0}var Ia=new Set,Ra={};function Vi(i,s){Pi(i,s),Pi(i+"Capture",s)}function Pi(i,s){for(Ra[i]=s,i=0;i<s.length;i++)Ia.add(s[i])}var wa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Na={},ba={};function ru(i){return Ee.call(ba,i)?!0:Ee.call(Na,i)?!1:wa.test(i)?ba[i]=!0:(Na[i]=!0,!1)}function fr(i,s,a){if(ru(s))if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+a)}}function Dn(i,s,a){if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+a)}}function Ut(i,s,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(s,a,""+c)}}function Xt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ro(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ma(i,s,a){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,_=c.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return y.call(this)},set:function(A){a=""+A,_.call(this,A)}}),Object.defineProperty(i,s,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(A){a=""+A},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function st(i){if(!i._valueTracker){var s=Ro(i)?"checked":"value";i._valueTracker=Ma(i,s,""+i[s])}}function Is(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return i&&(c=Ro(i)?i.checked?"true":"false":i.value),i=c,i!==a?(s.setValue(i),!0):!1}function Ui(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Rs=/[\n"\\]/g;function En(i){return i.replace(Rs,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function dr(i,s,a,c,y,_,A,I){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),s!=null?A==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+Xt(s)):i.value!==""+Xt(s)&&(i.value=""+Xt(s)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),s!=null?Da(i,A,Xt(s)):a!=null?Da(i,A,Xt(a)):c!=null&&i.removeAttribute("value"),y==null&&_!=null&&(i.defaultChecked=!!_),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?i.name=""+Xt(I):i.removeAttribute("name")}function au(i,s,a,c,y,_,A,I){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),s!=null||a!=null){if(!(_!=="submit"&&_!=="reset"||s!=null)){st(i);return}a=a!=null?""+Xt(a):"",s=s!=null?""+Xt(s):a,I||s===i.value||(i.value=s),i.defaultValue=s}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=I?i.checked:!!c,i.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),st(i)}function Da(i,s,a){s==="number"&&Ui(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function wo(i,s,a,c){if(i=i.options,s){s={};for(var y=0;y<a.length;y++)s["$"+a[y]]=!0;for(a=0;a<i.length;a++)y=s.hasOwnProperty("$"+i[a].value),i[a].selected!==y&&(i[a].selected=y),y&&c&&(i[a].defaultSelected=!0)}else{for(a=""+Xt(a),s=null,y=0;y<i.length;y++){if(i[y].value===a){i[y].selected=!0,c&&(i[y].defaultSelected=!0);return}s!==null||i[y].disabled||(s=i[y])}s!==null&&(s.selected=!0)}}function lu(i,s,a){if(s!=null&&(s=""+Xt(s),s!==i.value&&(i.value=s),a==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=a!=null?""+Xt(a):""}function No(i,s,a,c){if(s==null){if(c!=null){if(a!=null)throw Error(o(92));if(Xe(c)){if(1<c.length)throw Error(o(93));c=c[0]}a=c}a==null&&(a=""),s=a}a=Xt(s),i.defaultValue=a,c=i.textContent,c===a&&c!==""&&c!==null&&(i.value=c),st(i)}function Sn(i,s){if(s){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=s;return}}i.textContent=s}var uu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xa(i,s,a){var c=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":c?i.setProperty(s,a):typeof a!="number"||a===0||uu.has(s)?s==="float"?i.cssFloat=a:i[s]=(""+a).trim():i[s]=a+"px"}function Va(i,s,a){if(s!=null&&typeof s!="object")throw Error(o(62));if(i=i.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var y in s)c=s[y],s.hasOwnProperty(y)&&a[y]!==c&&xa(i,y,c)}else for(var _ in s)s.hasOwnProperty(_)&&xa(i,_,s[_])}function hr(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pr(i){return bo.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function li(){}var Pa=null;function Gn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Mo=null,Li=null;function ws(i){var s=Bn(i);if(s&&(i=s.stateNode)){var a=i[Qt]||null;e:switch(i=s.stateNode,s.type){case"input":if(dr(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+En(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==i&&c.form===i.form){var y=c[Qt]||null;if(!y)throw Error(o(90));dr(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(s=0;s<a.length;s++)c=a[s],c.form===i.form&&Is(c)}break e;case"textarea":lu(i,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&wo(i,!!a.multiple,s,!1)}}}var mr=!1;function Do(i,s,a){if(mr)return i(s,a);mr=!0;try{var c=i(s);return c}finally{if(mr=!1,(Mo!==null||Li!==null)&&(ic(),Mo&&(s=Mo,i=Li,Li=Mo=null,ws(s),i)))for(s=0;s<i.length;s++)ws(i[s])}}function ui(i,s){var a=i.stateNode;if(a===null)return null;var c=a[Qt]||null;if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(o(231,s,typeof a));return a}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ns=!1;if(Fn)try{var lt={};Object.defineProperty(lt,"passive",{get:function(){Ns=!0}}),window.addEventListener("test",lt,lt),window.removeEventListener("test",lt,lt)}catch{Ns=!1}var Oi=null,Ua=null,bs=null;function La(){if(bs)return bs;var i,s=Ua,a=s.length,c,y="value"in Oi?Oi.value:Oi.textContent,_=y.length;for(i=0;i<a&&s[i]===y[i];i++);var A=a-i;for(c=1;c<=A&&s[a-c]===y[_-c];c++);return bs=y.slice(i,1<c?1-c:void 0)}function Ms(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function ji(){return!0}function ci(){return!1}function en(i){function s(a,c,y,_,A){this._reactName=a,this._targetInst=y,this.type=c,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var I in i)i.hasOwnProperty(I)&&(a=i[I],this[I]=a?a(_):_[I]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?ji:ci,this.isPropagationStopped=ci,this}return T(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ji)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ji)},persist:function(){},isPersistent:ji}),s}var eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ki=en(eo),xo=T({},eo,{view:0,detail:0}),Oa=en(xo),Vo,gr,qi,yr=T({},xo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Po,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==qi&&(qi&&i.type==="mousemove"?(Vo=i.screenX-qi.screenX,gr=i.screenY-qi.screenY):gr=Vo=0,qi=i),Vo)},movementY:function(i){return"movementY"in i?i.movementY:gr}}),ka=en(yr),Ds=T({},yr,{dataTransfer:0}),fu=en(Ds),du=T({},xo,{relatedTarget:0}),xs=en(du),qa=T({},eo,{animationName:0,elapsedTime:0,pseudoElement:0}),hu=en(qa),_r=T({},eo,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),pu=en(_r),mu=T({},eo,{data:0}),Bi=en(mu),gu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_u={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vu(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=_u[i])?!!s[i]:!1}function Po(){return vu}var mn=T({},xo,{key:function(i){if(i.key){var s=gu[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Ms(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?yu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Po,charCode:function(i){return i.type==="keypress"?Ms(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ms(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Tu=en(mn),Eu=T({},yr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),to=en(Eu),p=T({},xo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Po}),E=en(p),C=T({},eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=en(C),H=T({},yr,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=en(H),ce=T({},eo,{newState:0,oldState:0}),Le=en(ce),It=[9,13,27,32],nt=Fn&&"CompositionEvent"in window,_t=null;Fn&&"documentMode"in document&&(_t=document.documentMode);var Hn=Fn&&"TextEvent"in window&&!_t,Gi=Fn&&(!nt||_t&&8<_t&&11>=_t),fi=" ",di=!1;function Vs(i,s){switch(i){case"keyup":return It.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vr(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Tr=!1;function bA(i,s){switch(i){case"compositionend":return vr(s);case"keypress":return s.which!==32?null:(di=!0,fi);case"textInput":return i=s.data,i===fi&&di?null:i;default:return null}}function MA(i,s){if(Tr)return i==="compositionend"||!nt&&Vs(i,s)?(i=La(),bs=Ua=Oi=null,Tr=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Gi&&s.locale!=="ko"?null:s.data;default:return null}}var DA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Em(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!DA[i.type]:s==="textarea"}function Sm(i,s,a,c){Mo?Li?Li.push(c):Li=[c]:Mo=c,s=cc(s,"onChange"),0<s.length&&(a=new ki("onChange","change",null,a,c),i.push({event:a,listeners:s}))}var Ba=null,Ga=null;function xA(i){o_(i,0)}function Su(i){var s=Mn(i);if(Is(s))return i}function Am(i,s){if(i==="change")return s}var Cm=!1;if(Fn){var Pf;if(Fn){var Uf="oninput"in document;if(!Uf){var Im=document.createElement("div");Im.setAttribute("oninput","return;"),Uf=typeof Im.oninput=="function"}Pf=Uf}else Pf=!1;Cm=Pf&&(!document.documentMode||9<document.documentMode)}function Rm(){Ba&&(Ba.detachEvent("onpropertychange",wm),Ga=Ba=null)}function wm(i){if(i.propertyName==="value"&&Su(Ga)){var s=[];Sm(s,Ga,i,Gn(i)),Do(xA,s)}}function VA(i,s,a){i==="focusin"?(Rm(),Ba=s,Ga=a,Ba.attachEvent("onpropertychange",wm)):i==="focusout"&&Rm()}function PA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Su(Ga)}function UA(i,s){if(i==="click")return Su(s)}function LA(i,s){if(i==="input"||i==="change")return Su(s)}function OA(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var xn=typeof Object.is=="function"?Object.is:OA;function Fa(i,s){if(xn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var a=Object.keys(i),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var y=a[c];if(!Ee.call(s,y)||!xn(i[y],s[y]))return!1}return!0}function Nm(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function bm(i,s){var a=Nm(i);i=0;for(var c;a;){if(a.nodeType===3){if(c=i+a.textContent.length,i<=s&&c>=s)return{node:a,offset:s-i};i=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Nm(a)}}function Mm(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?Mm(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Dm(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=Ui(i.document);s instanceof i.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)i=s.contentWindow;else break;s=Ui(i.document)}return s}function Lf(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var kA=Fn&&"documentMode"in document&&11>=document.documentMode,Er=null,Of=null,Ha=null,kf=!1;function xm(i,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;kf||Er==null||Er!==Ui(c)||(c=Er,"selectionStart"in c&&Lf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ha&&Fa(Ha,c)||(Ha=c,c=cc(Of,"onSelect"),0<c.length&&(s=new ki("onSelect","select",null,s,a),i.push({event:s,listeners:c}),s.target=Er)))}function Ps(i,s){var a={};return a[i.toLowerCase()]=s.toLowerCase(),a["Webkit"+i]="webkit"+s,a["Moz"+i]="moz"+s,a}var Sr={animationend:Ps("Animation","AnimationEnd"),animationiteration:Ps("Animation","AnimationIteration"),animationstart:Ps("Animation","AnimationStart"),transitionrun:Ps("Transition","TransitionRun"),transitionstart:Ps("Transition","TransitionStart"),transitioncancel:Ps("Transition","TransitionCancel"),transitionend:Ps("Transition","TransitionEnd")},qf={},Vm={};Fn&&(Vm=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);function Us(i){if(qf[i])return qf[i];if(!Sr[i])return i;var s=Sr[i],a;for(a in s)if(s.hasOwnProperty(a)&&a in Vm)return qf[i]=s[a];return i}var Pm=Us("animationend"),Um=Us("animationiteration"),Lm=Us("animationstart"),qA=Us("transitionrun"),BA=Us("transitionstart"),GA=Us("transitioncancel"),Om=Us("transitionend"),km=new Map,Bf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bf.push("scrollEnd");function hi(i,s){km.set(i,s),Vi(s,[i])}var Au=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},zn=[],Ar=0,Gf=0;function Cu(){for(var i=Ar,s=Gf=Ar=0;s<i;){var a=zn[s];zn[s++]=null;var c=zn[s];zn[s++]=null;var y=zn[s];zn[s++]=null;var _=zn[s];if(zn[s++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}_!==0&&qm(a,y,_)}}function Iu(i,s,a,c){zn[Ar++]=i,zn[Ar++]=s,zn[Ar++]=a,zn[Ar++]=c,Gf|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function Ff(i,s,a,c){return Iu(i,s,a,c),Ru(i)}function Ls(i,s){return Iu(i,null,null,s),Ru(i)}function qm(i,s,a){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a);for(var y=!1,_=i.return;_!==null;)_.childLanes|=a,c=_.alternate,c!==null&&(c.childLanes|=a),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(y=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,y&&s!==null&&(y=31-Ge(a),i=_.hiddenUpdates,c=i[y],c===null?i[y]=[s]:c.push(s),s.lane=a|536870912),_):null}function Ru(i){if(50<fl)throw fl=0,Wd=null,Error(o(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var Cr={};function FA(i,s,a,c){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(i,s,a,c){return new FA(i,s,a,c)}function Hf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function no(i,s){var a=i.alternate;return a===null?(a=Vn(i.tag,s,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=s,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,s=i.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Bm(i,s){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,s=a.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function wu(i,s,a,c,y,_){var A=0;if(c=i,typeof i=="function")Hf(i)&&(A=1);else if(typeof i=="string")A=KC(i,a,fe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case N:return i=Vn(31,a,s,y),i.elementType=N,i.lanes=_,i;case O:return Os(a.children,y,_,s);case k:A=8,y|=24;break;case K:return i=Vn(12,a,s,y|2),i.elementType=K,i.lanes=_,i;case W:return i=Vn(13,a,s,y),i.elementType=W,i.lanes=_,i;case F:return i=Vn(19,a,s,y),i.elementType=F,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case j:A=10;break e;case ne:A=9;break e;case ae:A=11;break e;case M:A=14;break e;case b:A=16,c=null;break e}A=29,a=Error(o(130,i===null?"null":typeof i,"")),c=null}return s=Vn(A,a,s,y),s.elementType=i,s.type=c,s.lanes=_,s}function Os(i,s,a,c){return i=Vn(7,i,c,s),i.lanes=a,i}function zf(i,s,a){return i=Vn(6,i,null,s),i.lanes=a,i}function Gm(i){var s=Vn(18,null,null,0);return s.stateNode=i,s}function Yf(i,s,a){return s=Vn(4,i.children!==null?i.children:[],i.key,s),s.lanes=a,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var Fm=new WeakMap;function Yn(i,s){if(typeof i=="object"&&i!==null){var a=Fm.get(i);return a!==void 0?a:(s={value:i,source:s,stack:Ue(s)},Fm.set(i,s),s)}return{value:i,source:s,stack:Ue(s)}}var Ir=[],Rr=0,Nu=null,za=0,Jn=[],Kn=0,Uo=null,Fi=1,Hi="";function io(i,s){Ir[Rr++]=za,Ir[Rr++]=Nu,Nu=i,za=s}function Hm(i,s,a){Jn[Kn++]=Fi,Jn[Kn++]=Hi,Jn[Kn++]=Uo,Uo=i;var c=Fi;i=Hi;var y=32-Ge(c)-1;c&=~(1<<y),a+=1;var _=32-Ge(s)+y;if(30<_){var A=y-y%5;_=(c&(1<<A)-1).toString(32),c>>=A,y-=A,Fi=1<<32-Ge(s)+y|a<<y|c,Hi=_+i}else Fi=1<<_|a<<y|c,Hi=i}function Jf(i){i.return!==null&&(io(i,1),Hm(i,1,0))}function Kf(i){for(;i===Nu;)Nu=Ir[--Rr],Ir[Rr]=null,za=Ir[--Rr],Ir[Rr]=null;for(;i===Uo;)Uo=Jn[--Kn],Jn[Kn]=null,Hi=Jn[--Kn],Jn[Kn]=null,Fi=Jn[--Kn],Jn[Kn]=null}function zm(i,s){Jn[Kn++]=Fi,Jn[Kn++]=Hi,Jn[Kn++]=Uo,Fi=s.id,Hi=s.overflow,Uo=i}var tn=null,pt=null,Qe=!1,Lo=null,Qn=!1,Qf=Error(o(519));function Oo(i){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ya(Yn(s,i)),Qf}function Ym(i){var s=i.stateNode,a=i.type,c=i.memoizedProps;switch(s[Vt]=i,s[Qt]=c,a){case"dialog":He("cancel",s),He("close",s);break;case"iframe":case"object":case"embed":He("load",s);break;case"video":case"audio":for(a=0;a<hl.length;a++)He(hl[a],s);break;case"source":He("error",s);break;case"img":case"image":case"link":He("error",s),He("load",s);break;case"details":He("toggle",s);break;case"input":He("invalid",s),au(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":He("invalid",s);break;case"textarea":He("invalid",s),No(s,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||c.suppressHydrationWarning===!0||l_(s.textContent,a)?(c.popover!=null&&(He("beforetoggle",s),He("toggle",s)),c.onScroll!=null&&He("scroll",s),c.onScrollEnd!=null&&He("scrollend",s),c.onClick!=null&&(s.onclick=li),s=!0):s=!1,s||Oo(i,!0)}function Jm(i){for(tn=i.return;tn;)switch(tn.tag){case 5:case 31:case 13:Qn=!1;return;case 27:case 3:Qn=!0;return;default:tn=tn.return}}function wr(i){if(i!==tn)return!1;if(!Qe)return Jm(i),Qe=!0,!1;var s=i.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||dh(i.type,i.memoizedProps)),a=!a),a&&pt&&Oo(i),Jm(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));pt=y_(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));pt=y_(i)}else s===27?(s=pt,Wo(i.type)?(i=yh,yh=null,pt=i):pt=s):pt=tn?$n(i.stateNode.nextSibling):null;return!0}function ks(){pt=tn=null,Qe=!1}function Xf(){var i=Lo;return i!==null&&(Rn===null?Rn=i:Rn.push.apply(Rn,i),Lo=null),i}function Ya(i){Lo===null?Lo=[i]:Lo.push(i)}var $f=L(null),qs=null,oo=null;function ko(i,s,a){ue($f,s._currentValue),s._currentValue=a}function so(i){i._currentValue=$f.current,ee($f)}function Wf(i,s,a){for(;i!==null;){var c=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),i===a)break;i=i.return}}function Zf(i,s,a,c){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var _=y.dependencies;if(_!==null){var A=y.child;_=_.firstContext;e:for(;_!==null;){var I=_;_=y;for(var U=0;U<s.length;U++)if(I.context===s[U]){_.lanes|=a,I=_.alternate,I!==null&&(I.lanes|=a),Wf(_.return,a,i),c||(A=null);break e}_=I.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(o(341));A.lanes|=a,_=A.alternate,_!==null&&(_.lanes|=a),Wf(A,a,i),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===i){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function Nr(i,s,a,c){i=null;for(var y=s,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(o(387));if(A=A.memoizedProps,A!==null){var I=y.type;xn(y.pendingProps.value,A.value)||(i!==null?i.push(I):i=[I])}}else if(y===Be.current){if(A=y.alternate,A===null)throw Error(o(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(_l):i=[_l])}y=y.return}i!==null&&Zf(s,i,a,c),s.flags|=262144}function bu(i){for(i=i.firstContext;i!==null;){if(!xn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Bs(i){qs=i,oo=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function nn(i){return Km(qs,i)}function Mu(i,s){return qs===null&&Bs(i),Km(i,s)}function Km(i,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},oo===null){if(i===null)throw Error(o(308));oo=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else oo=oo.next=s;return a}var HA=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(a,c){i.push(c)}};this.abort=function(){s.aborted=!0,i.forEach(function(a){return a()})}},zA=n.unstable_scheduleCallback,YA=n.unstable_NormalPriority,Lt={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jf(){return{controller:new HA,data:new Map,refCount:0}}function Ja(i){i.refCount--,i.refCount===0&&zA(YA,function(){i.controller.abort()})}var Ka=null,ed=0,br=0,Mr=null;function JA(i,s){if(Ka===null){var a=Ka=[];ed=0,br=ih(),Mr={status:"pending",value:void 0,then:function(c){a.push(c)}}}return ed++,s.then(Qm,Qm),s}function Qm(){if(--ed===0&&Ka!==null){Mr!==null&&(Mr.status="fulfilled");var i=Ka;Ka=null,br=0,Mr=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function KA(i,s){var a=[],c={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return i.then(function(){c.status="fulfilled",c.value=s;for(var y=0;y<a.length;y++)(0,a[y])(s)},function(y){for(c.status="rejected",c.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),c}var Xm=$.S;$.S=function(i,s){xy=yt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&JA(i,s),Xm!==null&&Xm(i,s)};var Gs=L(null);function td(){var i=Gs.current;return i!==null?i:dt.pooledCache}function Du(i,s){s===null?ue(Gs,Gs.current):ue(Gs,s.pool)}function $m(){var i=td();return i===null?null:{parent:Lt._currentValue,pool:i}}var Dr=Error(o(460)),nd=Error(o(474)),xu=Error(o(542)),Vu={then:function(){}};function Wm(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Zm(i,s,a){switch(a=i[a],a===void 0?i.push(s):a!==s&&(s.then(li,li),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,eg(i),i;default:if(typeof s.status=="string")s.then(li,li);else{if(i=dt,i!==null&&100<i.shellSuspendCounter)throw Error(o(482));i=s,i.status="pending",i.then(function(c){if(s.status==="pending"){var y=s;y.status="fulfilled",y.value=c}},function(c){if(s.status==="pending"){var y=s;y.status="rejected",y.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,eg(i),i}throw Hs=s,Dr}}function Fs(i){try{var s=i._init;return s(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Hs=a,Dr):a}}var Hs=null;function jm(){if(Hs===null)throw Error(o(459));var i=Hs;return Hs=null,i}function eg(i){if(i===Dr||i===xu)throw Error(o(483))}var xr=null,Qa=0;function Pu(i){var s=Qa;return Qa+=1,xr===null&&(xr=[]),Zm(xr,i,s)}function Xa(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Uu(i,s){throw s.$$typeof===S?Error(o(525)):(i=Object.prototype.toString.call(s),Error(o(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function tg(i){function s(G,q){if(i){var z=G.deletions;z===null?(G.deletions=[q],G.flags|=16):z.push(q)}}function a(G,q){if(!i)return null;for(;q!==null;)s(G,q),q=q.sibling;return null}function c(G){for(var q=new Map;G!==null;)G.key!==null?q.set(G.key,G):q.set(G.index,G),G=G.sibling;return q}function y(G,q){return G=no(G,q),G.index=0,G.sibling=null,G}function _(G,q,z){return G.index=z,i?(z=G.alternate,z!==null?(z=z.index,z<q?(G.flags|=67108866,q):z):(G.flags|=67108866,q)):(G.flags|=1048576,q)}function A(G){return i&&G.alternate===null&&(G.flags|=67108866),G}function I(G,q,z,te){return q===null||q.tag!==6?(q=zf(z,G.mode,te),q.return=G,q):(q=y(q,z),q.return=G,q)}function U(G,q,z,te){var ve=z.type;return ve===O?Z(G,q,z.props.children,te,z.key):q!==null&&(q.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===b&&Fs(ve)===q.type)?(q=y(q,z.props),Xa(q,z),q.return=G,q):(q=wu(z.type,z.key,z.props,null,G.mode,te),Xa(q,z),q.return=G,q)}function Y(G,q,z,te){return q===null||q.tag!==4||q.stateNode.containerInfo!==z.containerInfo||q.stateNode.implementation!==z.implementation?(q=Yf(z,G.mode,te),q.return=G,q):(q=y(q,z.children||[]),q.return=G,q)}function Z(G,q,z,te,ve){return q===null||q.tag!==7?(q=Os(z,G.mode,te,ve),q.return=G,q):(q=y(q,z),q.return=G,q)}function se(G,q,z){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=zf(""+q,G.mode,z),q.return=G,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case R:return z=wu(q.type,q.key,q.props,null,G.mode,z),Xa(z,q),z.return=G,z;case x:return q=Yf(q,G.mode,z),q.return=G,q;case b:return q=Fs(q),se(G,q,z)}if(Xe(q)||B(q))return q=Os(q,G.mode,z,null),q.return=G,q;if(typeof q.then=="function")return se(G,Pu(q),z);if(q.$$typeof===j)return se(G,Mu(G,q),z);Uu(G,q)}return null}function J(G,q,z,te){var ve=q!==null?q.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return ve!==null?null:I(G,q,""+z,te);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case R:return z.key===ve?U(G,q,z,te):null;case x:return z.key===ve?Y(G,q,z,te):null;case b:return z=Fs(z),J(G,q,z,te)}if(Xe(z)||B(z))return ve!==null?null:Z(G,q,z,te,null);if(typeof z.then=="function")return J(G,q,Pu(z),te);if(z.$$typeof===j)return J(G,q,Mu(G,z),te);Uu(G,z)}return null}function X(G,q,z,te,ve){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return G=G.get(z)||null,I(q,G,""+te,ve);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case R:return G=G.get(te.key===null?z:te.key)||null,U(q,G,te,ve);case x:return G=G.get(te.key===null?z:te.key)||null,Y(q,G,te,ve);case b:return te=Fs(te),X(G,q,z,te,ve)}if(Xe(te)||B(te))return G=G.get(z)||null,Z(q,G,te,ve,null);if(typeof te.then=="function")return X(G,q,z,Pu(te),ve);if(te.$$typeof===j)return X(G,q,z,Mu(q,te),ve);Uu(q,te)}return null}function ge(G,q,z,te){for(var ve=null,je=null,_e=q,ke=q=0,Ye=null;_e!==null&&ke<z.length;ke++){_e.index>ke?(Ye=_e,_e=null):Ye=_e.sibling;var et=J(G,_e,z[ke],te);if(et===null){_e===null&&(_e=Ye);break}i&&_e&&et.alternate===null&&s(G,_e),q=_(et,q,ke),je===null?ve=et:je.sibling=et,je=et,_e=Ye}if(ke===z.length)return a(G,_e),Qe&&io(G,ke),ve;if(_e===null){for(;ke<z.length;ke++)_e=se(G,z[ke],te),_e!==null&&(q=_(_e,q,ke),je===null?ve=_e:je.sibling=_e,je=_e);return Qe&&io(G,ke),ve}for(_e=c(_e);ke<z.length;ke++)Ye=X(_e,G,ke,z[ke],te),Ye!==null&&(i&&Ye.alternate!==null&&_e.delete(Ye.key===null?ke:Ye.key),q=_(Ye,q,ke),je===null?ve=Ye:je.sibling=Ye,je=Ye);return i&&_e.forEach(function(ns){return s(G,ns)}),Qe&&io(G,ke),ve}function Ae(G,q,z,te){if(z==null)throw Error(o(151));for(var ve=null,je=null,_e=q,ke=q=0,Ye=null,et=z.next();_e!==null&&!et.done;ke++,et=z.next()){_e.index>ke?(Ye=_e,_e=null):Ye=_e.sibling;var ns=J(G,_e,et.value,te);if(ns===null){_e===null&&(_e=Ye);break}i&&_e&&ns.alternate===null&&s(G,_e),q=_(ns,q,ke),je===null?ve=ns:je.sibling=ns,je=ns,_e=Ye}if(et.done)return a(G,_e),Qe&&io(G,ke),ve;if(_e===null){for(;!et.done;ke++,et=z.next())et=se(G,et.value,te),et!==null&&(q=_(et,q,ke),je===null?ve=et:je.sibling=et,je=et);return Qe&&io(G,ke),ve}for(_e=c(_e);!et.done;ke++,et=z.next())et=X(_e,G,ke,et.value,te),et!==null&&(i&&et.alternate!==null&&_e.delete(et.key===null?ke:et.key),q=_(et,q,ke),je===null?ve=et:je.sibling=et,je=et);return i&&_e.forEach(function(oI){return s(G,oI)}),Qe&&io(G,ke),ve}function ft(G,q,z,te){if(typeof z=="object"&&z!==null&&z.type===O&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case R:e:{for(var ve=z.key;q!==null;){if(q.key===ve){if(ve=z.type,ve===O){if(q.tag===7){a(G,q.sibling),te=y(q,z.props.children),te.return=G,G=te;break e}}else if(q.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===b&&Fs(ve)===q.type){a(G,q.sibling),te=y(q,z.props),Xa(te,z),te.return=G,G=te;break e}a(G,q);break}else s(G,q);q=q.sibling}z.type===O?(te=Os(z.props.children,G.mode,te,z.key),te.return=G,G=te):(te=wu(z.type,z.key,z.props,null,G.mode,te),Xa(te,z),te.return=G,G=te)}return A(G);case x:e:{for(ve=z.key;q!==null;){if(q.key===ve)if(q.tag===4&&q.stateNode.containerInfo===z.containerInfo&&q.stateNode.implementation===z.implementation){a(G,q.sibling),te=y(q,z.children||[]),te.return=G,G=te;break e}else{a(G,q);break}else s(G,q);q=q.sibling}te=Yf(z,G.mode,te),te.return=G,G=te}return A(G);case b:return z=Fs(z),ft(G,q,z,te)}if(Xe(z))return ge(G,q,z,te);if(B(z)){if(ve=B(z),typeof ve!="function")throw Error(o(150));return z=ve.call(z),Ae(G,q,z,te)}if(typeof z.then=="function")return ft(G,q,Pu(z),te);if(z.$$typeof===j)return ft(G,q,Mu(G,z),te);Uu(G,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,q!==null&&q.tag===6?(a(G,q.sibling),te=y(q,z),te.return=G,G=te):(a(G,q),te=zf(z,G.mode,te),te.return=G,G=te),A(G)):a(G,q)}return function(G,q,z,te){try{Qa=0;var ve=ft(G,q,z,te);return xr=null,ve}catch(_e){if(_e===Dr||_e===xu)throw _e;var je=Vn(29,_e,null,G.mode);return je.lanes=te,je.return=G,je}finally{}}}var zs=tg(!0),ng=tg(!1),qo=!1;function id(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function od(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Bo(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Go(i,s,a){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(it&2)!==0){var y=c.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),c.pending=s,s=Ru(i),qm(i,null,a),s}return Iu(i,c,s,a),Ru(i)}function $a(i,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var c=s.lanes;c&=i.pendingLanes,a|=c,s.lanes=a,Aa(i,a)}}function sd(i,s){var a=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var y=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};_===null?y=_=A:_=_.next=A,a=a.next}while(a!==null);_===null?y=_=s:_=_.next=s}else y=_=s;a={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=s:i.next=s,a.lastBaseUpdate=s}var rd=!1;function Wa(){if(rd){var i=Mr;if(i!==null)throw i}}function Za(i,s,a,c){rd=!1;var y=i.updateQueue;qo=!1;var _=y.firstBaseUpdate,A=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var U=I,Y=U.next;U.next=null,A===null?_=Y:A.next=Y,A=U;var Z=i.alternate;Z!==null&&(Z=Z.updateQueue,I=Z.lastBaseUpdate,I!==A&&(I===null?Z.firstBaseUpdate=Y:I.next=Y,Z.lastBaseUpdate=U))}if(_!==null){var se=y.baseState;A=0,Z=Y=U=null,I=_;do{var J=I.lane&-536870913,X=J!==I.lane;if(X?(ze&J)===J:(c&J)===J){J!==0&&J===br&&(rd=!0),Z!==null&&(Z=Z.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var ge=i,Ae=I;J=s;var ft=a;switch(Ae.tag){case 1:if(ge=Ae.payload,typeof ge=="function"){se=ge.call(ft,se,J);break e}se=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Ae.payload,J=typeof ge=="function"?ge.call(ft,se,J):ge,J==null)break e;se=T({},se,J);break e;case 2:qo=!0}}J=I.callback,J!==null&&(i.flags|=64,X&&(i.flags|=8192),X=y.callbacks,X===null?y.callbacks=[J]:X.push(J))}else X={lane:J,tag:I.tag,payload:I.payload,callback:I.callback,next:null},Z===null?(Y=Z=X,U=se):Z=Z.next=X,A|=J;if(I=I.next,I===null){if(I=y.shared.pending,I===null)break;X=I,I=X.next,X.next=null,y.lastBaseUpdate=X,y.shared.pending=null}}while(!0);Z===null&&(U=se),y.baseState=U,y.firstBaseUpdate=Y,y.lastBaseUpdate=Z,_===null&&(y.shared.lanes=0),Jo|=A,i.lanes=A,i.memoizedState=se}}function ig(i,s){if(typeof i!="function")throw Error(o(191,i));i.call(s)}function og(i,s){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)ig(a[i],s)}var Vr=L(null),Lu=L(0);function sg(i,s){i=mo,ue(Lu,i),ue(Vr,s),mo=i|s.baseLanes}function ad(){ue(Lu,mo),ue(Vr,Vr.current)}function ld(){mo=Lu.current,ee(Vr),ee(Lu)}var Pn=L(null),Xn=null;function Fo(i){var s=i.alternate;ue(Rt,Rt.current&1),ue(Pn,i),Xn===null&&(s===null||Vr.current!==null||s.memoizedState!==null)&&(Xn=i)}function ud(i){ue(Rt,Rt.current),ue(Pn,i),Xn===null&&(Xn=i)}function rg(i){i.tag===22?(ue(Rt,Rt.current),ue(Pn,i),Xn===null&&(Xn=i)):Ho()}function Ho(){ue(Rt,Rt.current),ue(Pn,Pn.current)}function Un(i){ee(Pn),Xn===i&&(Xn=null),ee(Rt)}var Rt=L(0);function Ou(i){for(var s=i;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||mh(a)||gh(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ro=0,Oe=null,ut=null,Ot=null,ku=!1,Pr=!1,Ys=!1,qu=0,ja=0,Ur=null,QA=0;function At(){throw Error(o(321))}function cd(i,s){if(s===null)return!1;for(var a=0;a<s.length&&a<i.length;a++)if(!xn(i[a],s[a]))return!1;return!0}function fd(i,s,a,c,y,_){return ro=_,Oe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,$.H=i===null||i.memoizedState===null?Hg:Rd,Ys=!1,_=a(c,y),Ys=!1,Pr&&(_=lg(s,a,c,y)),ag(i),_}function ag(i){$.H=nl;var s=ut!==null&&ut.next!==null;if(ro=0,Ot=ut=Oe=null,ku=!1,ja=0,Ur=null,s)throw Error(o(300));i===null||kt||(i=i.dependencies,i!==null&&bu(i)&&(kt=!0))}function lg(i,s,a,c){Oe=i;var y=0;do{if(Pr&&(Ur=null),ja=0,Pr=!1,25<=y)throw Error(o(301));if(y+=1,Ot=ut=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}$.H=zg,_=s(a,c)}while(Pr);return _}function XA(){var i=$.H,s=i.useState()[0];return s=typeof s.then=="function"?el(s):s,i=i.useState()[0],(ut!==null?ut.memoizedState:null)!==i&&(Oe.flags|=1024),s}function dd(){var i=qu!==0;return qu=0,i}function hd(i,s,a){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~a}function pd(i){if(ku){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}ku=!1}ro=0,Ot=ut=Oe=null,Pr=!1,ja=qu=0,Ur=null}function gn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?Oe.memoizedState=Ot=i:Ot=Ot.next=i,Ot}function wt(){if(ut===null){var i=Oe.alternate;i=i!==null?i.memoizedState:null}else i=ut.next;var s=Ot===null?Oe.memoizedState:Ot.next;if(s!==null)Ot=s,ut=i;else{if(i===null)throw Oe.alternate===null?Error(o(467)):Error(o(310));ut=i,i={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},Ot===null?Oe.memoizedState=Ot=i:Ot=Ot.next=i}return Ot}function Bu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function el(i){var s=ja;return ja+=1,Ur===null&&(Ur=[]),i=Zm(Ur,i,s),s=Oe,(Ot===null?s.memoizedState:Ot.next)===null&&(s=s.alternate,$.H=s===null||s.memoizedState===null?Hg:Rd),i}function Gu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return el(i);if(i.$$typeof===j)return nn(i)}throw Error(o(438,String(i)))}function md(i){var s=null,a=Oe.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var c=Oe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(y){return y.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Bu(),Oe.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(i),c=0;c<i;c++)a[c]=P;return s.index++,a}function ao(i,s){return typeof s=="function"?s(i):s}function Fu(i){var s=wt();return gd(s,ut,i)}function gd(i,s,a){var c=i.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=a;var y=i.baseQueue,_=c.pending;if(_!==null){if(y!==null){var A=y.next;y.next=_.next,_.next=A}s.baseQueue=y=_,c.pending=null}if(_=i.baseState,y===null)i.memoizedState=_;else{s=y.next;var I=A=null,U=null,Y=s,Z=!1;do{var se=Y.lane&-536870913;if(se!==Y.lane?(ze&se)===se:(ro&se)===se){var J=Y.revertLane;if(J===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),se===br&&(Z=!0);else if((ro&J)===J){Y=Y.next,J===br&&(Z=!0);continue}else se={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},U===null?(I=U=se,A=_):U=U.next=se,Oe.lanes|=J,Jo|=J;se=Y.action,Ys&&a(_,se),_=Y.hasEagerState?Y.eagerState:a(_,se)}else J={lane:se,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},U===null?(I=U=J,A=_):U=U.next=J,Oe.lanes|=se,Jo|=se;Y=Y.next}while(Y!==null&&Y!==s);if(U===null?A=_:U.next=I,!xn(_,i.memoizedState)&&(kt=!0,Z&&(a=Mr,a!==null)))throw a;i.memoizedState=_,i.baseState=A,i.baseQueue=U,c.lastRenderedState=_}return y===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function yd(i){var s=wt(),a=s.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=i;var c=a.dispatch,y=a.pending,_=s.memoizedState;if(y!==null){a.pending=null;var A=y=y.next;do _=i(_,A.action),A=A.next;while(A!==y);xn(_,s.memoizedState)||(kt=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),a.lastRenderedState=_}return[_,c]}function ug(i,s,a){var c=Oe,y=wt(),_=Qe;if(_){if(a===void 0)throw Error(o(407));a=a()}else a=s();var A=!xn((ut||y).memoizedState,a);if(A&&(y.memoizedState=a,kt=!0),y=y.queue,Td(dg.bind(null,c,y,i),[i]),y.getSnapshot!==s||A||Ot!==null&&Ot.memoizedState.tag&1){if(c.flags|=2048,Lr(9,{destroy:void 0},fg.bind(null,c,y,a,s),null),dt===null)throw Error(o(349));_||(ro&127)!==0||cg(c,s,a)}return a}function cg(i,s,a){i.flags|=16384,i={getSnapshot:s,value:a},s=Oe.updateQueue,s===null?(s=Bu(),Oe.updateQueue=s,s.stores=[i]):(a=s.stores,a===null?s.stores=[i]:a.push(i))}function fg(i,s,a,c){s.value=a,s.getSnapshot=c,hg(s)&&pg(i)}function dg(i,s,a){return a(function(){hg(s)&&pg(i)})}function hg(i){var s=i.getSnapshot;i=i.value;try{var a=s();return!xn(i,a)}catch{return!0}}function pg(i){var s=Ls(i,2);s!==null&&wn(s,i,2)}function _d(i){var s=gn();if(typeof i=="function"){var a=i;if(i=a(),Ys){St(!0);try{a()}finally{St(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:i},s}function mg(i,s,a,c){return i.baseState=a,gd(i,ut,typeof c=="function"?c:ao)}function $A(i,s,a,c,y){if(Yu(i))throw Error(o(485));if(i=s.action,i!==null){var _={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};$.T!==null?a(!0):_.isTransition=!1,c(_),a=s.pending,a===null?(_.next=s.pending=_,gg(s,_)):(_.next=a.next,s.pending=a.next=_)}}function gg(i,s){var a=s.action,c=s.payload,y=i.state;if(s.isTransition){var _=$.T,A={};$.T=A;try{var I=a(y,c),U=$.S;U!==null&&U(A,I),yg(i,s,I)}catch(Y){vd(i,s,Y)}finally{_!==null&&A.types!==null&&(_.types=A.types),$.T=_}}else try{_=a(y,c),yg(i,s,_)}catch(Y){vd(i,s,Y)}}function yg(i,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){_g(i,s,c)},function(c){return vd(i,s,c)}):_g(i,s,a)}function _g(i,s,a){s.status="fulfilled",s.value=a,vg(s),i.state=a,s=i.pending,s!==null&&(a=s.next,a===s?i.pending=null:(a=a.next,s.next=a,gg(i,a)))}function vd(i,s,a){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=a,vg(s),s=s.next;while(s!==c)}i.action=null}function vg(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function Tg(i,s){return s}function Eg(i,s){if(Qe){var a=dt.formState;if(a!==null){e:{var c=Oe;if(Qe){if(pt){t:{for(var y=pt,_=Qn;y.nodeType!==8;){if(!_){y=null;break t}if(y=$n(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){pt=$n(y.nextSibling),c=y.data==="F!";break e}}Oo(c)}c=!1}c&&(s=a[0])}}return a=gn(),a.memoizedState=a.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tg,lastRenderedState:s},a.queue=c,a=Bg.bind(null,Oe,c),c.dispatch=a,c=_d(!1),_=Id.bind(null,Oe,!1,c.queue),c=gn(),y={state:s,dispatch:null,action:i,pending:null},c.queue=y,a=$A.bind(null,Oe,y,_,a),y.dispatch=a,c.memoizedState=i,[s,a,!1]}function Sg(i){var s=wt();return Ag(s,ut,i)}function Ag(i,s,a){if(s=gd(i,s,Tg)[0],i=Fu(ao)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=el(s)}catch(A){throw A===Dr?xu:A}else c=s;s=wt();var y=s.queue,_=y.dispatch;return a!==s.memoizedState&&(Oe.flags|=2048,Lr(9,{destroy:void 0},WA.bind(null,y,a),null)),[c,_,i]}function WA(i,s){i.action=s}function Cg(i){var s=wt(),a=ut;if(a!==null)return Ag(s,a,i);wt(),s=s.memoizedState,a=wt();var c=a.queue.dispatch;return a.memoizedState=i,[s,c,!1]}function Lr(i,s,a,c){return i={tag:i,create:a,deps:c,inst:s,next:null},s=Oe.updateQueue,s===null&&(s=Bu(),Oe.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=i.next=i:(c=a.next,a.next=i,i.next=c,s.lastEffect=i),i}function Ig(){return wt().memoizedState}function Hu(i,s,a,c){var y=gn();Oe.flags|=i,y.memoizedState=Lr(1|s,{destroy:void 0},a,c===void 0?null:c)}function zu(i,s,a,c){var y=wt();c=c===void 0?null:c;var _=y.memoizedState.inst;ut!==null&&c!==null&&cd(c,ut.memoizedState.deps)?y.memoizedState=Lr(s,_,a,c):(Oe.flags|=i,y.memoizedState=Lr(1|s,_,a,c))}function Rg(i,s){Hu(8390656,8,i,s)}function Td(i,s){zu(2048,8,i,s)}function ZA(i){Oe.flags|=4;var s=Oe.updateQueue;if(s===null)s=Bu(),Oe.updateQueue=s,s.events=[i];else{var a=s.events;a===null?s.events=[i]:a.push(i)}}function wg(i){var s=wt().memoizedState;return ZA({ref:s,nextImpl:i}),function(){if((it&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function Ng(i,s){return zu(4,2,i,s)}function bg(i,s){return zu(4,4,i,s)}function Mg(i,s){if(typeof s=="function"){i=i();var a=s(i);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Dg(i,s,a){a=a!=null?a.concat([i]):null,zu(4,4,Mg.bind(null,s,i),a)}function Ed(){}function xg(i,s){var a=wt();s=s===void 0?null:s;var c=a.memoizedState;return s!==null&&cd(s,c[1])?c[0]:(a.memoizedState=[i,s],i)}function Vg(i,s){var a=wt();s=s===void 0?null:s;var c=a.memoizedState;if(s!==null&&cd(s,c[1]))return c[0];if(c=i(),Ys){St(!0);try{i()}finally{St(!1)}}return a.memoizedState=[c,s],c}function Sd(i,s,a){return a===void 0||(ro&1073741824)!==0&&(ze&261930)===0?i.memoizedState=s:(i.memoizedState=a,i=Py(),Oe.lanes|=i,Jo|=i,a)}function Pg(i,s,a,c){return xn(a,s)?a:Vr.current!==null?(i=Sd(i,a,c),xn(i,s)||(kt=!0),i):(ro&42)===0||(ro&1073741824)!==0&&(ze&261930)===0?(kt=!0,i.memoizedState=a):(i=Py(),Oe.lanes|=i,Jo|=i,s)}function Ug(i,s,a,c,y){var _=le.p;le.p=_!==0&&8>_?_:8;var A=$.T,I={};$.T=I,Id(i,!1,s,a);try{var U=y(),Y=$.S;if(Y!==null&&Y(I,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var Z=KA(U,c);tl(i,s,Z,kn(i))}else tl(i,s,c,kn(i))}catch(se){tl(i,s,{then:function(){},status:"rejected",reason:se},kn())}finally{le.p=_,A!==null&&I.types!==null&&(A.types=I.types),$.T=A}}function jA(){}function Ad(i,s,a,c){if(i.tag!==5)throw Error(o(476));var y=Lg(i).queue;Ug(i,y,s,pe,a===null?jA:function(){return Og(i),a(c)})}function Lg(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:pe},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:a},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function Og(i){var s=Lg(i);s.next===null&&(s=i.alternate.memoizedState),tl(i,s.next.queue,{},kn())}function Cd(){return nn(_l)}function kg(){return wt().memoizedState}function qg(){return wt().memoizedState}function eC(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var a=kn();i=Bo(a);var c=Go(s,i,a);c!==null&&(wn(c,s,a),$a(c,s,a)),s={cache:jf()},i.payload=s;return}s=s.return}}function tC(i,s,a){var c=kn();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Yu(i)?Gg(s,a):(a=Ff(i,s,a,c),a!==null&&(wn(a,i,c),Fg(a,s,c)))}function Bg(i,s,a){var c=kn();tl(i,s,a,c)}function tl(i,s,a,c){var y={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Yu(i))Gg(s,y);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var A=s.lastRenderedState,I=_(A,a);if(y.hasEagerState=!0,y.eagerState=I,xn(I,A))return Iu(i,s,y,0),dt===null&&Cu(),!1}catch{}finally{}if(a=Ff(i,s,y,c),a!==null)return wn(a,i,c),Fg(a,s,c),!0}return!1}function Id(i,s,a,c){if(c={lane:2,revertLane:ih(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Yu(i)){if(s)throw Error(o(479))}else s=Ff(i,a,c,2),s!==null&&wn(s,i,2)}function Yu(i){var s=i.alternate;return i===Oe||s!==null&&s===Oe}function Gg(i,s){Pr=ku=!0;var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}function Fg(i,s,a){if((a&4194048)!==0){var c=s.lanes;c&=i.pendingLanes,a|=c,s.lanes=a,Aa(i,a)}}var nl={readContext:nn,use:Gu,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useLayoutEffect:At,useInsertionEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useSyncExternalStore:At,useId:At,useHostTransitionStatus:At,useFormState:At,useActionState:At,useOptimistic:At,useMemoCache:At,useCacheRefresh:At};nl.useEffectEvent=At;var Hg={readContext:nn,use:Gu,useCallback:function(i,s){return gn().memoizedState=[i,s===void 0?null:s],i},useContext:nn,useEffect:Rg,useImperativeHandle:function(i,s,a){a=a!=null?a.concat([i]):null,Hu(4194308,4,Mg.bind(null,s,i),a)},useLayoutEffect:function(i,s){return Hu(4194308,4,i,s)},useInsertionEffect:function(i,s){Hu(4,2,i,s)},useMemo:function(i,s){var a=gn();s=s===void 0?null:s;var c=i();if(Ys){St(!0);try{i()}finally{St(!1)}}return a.memoizedState=[c,s],c},useReducer:function(i,s,a){var c=gn();if(a!==void 0){var y=a(s);if(Ys){St(!0);try{a(s)}finally{St(!1)}}}else y=s;return c.memoizedState=c.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},c.queue=i,i=i.dispatch=tC.bind(null,Oe,i),[c.memoizedState,i]},useRef:function(i){var s=gn();return i={current:i},s.memoizedState=i},useState:function(i){i=_d(i);var s=i.queue,a=Bg.bind(null,Oe,s);return s.dispatch=a,[i.memoizedState,a]},useDebugValue:Ed,useDeferredValue:function(i,s){var a=gn();return Sd(a,i,s)},useTransition:function(){var i=_d(!1);return i=Ug.bind(null,Oe,i.queue,!0,!1),gn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,a){var c=Oe,y=gn();if(Qe){if(a===void 0)throw Error(o(407));a=a()}else{if(a=s(),dt===null)throw Error(o(349));(ze&127)!==0||cg(c,s,a)}y.memoizedState=a;var _={value:a,getSnapshot:s};return y.queue=_,Rg(dg.bind(null,c,_,i),[i]),c.flags|=2048,Lr(9,{destroy:void 0},fg.bind(null,c,_,a,s),null),a},useId:function(){var i=gn(),s=dt.identifierPrefix;if(Qe){var a=Hi,c=Fi;a=(c&~(1<<32-Ge(c)-1)).toString(32)+a,s="_"+s+"R_"+a,a=qu++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=QA++,s="_"+s+"r_"+a.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:Cd,useFormState:Eg,useActionState:Eg,useOptimistic:function(i){var s=gn();s.memoizedState=s.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Id.bind(null,Oe,!0,a),a.dispatch=s,[i,s]},useMemoCache:md,useCacheRefresh:function(){return gn().memoizedState=eC.bind(null,Oe)},useEffectEvent:function(i){var s=gn(),a={impl:i};return s.memoizedState=a,function(){if((it&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},Rd={readContext:nn,use:Gu,useCallback:xg,useContext:nn,useEffect:Td,useImperativeHandle:Dg,useInsertionEffect:Ng,useLayoutEffect:bg,useMemo:Vg,useReducer:Fu,useRef:Ig,useState:function(){return Fu(ao)},useDebugValue:Ed,useDeferredValue:function(i,s){var a=wt();return Pg(a,ut.memoizedState,i,s)},useTransition:function(){var i=Fu(ao)[0],s=wt().memoizedState;return[typeof i=="boolean"?i:el(i),s]},useSyncExternalStore:ug,useId:kg,useHostTransitionStatus:Cd,useFormState:Sg,useActionState:Sg,useOptimistic:function(i,s){var a=wt();return mg(a,ut,i,s)},useMemoCache:md,useCacheRefresh:qg};Rd.useEffectEvent=wg;var zg={readContext:nn,use:Gu,useCallback:xg,useContext:nn,useEffect:Td,useImperativeHandle:Dg,useInsertionEffect:Ng,useLayoutEffect:bg,useMemo:Vg,useReducer:yd,useRef:Ig,useState:function(){return yd(ao)},useDebugValue:Ed,useDeferredValue:function(i,s){var a=wt();return ut===null?Sd(a,i,s):Pg(a,ut.memoizedState,i,s)},useTransition:function(){var i=yd(ao)[0],s=wt().memoizedState;return[typeof i=="boolean"?i:el(i),s]},useSyncExternalStore:ug,useId:kg,useHostTransitionStatus:Cd,useFormState:Cg,useActionState:Cg,useOptimistic:function(i,s){var a=wt();return ut!==null?mg(a,ut,i,s):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:md,useCacheRefresh:qg};zg.useEffectEvent=wg;function wd(i,s,a,c){s=i.memoizedState,a=a(c,s),a=a==null?s:T({},s,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var Nd={enqueueSetState:function(i,s,a){i=i._reactInternals;var c=kn(),y=Bo(c);y.payload=s,a!=null&&(y.callback=a),s=Go(i,y,c),s!==null&&(wn(s,i,c),$a(s,i,c))},enqueueReplaceState:function(i,s,a){i=i._reactInternals;var c=kn(),y=Bo(c);y.tag=1,y.payload=s,a!=null&&(y.callback=a),s=Go(i,y,c),s!==null&&(wn(s,i,c),$a(s,i,c))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var a=kn(),c=Bo(a);c.tag=2,s!=null&&(c.callback=s),s=Go(i,c,a),s!==null&&(wn(s,i,a),$a(s,i,a))}};function Yg(i,s,a,c,y,_,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,_,A):s.prototype&&s.prototype.isPureReactComponent?!Fa(a,c)||!Fa(y,_):!0}function Jg(i,s,a,c){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==i&&Nd.enqueueReplaceState(s,s.state,null)}function Js(i,s){var a=s;if("ref"in s){a={};for(var c in s)c!=="ref"&&(a[c]=s[c])}if(i=i.defaultProps){a===s&&(a=T({},a));for(var y in i)a[y]===void 0&&(a[y]=i[y])}return a}function Kg(i){Au(i)}function Qg(i){console.error(i)}function Xg(i){Au(i)}function Ju(i,s){try{var a=i.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function $g(i,s,a){try{var c=i.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function bd(i,s,a){return a=Bo(a),a.tag=3,a.payload={element:null},a.callback=function(){Ju(i,s)},a}function Wg(i){return i=Bo(i),i.tag=3,i}function Zg(i,s,a,c){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var _=c.value;i.payload=function(){return y(_)},i.callback=function(){$g(s,a,c)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){$g(s,a,c),typeof y!="function"&&(Ko===null?Ko=new Set([this]):Ko.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function nC(i,s,a,c,y){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=a.alternate,s!==null&&Nr(s,a,y,!0),a=Pn.current,a!==null){switch(a.tag){case 31:case 13:return Xn===null?oc():a.alternate===null&&Ct===0&&(Ct=3),a.flags&=-257,a.flags|=65536,a.lanes=y,c===Vu?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([c]):s.add(c),eh(i,c,y)),!1;case 22:return a.flags|=65536,c===Vu?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([c]):a.add(c)),eh(i,c,y)),!1}throw Error(o(435,a.tag))}return eh(i,c,y),oc(),!1}if(Qe)return s=Pn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=y,c!==Qf&&(i=Error(o(422),{cause:c}),Ya(Yn(i,a)))):(c!==Qf&&(s=Error(o(423),{cause:c}),Ya(Yn(s,a))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,c=Yn(c,a),y=bd(i.stateNode,c,y),sd(i,y),Ct!==4&&(Ct=2)),!1;var _=Error(o(520),{cause:c});if(_=Yn(_,a),cl===null?cl=[_]:cl.push(_),Ct!==4&&(Ct=2),s===null)return!0;c=Yn(c,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,i=y&-y,a.lanes|=i,i=bd(a.stateNode,c,i),sd(a,i),!1;case 1:if(s=a.type,_=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ko===null||!Ko.has(_))))return a.flags|=65536,y&=-y,a.lanes|=y,y=Wg(y),Zg(y,i,a,c),sd(a,y),!1}a=a.return}while(a!==null);return!1}var Md=Error(o(461)),kt=!1;function on(i,s,a,c){s.child=i===null?ng(s,null,a,c):zs(s,i.child,a,c)}function jg(i,s,a,c,y){a=a.render;var _=s.ref;if("ref"in c){var A={};for(var I in c)I!=="ref"&&(A[I]=c[I])}else A=c;return Bs(s),c=fd(i,s,a,A,_,y),I=dd(),i!==null&&!kt?(hd(i,s,y),lo(i,s,y)):(Qe&&I&&Jf(s),s.flags|=1,on(i,s,c,y),s.child)}function ey(i,s,a,c,y){if(i===null){var _=a.type;return typeof _=="function"&&!Hf(_)&&_.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=_,ty(i,s,_,c,y)):(i=wu(a.type,null,c,s,s.mode,y),i.ref=s.ref,i.return=s,s.child=i)}if(_=i.child,!kd(i,y)){var A=_.memoizedProps;if(a=a.compare,a=a!==null?a:Fa,a(A,c)&&i.ref===s.ref)return lo(i,s,y)}return s.flags|=1,i=no(_,c),i.ref=s.ref,i.return=s,s.child=i}function ty(i,s,a,c,y){if(i!==null){var _=i.memoizedProps;if(Fa(_,c)&&i.ref===s.ref)if(kt=!1,s.pendingProps=c=_,kd(i,y))(i.flags&131072)!==0&&(kt=!0);else return s.lanes=i.lanes,lo(i,s,y)}return Dd(i,s,a,c,y)}function ny(i,s,a,c){var y=c.children,_=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(_=_!==null?_.baseLanes|a:a,i!==null){for(c=s.child=i.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~_}else c=0,s.child=null;return iy(i,s,_,a,c)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Du(s,_!==null?_.cachePool:null),_!==null?sg(s,_):ad(),rg(s);else return c=s.lanes=536870912,iy(i,s,_!==null?_.baseLanes|a:a,a,c)}else _!==null?(Du(s,_.cachePool),sg(s,_),Ho(),s.memoizedState=null):(i!==null&&Du(s,null),ad(),Ho());return on(i,s,y,a),s.child}function il(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function iy(i,s,a,c,y){var _=td();return _=_===null?null:{parent:Lt._currentValue,pool:_},s.memoizedState={baseLanes:a,cachePool:_},i!==null&&Du(s,null),ad(),rg(s),i!==null&&Nr(i,s,c,!0),s.childLanes=y,null}function Ku(i,s){return s=Xu({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function oy(i,s,a){return zs(s,i.child,null,a),i=Ku(s,s.pendingProps),i.flags|=2,Un(s),s.memoizedState=null,i}function iC(i,s,a){var c=s.pendingProps,y=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(Qe){if(c.mode==="hidden")return i=Ku(s,c),s.lanes=536870912,il(null,i);if(ud(s),(i=pt)?(i=g_(i,Qn),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Uo!==null?{id:Fi,overflow:Hi}:null,retryLane:536870912,hydrationErrors:null},a=Gm(i),a.return=s,s.child=a,tn=s,pt=null)):i=null,i===null)throw Oo(s);return s.lanes=536870912,null}return Ku(s,c)}var _=i.memoizedState;if(_!==null){var A=_.dehydrated;if(ud(s),y)if(s.flags&256)s.flags&=-257,s=oy(i,s,a);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(o(558));else if(kt||Nr(i,s,a,!1),y=(a&i.childLanes)!==0,kt||y){if(c=dt,c!==null&&(A=Ca(c,a),A!==0&&A!==_.retryLane))throw _.retryLane=A,Ls(i,A),wn(c,i,A),Md;oc(),s=oy(i,s,a)}else i=_.treeContext,pt=$n(A.nextSibling),tn=s,Qe=!0,Lo=null,Qn=!1,i!==null&&zm(s,i),s=Ku(s,c),s.flags|=4096;return s}return i=no(i.child,{mode:c.mode,children:c.children}),i.ref=s.ref,s.child=i,i.return=s,i}function Qu(i,s){var a=s.ref;if(a===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(i===null||i.ref!==a)&&(s.flags|=4194816)}}function Dd(i,s,a,c,y){return Bs(s),a=fd(i,s,a,c,void 0,y),c=dd(),i!==null&&!kt?(hd(i,s,y),lo(i,s,y)):(Qe&&c&&Jf(s),s.flags|=1,on(i,s,a,y),s.child)}function sy(i,s,a,c,y,_){return Bs(s),s.updateQueue=null,a=lg(s,c,a,y),ag(i),c=dd(),i!==null&&!kt?(hd(i,s,_),lo(i,s,_)):(Qe&&c&&Jf(s),s.flags|=1,on(i,s,a,_),s.child)}function ry(i,s,a,c,y){if(Bs(s),s.stateNode===null){var _=Cr,A=a.contextType;typeof A=="object"&&A!==null&&(_=nn(A)),_=new a(c,_),s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Nd,s.stateNode=_,_._reactInternals=s,_=s.stateNode,_.props=c,_.state=s.memoizedState,_.refs={},id(s),A=a.contextType,_.context=typeof A=="object"&&A!==null?nn(A):Cr,_.state=s.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(wd(s,a,A,c),_.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&Nd.enqueueReplaceState(_,_.state,null),Za(s,c,_,y),Wa(),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(i===null){_=s.stateNode;var I=s.memoizedProps,U=Js(a,I);_.props=U;var Y=_.context,Z=a.contextType;A=Cr,typeof Z=="object"&&Z!==null&&(A=nn(Z));var se=a.getDerivedStateFromProps;Z=typeof se=="function"||typeof _.getSnapshotBeforeUpdate=="function",I=s.pendingProps!==I,Z||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(I||Y!==A)&&Jg(s,_,c,A),qo=!1;var J=s.memoizedState;_.state=J,Za(s,c,_,y),Wa(),Y=s.memoizedState,I||J!==Y||qo?(typeof se=="function"&&(wd(s,a,se,c),Y=s.memoizedState),(U=qo||Yg(s,a,U,c,J,Y,A))?(Z||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=Y),_.props=c,_.state=Y,_.context=A,c=U):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{_=s.stateNode,od(i,s),A=s.memoizedProps,Z=Js(a,A),_.props=Z,se=s.pendingProps,J=_.context,Y=a.contextType,U=Cr,typeof Y=="object"&&Y!==null&&(U=nn(Y)),I=a.getDerivedStateFromProps,(Y=typeof I=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==se||J!==U)&&Jg(s,_,c,U),qo=!1,J=s.memoizedState,_.state=J,Za(s,c,_,y),Wa();var X=s.memoizedState;A!==se||J!==X||qo||i!==null&&i.dependencies!==null&&bu(i.dependencies)?(typeof I=="function"&&(wd(s,a,I,c),X=s.memoizedState),(Z=qo||Yg(s,a,Z,c,J,X,U)||i!==null&&i.dependencies!==null&&bu(i.dependencies))?(Y||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,X,U),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,X,U)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&J===i.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&J===i.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=X),_.props=c,_.state=X,_.context=U,c=Z):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&J===i.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&J===i.memoizedState||(s.flags|=1024),c=!1)}return _=c,Qu(i,s),c=(s.flags&128)!==0,_||c?(_=s.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:_.render(),s.flags|=1,i!==null&&c?(s.child=zs(s,i.child,null,y),s.child=zs(s,null,a,y)):on(i,s,a,y),s.memoizedState=_.state,i=s.child):i=lo(i,s,y),i}function ay(i,s,a,c){return ks(),s.flags|=256,on(i,s,a,c),s.child}var xd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vd(i){return{baseLanes:i,cachePool:$m()}}function Pd(i,s,a){return i=i!==null?i.childLanes&~a:0,s&&(i|=On),i}function ly(i,s,a){var c=s.pendingProps,y=!1,_=(s.flags&128)!==0,A;if((A=_)||(A=i!==null&&i.memoizedState===null?!1:(Rt.current&2)!==0),A&&(y=!0,s.flags&=-129),A=(s.flags&32)!==0,s.flags&=-33,i===null){if(Qe){if(y?Fo(s):Ho(),(i=pt)?(i=g_(i,Qn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Uo!==null?{id:Fi,overflow:Hi}:null,retryLane:536870912,hydrationErrors:null},a=Gm(i),a.return=s,s.child=a,tn=s,pt=null)):i=null,i===null)throw Oo(s);return gh(i)?s.lanes=32:s.lanes=536870912,null}var I=c.children;return c=c.fallback,y?(Ho(),y=s.mode,I=Xu({mode:"hidden",children:I},y),c=Os(c,y,a,null),I.return=s,c.return=s,I.sibling=c,s.child=I,c=s.child,c.memoizedState=Vd(a),c.childLanes=Pd(i,A,a),s.memoizedState=xd,il(null,c)):(Fo(s),Ud(s,I))}var U=i.memoizedState;if(U!==null&&(I=U.dehydrated,I!==null)){if(_)s.flags&256?(Fo(s),s.flags&=-257,s=Ld(i,s,a)):s.memoizedState!==null?(Ho(),s.child=i.child,s.flags|=128,s=null):(Ho(),I=c.fallback,y=s.mode,c=Xu({mode:"visible",children:c.children},y),I=Os(I,y,a,null),I.flags|=2,c.return=s,I.return=s,c.sibling=I,s.child=c,zs(s,i.child,null,a),c=s.child,c.memoizedState=Vd(a),c.childLanes=Pd(i,A,a),s.memoizedState=xd,s=il(null,c));else if(Fo(s),gh(I)){if(A=I.nextSibling&&I.nextSibling.dataset,A)var Y=A.dgst;A=Y,c=Error(o(419)),c.stack="",c.digest=A,Ya({value:c,source:null,stack:null}),s=Ld(i,s,a)}else if(kt||Nr(i,s,a,!1),A=(a&i.childLanes)!==0,kt||A){if(A=dt,A!==null&&(c=Ca(A,a),c!==0&&c!==U.retryLane))throw U.retryLane=c,Ls(i,c),wn(A,i,c),Md;mh(I)||oc(),s=Ld(i,s,a)}else mh(I)?(s.flags|=192,s.child=i.child,s=null):(i=U.treeContext,pt=$n(I.nextSibling),tn=s,Qe=!0,Lo=null,Qn=!1,i!==null&&zm(s,i),s=Ud(s,c.children),s.flags|=4096);return s}return y?(Ho(),I=c.fallback,y=s.mode,U=i.child,Y=U.sibling,c=no(U,{mode:"hidden",children:c.children}),c.subtreeFlags=U.subtreeFlags&65011712,Y!==null?I=no(Y,I):(I=Os(I,y,a,null),I.flags|=2),I.return=s,c.return=s,c.sibling=I,s.child=c,il(null,c),c=s.child,I=i.child.memoizedState,I===null?I=Vd(a):(y=I.cachePool,y!==null?(U=Lt._currentValue,y=y.parent!==U?{parent:U,pool:U}:y):y=$m(),I={baseLanes:I.baseLanes|a,cachePool:y}),c.memoizedState=I,c.childLanes=Pd(i,A,a),s.memoizedState=xd,il(i.child,c)):(Fo(s),a=i.child,i=a.sibling,a=no(a,{mode:"visible",children:c.children}),a.return=s,a.sibling=null,i!==null&&(A=s.deletions,A===null?(s.deletions=[i],s.flags|=16):A.push(i)),s.child=a,s.memoizedState=null,a)}function Ud(i,s){return s=Xu({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Xu(i,s){return i=Vn(22,i,null,s),i.lanes=0,i}function Ld(i,s,a){return zs(s,i.child,null,a),i=Ud(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function uy(i,s,a){i.lanes|=s;var c=i.alternate;c!==null&&(c.lanes|=s),Wf(i.return,s,a)}function Od(i,s,a,c,y,_){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:y,treeForkCount:_}:(A.isBackwards=s,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=a,A.tailMode=y,A.treeForkCount=_)}function cy(i,s,a){var c=s.pendingProps,y=c.revealOrder,_=c.tail;c=c.children;var A=Rt.current,I=(A&2)!==0;if(I?(A=A&1|2,s.flags|=128):A&=1,ue(Rt,A),on(i,s,c,a),c=Qe?za:0,!I&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&uy(i,a,s);else if(i.tag===19)uy(i,a,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(a=s.child,y=null;a!==null;)i=a.alternate,i!==null&&Ou(i)===null&&(y=a),a=a.sibling;a=y,a===null?(y=s.child,s.child=null):(y=a.sibling,a.sibling=null),Od(s,!1,y,a,_,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=s.child,s.child=null;y!==null;){if(i=y.alternate,i!==null&&Ou(i)===null){s.child=y;break}i=y.sibling,y.sibling=a,a=y,y=i}Od(s,!0,a,null,_,c);break;case"together":Od(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function lo(i,s,a){if(i!==null&&(s.dependencies=i.dependencies),Jo|=s.lanes,(a&s.childLanes)===0)if(i!==null){if(Nr(i,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(o(153));if(s.child!==null){for(i=s.child,a=no(i,i.pendingProps),s.child=a,a.return=s;i.sibling!==null;)i=i.sibling,a=a.sibling=no(i,i.pendingProps),a.return=s;a.sibling=null}return s.child}function kd(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&bu(i)))}function oC(i,s,a){switch(s.tag){case 3:Tt(s,s.stateNode.containerInfo),ko(s,Lt,i.memoizedState.cache),ks();break;case 27:case 5:$e(s);break;case 4:Tt(s,s.stateNode.containerInfo);break;case 10:ko(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,ud(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Fo(s),s.flags|=128,null):(a&s.child.childLanes)!==0?ly(i,s,a):(Fo(s),i=lo(i,s,a),i!==null?i.sibling:null);Fo(s);break;case 19:var y=(i.flags&128)!==0;if(c=(a&s.childLanes)!==0,c||(Nr(i,s,a,!1),c=(a&s.childLanes)!==0),y){if(c)return cy(i,s,a);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ue(Rt,Rt.current),c)break;return null;case 22:return s.lanes=0,ny(i,s,a,s.pendingProps);case 24:ko(s,Lt,i.memoizedState.cache)}return lo(i,s,a)}function fy(i,s,a){if(i!==null)if(i.memoizedProps!==s.pendingProps)kt=!0;else{if(!kd(i,a)&&(s.flags&128)===0)return kt=!1,oC(i,s,a);kt=(i.flags&131072)!==0}else kt=!1,Qe&&(s.flags&1048576)!==0&&Hm(s,za,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(i=Fs(s.elementType),s.type=i,typeof i=="function")Hf(i)?(c=Js(i,c),s.tag=1,s=ry(null,s,i,c,a)):(s.tag=0,s=Dd(null,s,i,c,a));else{if(i!=null){var y=i.$$typeof;if(y===ae){s.tag=11,s=jg(null,s,i,c,a);break e}else if(y===M){s.tag=14,s=ey(null,s,i,c,a);break e}}throw s=Ce(i)||i,Error(o(306,s,""))}}return s;case 0:return Dd(i,s,s.type,s.pendingProps,a);case 1:return c=s.type,y=Js(c,s.pendingProps),ry(i,s,c,y,a);case 3:e:{if(Tt(s,s.stateNode.containerInfo),i===null)throw Error(o(387));c=s.pendingProps;var _=s.memoizedState;y=_.element,od(i,s),Za(s,c,null,a);var A=s.memoizedState;if(c=A.cache,ko(s,Lt,c),c!==_.cache&&Zf(s,[Lt],a,!0),Wa(),c=A.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:A.cache},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){s=ay(i,s,c,a);break e}else if(c!==y){y=Yn(Error(o(424)),s),Ya(y),s=ay(i,s,c,a);break e}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(pt=$n(i.firstChild),tn=s,Qe=!0,Lo=null,Qn=!0,a=ng(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ks(),c===y){s=lo(i,s,a);break e}on(i,s,c,a)}s=s.child}return s;case 26:return Qu(i,s),i===null?(a=S_(s.type,null,s.pendingProps,null))?s.memoizedState=a:Qe||(a=s.type,i=s.pendingProps,c=fc(Me.current).createElement(a),c[Vt]=s,c[Qt]=i,sn(c,a,i),Pt(c),s.stateNode=c):s.memoizedState=S_(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return $e(s),i===null&&Qe&&(c=s.stateNode=v_(s.type,s.pendingProps,Me.current),tn=s,Qn=!0,y=pt,Wo(s.type)?(yh=y,pt=$n(c.firstChild)):pt=y),on(i,s,s.pendingProps.children,a),Qu(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Qe&&((y=c=pt)&&(c=PC(c,s.type,s.pendingProps,Qn),c!==null?(s.stateNode=c,tn=s,pt=$n(c.firstChild),Qn=!1,y=!0):y=!1),y||Oo(s)),$e(s),y=s.type,_=s.pendingProps,A=i!==null?i.memoizedProps:null,c=_.children,dh(y,_)?c=null:A!==null&&dh(y,A)&&(s.flags|=32),s.memoizedState!==null&&(y=fd(i,s,XA,null,null,a),_l._currentValue=y),Qu(i,s),on(i,s,c,a),s.child;case 6:return i===null&&Qe&&((i=a=pt)&&(a=UC(a,s.pendingProps,Qn),a!==null?(s.stateNode=a,tn=s,pt=null,i=!0):i=!1),i||Oo(s)),null;case 13:return ly(i,s,a);case 4:return Tt(s,s.stateNode.containerInfo),c=s.pendingProps,i===null?s.child=zs(s,null,c,a):on(i,s,c,a),s.child;case 11:return jg(i,s,s.type,s.pendingProps,a);case 7:return on(i,s,s.pendingProps,a),s.child;case 8:return on(i,s,s.pendingProps.children,a),s.child;case 12:return on(i,s,s.pendingProps.children,a),s.child;case 10:return c=s.pendingProps,ko(s,s.type,c.value),on(i,s,c.children,a),s.child;case 9:return y=s.type._context,c=s.pendingProps.children,Bs(s),y=nn(y),c=c(y),s.flags|=1,on(i,s,c,a),s.child;case 14:return ey(i,s,s.type,s.pendingProps,a);case 15:return ty(i,s,s.type,s.pendingProps,a);case 19:return cy(i,s,a);case 31:return iC(i,s,a);case 22:return ny(i,s,a,s.pendingProps);case 24:return Bs(s),c=nn(Lt),i===null?(y=td(),y===null&&(y=dt,_=jf(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=a),y=_),s.memoizedState={parent:c,cache:y},id(s),ko(s,Lt,y)):((i.lanes&a)!==0&&(od(i,s),Za(s,null,null,a),Wa()),y=i.memoizedState,_=s.memoizedState,y.parent!==c?(y={parent:c,cache:c},s.memoizedState=y,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=y),ko(s,Lt,c)):(c=_.cache,ko(s,Lt,c),c!==y.cache&&Zf(s,[Lt],a,!0))),on(i,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function uo(i){i.flags|=4}function qd(i,s,a,c,y){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(ky())i.flags|=8192;else throw Hs=Vu,nd}else i.flags&=-16777217}function dy(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!w_(s))if(ky())i.flags|=8192;else throw Hs=Vu,nd}function $u(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?nu():536870912,i.lanes|=s,Br|=s)}function ol(i,s){if(!Qe)switch(i.tailMode){case"hidden":s=i.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function mt(i){var s=i.alternate!==null&&i.alternate.child===i.child,a=0,c=0;if(s)for(var y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=c,i.childLanes=a,s}function sC(i,s,a){var c=s.pendingProps;switch(Kf(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(s),null;case 1:return mt(s),null;case 3:return a=s.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),so(Lt),Ie(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(wr(s)?uo(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Xf())),mt(s),null;case 26:var y=s.type,_=s.memoizedState;return i===null?(uo(s),_!==null?(mt(s),dy(s,_)):(mt(s),qd(s,y,null,c,a))):_?_!==i.memoizedState?(uo(s),mt(s),dy(s,_)):(mt(s),s.flags&=-16777217):(i=i.memoizedProps,i!==c&&uo(s),mt(s),qd(s,y,i,c,a)),null;case 27:if(bt(s),a=Me.current,y=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==c&&uo(s);else{if(!c){if(s.stateNode===null)throw Error(o(166));return mt(s),null}i=fe.current,wr(s)?Ym(s):(i=v_(y,c,a),s.stateNode=i,uo(s))}return mt(s),null;case 5:if(bt(s),y=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==c&&uo(s);else{if(!c){if(s.stateNode===null)throw Error(o(166));return mt(s),null}if(_=fe.current,wr(s))Ym(s);else{var A=fc(Me.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?_.multiple=!0:c.size&&(_.size=c.size);break;default:_=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}_[Vt]=s,_[Qt]=c;e:for(A=s.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===s)break e;for(;A.sibling===null;){if(A.return===null||A.return===s)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}s.stateNode=_;e:switch(sn(_,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&uo(s)}}return mt(s),qd(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,a),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==c&&uo(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(o(166));if(i=Me.current,wr(s)){if(i=s.stateNode,a=s.memoizedProps,c=null,y=tn,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}i[Vt]=s,i=!!(i.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||l_(i.nodeValue,a)),i||Oo(s,!0)}else i=fc(i).createTextNode(c),i[Vt]=s,s.stateNode=i}return mt(s),null;case 31:if(a=s.memoizedState,i===null||i.memoizedState!==null){if(c=wr(s),a!==null){if(i===null){if(!c)throw Error(o(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(557));i[Vt]=s}else ks(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;mt(s),i=!1}else a=Xf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return s.flags&256?(Un(s),s):(Un(s),null);if((s.flags&128)!==0)throw Error(o(558))}return mt(s),null;case 13:if(c=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=wr(s),c!==null&&c.dehydrated!==null){if(i===null){if(!y)throw Error(o(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(o(317));y[Vt]=s}else ks(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;mt(s),y=!1}else y=Xf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return s.flags&256?(Un(s),s):(Un(s),null)}return Un(s),(s.flags&128)!==0?(s.lanes=a,s):(a=c!==null,i=i!==null&&i.memoizedState!==null,a&&(c=s.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),_=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==y&&(c.flags|=2048)),a!==i&&a&&(s.child.flags|=8192),$u(s,s.updateQueue),mt(s),null);case 4:return Ie(),i===null&&ah(s.stateNode.containerInfo),mt(s),null;case 10:return so(s.type),mt(s),null;case 19:if(ee(Rt),c=s.memoizedState,c===null)return mt(s),null;if(y=(s.flags&128)!==0,_=c.rendering,_===null)if(y)ol(c,!1);else{if(Ct!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(_=Ou(i),_!==null){for(s.flags|=128,ol(c,!1),i=_.updateQueue,s.updateQueue=i,$u(s,i),s.subtreeFlags=0,i=a,a=s.child;a!==null;)Bm(a,i),a=a.sibling;return ue(Rt,Rt.current&1|2),Qe&&io(s,c.treeForkCount),s.child}i=i.sibling}c.tail!==null&&yt()>tc&&(s.flags|=128,y=!0,ol(c,!1),s.lanes=4194304)}else{if(!y)if(i=Ou(_),i!==null){if(s.flags|=128,y=!0,i=i.updateQueue,s.updateQueue=i,$u(s,i),ol(c,!0),c.tail===null&&c.tailMode==="hidden"&&!_.alternate&&!Qe)return mt(s),null}else 2*yt()-c.renderingStartTime>tc&&a!==536870912&&(s.flags|=128,y=!0,ol(c,!1),s.lanes=4194304);c.isBackwards?(_.sibling=s.child,s.child=_):(i=c.last,i!==null?i.sibling=_:s.child=_,c.last=_)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=yt(),i.sibling=null,a=Rt.current,ue(Rt,y?a&1|2:a&1),Qe&&io(s,c.treeForkCount),i):(mt(s),null);case 22:case 23:return Un(s),ld(),c=s.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(a&536870912)!==0&&(s.flags&128)===0&&(mt(s),s.subtreeFlags&6&&(s.flags|=8192)):mt(s),a=s.updateQueue,a!==null&&$u(s,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==a&&(s.flags|=2048),i!==null&&ee(Gs),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),so(Lt),mt(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function rC(i,s){switch(Kf(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return so(Lt),Ie(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return bt(s),null;case 31:if(s.memoizedState!==null){if(Un(s),s.alternate===null)throw Error(o(340));ks()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(Un(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(o(340));ks()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return ee(Rt),null;case 4:return Ie(),null;case 10:return so(s.type),null;case 22:case 23:return Un(s),ld(),i!==null&&ee(Gs),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return so(Lt),null;case 25:return null;default:return null}}function hy(i,s){switch(Kf(s),s.tag){case 3:so(Lt),Ie();break;case 26:case 27:case 5:bt(s);break;case 4:Ie();break;case 31:s.memoizedState!==null&&Un(s);break;case 13:Un(s);break;case 19:ee(Rt);break;case 10:so(s.type);break;case 22:case 23:Un(s),ld(),i!==null&&ee(Gs);break;case 24:so(Lt)}}function sl(i,s){try{var a=s.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var y=c.next;a=y;do{if((a.tag&i)===i){c=void 0;var _=a.create,A=a.inst;c=_(),A.destroy=c}a=a.next}while(a!==y)}}catch(I){at(s,s.return,I)}}function zo(i,s,a){try{var c=s.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var _=y.next;c=_;do{if((c.tag&i)===i){var A=c.inst,I=A.destroy;if(I!==void 0){A.destroy=void 0,y=s;var U=a,Y=I;try{Y()}catch(Z){at(y,U,Z)}}}c=c.next}while(c!==_)}}catch(Z){at(s,s.return,Z)}}function py(i){var s=i.updateQueue;if(s!==null){var a=i.stateNode;try{og(s,a)}catch(c){at(i,i.return,c)}}}function my(i,s,a){a.props=Js(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(c){at(i,s,c)}}function rl(i,s){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof a=="function"?i.refCleanup=a(c):a.current=c}}catch(y){at(i,s,y)}}function zi(i,s){var a=i.ref,c=i.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(y){at(i,s,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){at(i,s,y)}else a.current=null}function gy(i){var s=i.type,a=i.memoizedProps,c=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(y){at(i,i.return,y)}}function Bd(i,s,a){try{var c=i.stateNode;NC(c,i.type,a,s),c[Qt]=s}catch(y){at(i,i.return,y)}}function yy(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Wo(i.type)||i.tag===4}function Gd(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||yy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Wo(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Fd(i,s,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(i),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=li));else if(c!==4&&(c===27&&Wo(i.type)&&(a=i.stateNode,s=null),i=i.child,i!==null))for(Fd(i,s,a),i=i.sibling;i!==null;)Fd(i,s,a),i=i.sibling}function Wu(i,s,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?a.insertBefore(i,s):a.appendChild(i);else if(c!==4&&(c===27&&Wo(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(Wu(i,s,a),i=i.sibling;i!==null;)Wu(i,s,a),i=i.sibling}function _y(i){var s=i.stateNode,a=i.memoizedProps;try{for(var c=i.type,y=s.attributes;y.length;)s.removeAttributeNode(y[0]);sn(s,c,a),s[Vt]=i,s[Qt]=a}catch(_){at(i,i.return,_)}}var co=!1,qt=!1,Hd=!1,vy=typeof WeakSet=="function"?WeakSet:Set,$t=null;function aC(i,s){if(i=i.containerInfo,ch=_c,i=Dm(i),Lf(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var y=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var A=0,I=-1,U=-1,Y=0,Z=0,se=i,J=null;t:for(;;){for(var X;se!==a||y!==0&&se.nodeType!==3||(I=A+y),se!==_||c!==0&&se.nodeType!==3||(U=A+c),se.nodeType===3&&(A+=se.nodeValue.length),(X=se.firstChild)!==null;)J=se,se=X;for(;;){if(se===i)break t;if(J===a&&++Y===y&&(I=A),J===_&&++Z===c&&(U=A),(X=se.nextSibling)!==null)break;se=J,J=se.parentNode}se=X}a=I===-1||U===-1?null:{start:I,end:U}}else a=null}a=a||{start:0,end:0}}else a=null;for(fh={focusedElem:i,selectionRange:a},_c=!1,$t=s;$t!==null;)if(s=$t,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,$t=i;else for(;$t!==null;){switch(s=$t,_=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)y=i[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,a=s,y=_.memoizedProps,_=_.memoizedState,c=a.stateNode;try{var ge=Js(a.type,y);i=c.getSnapshotBeforeUpdate(ge,_),c.__reactInternalSnapshotBeforeUpdate=i}catch(Ae){at(a,a.return,Ae)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,a=i.nodeType,a===9)ph(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":ph(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(o(163))}if(i=s.sibling,i!==null){i.return=s.return,$t=i;break}$t=s.return}}function Ty(i,s,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:ho(i,a),c&4&&sl(5,a);break;case 1:if(ho(i,a),c&4)if(i=a.stateNode,s===null)try{i.componentDidMount()}catch(A){at(a,a.return,A)}else{var y=Js(a.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(y,s,i.__reactInternalSnapshotBeforeUpdate)}catch(A){at(a,a.return,A)}}c&64&&py(a),c&512&&rl(a,a.return);break;case 3:if(ho(i,a),c&64&&(i=a.updateQueue,i!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{og(i,s)}catch(A){at(a,a.return,A)}}break;case 27:s===null&&c&4&&_y(a);case 26:case 5:ho(i,a),s===null&&c&4&&gy(a),c&512&&rl(a,a.return);break;case 12:ho(i,a);break;case 31:ho(i,a),c&4&&Ay(i,a);break;case 13:ho(i,a),c&4&&Cy(i,a),c&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=gC.bind(null,a),LC(i,a))));break;case 22:if(c=a.memoizedState!==null||co,!c){s=s!==null&&s.memoizedState!==null||qt,y=co;var _=qt;co=c,(qt=s)&&!_?po(i,a,(a.subtreeFlags&8772)!==0):ho(i,a),co=y,qt=_}break;case 30:break;default:ho(i,a)}}function Ey(i){var s=i.alternate;s!==null&&(i.alternate=null,Ey(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&cr(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var vt=null,An=!1;function fo(i,s,a){for(a=a.child;a!==null;)Sy(i,s,a),a=a.sibling}function Sy(i,s,a){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(Tn,a)}catch{}switch(a.tag){case 26:qt||zi(a,s),fo(i,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:qt||zi(a,s);var c=vt,y=An;Wo(a.type)&&(vt=a.stateNode,An=!1),fo(i,s,a),ml(a.stateNode),vt=c,An=y;break;case 5:qt||zi(a,s);case 6:if(c=vt,y=An,vt=null,fo(i,s,a),vt=c,An=y,vt!==null)if(An)try{(vt.nodeType===9?vt.body:vt.nodeName==="HTML"?vt.ownerDocument.body:vt).removeChild(a.stateNode)}catch(_){at(a,s,_)}else try{vt.removeChild(a.stateNode)}catch(_){at(a,s,_)}break;case 18:vt!==null&&(An?(i=vt,p_(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Qr(i)):p_(vt,a.stateNode));break;case 4:c=vt,y=An,vt=a.stateNode.containerInfo,An=!0,fo(i,s,a),vt=c,An=y;break;case 0:case 11:case 14:case 15:zo(2,a,s),qt||zo(4,a,s),fo(i,s,a);break;case 1:qt||(zi(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"&&my(a,s,c)),fo(i,s,a);break;case 21:fo(i,s,a);break;case 22:qt=(c=qt)||a.memoizedState!==null,fo(i,s,a),qt=c;break;default:fo(i,s,a)}}function Ay(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Qr(i)}catch(a){at(s,s.return,a)}}}function Cy(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Qr(i)}catch(a){at(s,s.return,a)}}function lC(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new vy),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new vy),s;default:throw Error(o(435,i.tag))}}function Zu(i,s){var a=lC(i);s.forEach(function(c){if(!a.has(c)){a.add(c);var y=yC.bind(null,i,c);c.then(y,y)}})}function Cn(i,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var y=a[c],_=i,A=s,I=A;e:for(;I!==null;){switch(I.tag){case 27:if(Wo(I.type)){vt=I.stateNode,An=!1;break e}break;case 5:vt=I.stateNode,An=!1;break e;case 3:case 4:vt=I.stateNode.containerInfo,An=!0;break e}I=I.return}if(vt===null)throw Error(o(160));Sy(_,A,y),vt=null,An=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Iy(s,i),s=s.sibling}var pi=null;function Iy(i,s){var a=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Cn(s,i),In(i),c&4&&(zo(3,i,i.return),sl(3,i),zo(5,i,i.return));break;case 1:Cn(s,i),In(i),c&512&&(qt||a===null||zi(a,a.return)),c&64&&co&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var y=pi;if(Cn(s,i),In(i),c&512&&(qt||a===null||zi(a,a.return)),c&4){var _=a!==null?a.memoizedState:null;if(c=i.memoizedState,a===null)if(c===null)if(i.stateNode===null){e:{c=i.type,a=i.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":_=y.getElementsByTagName("title")[0],(!_||_[Mi]||_[Vt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(c),y.head.insertBefore(_,y.querySelector("head > title"))),sn(_,c,a),_[Vt]=i,Pt(_),c=_;break e;case"link":var A=I_("link","href",y).get(c+(a.href||""));if(A){for(var I=0;I<A.length;I++)if(_=A[I],_.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&_.getAttribute("rel")===(a.rel==null?null:a.rel)&&_.getAttribute("title")===(a.title==null?null:a.title)&&_.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(I,1);break t}}_=y.createElement(c),sn(_,c,a),y.head.appendChild(_);break;case"meta":if(A=I_("meta","content",y).get(c+(a.content||""))){for(I=0;I<A.length;I++)if(_=A[I],_.getAttribute("content")===(a.content==null?null:""+a.content)&&_.getAttribute("name")===(a.name==null?null:a.name)&&_.getAttribute("property")===(a.property==null?null:a.property)&&_.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&_.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(I,1);break t}}_=y.createElement(c),sn(_,c,a),y.head.appendChild(_);break;default:throw Error(o(468,c))}_[Vt]=i,Pt(_),c=_}i.stateNode=c}else R_(y,i.type,i.stateNode);else i.stateNode=C_(y,c,i.memoizedProps);else _!==c?(_===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):_.count--,c===null?R_(y,i.type,i.stateNode):C_(y,c,i.memoizedProps)):c===null&&i.stateNode!==null&&Bd(i,i.memoizedProps,a.memoizedProps)}break;case 27:Cn(s,i),In(i),c&512&&(qt||a===null||zi(a,a.return)),a!==null&&c&4&&Bd(i,i.memoizedProps,a.memoizedProps);break;case 5:if(Cn(s,i),In(i),c&512&&(qt||a===null||zi(a,a.return)),i.flags&32){y=i.stateNode;try{Sn(y,"")}catch(ge){at(i,i.return,ge)}}c&4&&i.stateNode!=null&&(y=i.memoizedProps,Bd(i,y,a!==null?a.memoizedProps:y)),c&1024&&(Hd=!0);break;case 6:if(Cn(s,i),In(i),c&4){if(i.stateNode===null)throw Error(o(162));c=i.memoizedProps,a=i.stateNode;try{a.nodeValue=c}catch(ge){at(i,i.return,ge)}}break;case 3:if(pc=null,y=pi,pi=dc(s.containerInfo),Cn(s,i),pi=y,In(i),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Qr(s.containerInfo)}catch(ge){at(i,i.return,ge)}Hd&&(Hd=!1,Ry(i));break;case 4:c=pi,pi=dc(i.stateNode.containerInfo),Cn(s,i),In(i),pi=c;break;case 12:Cn(s,i),In(i);break;case 31:Cn(s,i),In(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Zu(i,c)));break;case 13:Cn(s,i),In(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ec=yt()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Zu(i,c)));break;case 22:y=i.memoizedState!==null;var U=a!==null&&a.memoizedState!==null,Y=co,Z=qt;if(co=Y||y,qt=Z||U,Cn(s,i),qt=Z,co=Y,In(i),c&8192)e:for(s=i.stateNode,s._visibility=y?s._visibility&-2:s._visibility|1,y&&(a===null||U||co||qt||Ks(i)),a=null,s=i;;){if(s.tag===5||s.tag===26){if(a===null){U=a=s;try{if(_=U.stateNode,y)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{I=U.stateNode;var se=U.memoizedProps.style,J=se!=null&&se.hasOwnProperty("display")?se.display:null;I.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(ge){at(U,U.return,ge)}}}else if(s.tag===6){if(a===null){U=s;try{U.stateNode.nodeValue=y?"":U.memoizedProps}catch(ge){at(U,U.return,ge)}}}else if(s.tag===18){if(a===null){U=s;try{var X=U.stateNode;y?m_(X,!0):m_(U.stateNode,!1)}catch(ge){at(U,U.return,ge)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=i.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,Zu(i,a))));break;case 19:Cn(s,i),In(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Zu(i,c)));break;case 30:break;case 21:break;default:Cn(s,i),In(i)}}function In(i){var s=i.flags;if(s&2){try{for(var a,c=i.return;c!==null;){if(yy(c)){a=c;break}c=c.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var y=a.stateNode,_=Gd(i);Wu(i,_,y);break;case 5:var A=a.stateNode;a.flags&32&&(Sn(A,""),a.flags&=-33);var I=Gd(i);Wu(i,I,A);break;case 3:case 4:var U=a.stateNode.containerInfo,Y=Gd(i);Fd(i,Y,U);break;default:throw Error(o(161))}}catch(Z){at(i,i.return,Z)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function Ry(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;Ry(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function ho(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Ty(i,s.alternate,s),s=s.sibling}function Ks(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:zo(4,s,s.return),Ks(s);break;case 1:zi(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&my(s,s.return,a),Ks(s);break;case 27:ml(s.stateNode);case 26:case 5:zi(s,s.return),Ks(s);break;case 22:s.memoizedState===null&&Ks(s);break;case 30:Ks(s);break;default:Ks(s)}i=i.sibling}}function po(i,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,y=i,_=s,A=_.flags;switch(_.tag){case 0:case 11:case 15:po(y,_,a),sl(4,_);break;case 1:if(po(y,_,a),c=_,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Y){at(c,c.return,Y)}if(c=_,y=c.updateQueue,y!==null){var I=c.stateNode;try{var U=y.shared.hiddenCallbacks;if(U!==null)for(y.shared.hiddenCallbacks=null,y=0;y<U.length;y++)ig(U[y],I)}catch(Y){at(c,c.return,Y)}}a&&A&64&&py(_),rl(_,_.return);break;case 27:_y(_);case 26:case 5:po(y,_,a),a&&c===null&&A&4&&gy(_),rl(_,_.return);break;case 12:po(y,_,a);break;case 31:po(y,_,a),a&&A&4&&Ay(y,_);break;case 13:po(y,_,a),a&&A&4&&Cy(y,_);break;case 22:_.memoizedState===null&&po(y,_,a),rl(_,_.return);break;case 30:break;default:po(y,_,a)}s=s.sibling}}function zd(i,s){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&Ja(a))}function Yd(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Ja(i))}function mi(i,s,a,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)wy(i,s,a,c),s=s.sibling}function wy(i,s,a,c){var y=s.flags;switch(s.tag){case 0:case 11:case 15:mi(i,s,a,c),y&2048&&sl(9,s);break;case 1:mi(i,s,a,c);break;case 3:mi(i,s,a,c),y&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Ja(i)));break;case 12:if(y&2048){mi(i,s,a,c),i=s.stateNode;try{var _=s.memoizedProps,A=_.id,I=_.onPostCommit;typeof I=="function"&&I(A,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(U){at(s,s.return,U)}}else mi(i,s,a,c);break;case 31:mi(i,s,a,c);break;case 13:mi(i,s,a,c);break;case 23:break;case 22:_=s.stateNode,A=s.alternate,s.memoizedState!==null?_._visibility&2?mi(i,s,a,c):al(i,s):_._visibility&2?mi(i,s,a,c):(_._visibility|=2,Or(i,s,a,c,(s.subtreeFlags&10256)!==0||!1)),y&2048&&zd(A,s);break;case 24:mi(i,s,a,c),y&2048&&Yd(s.alternate,s);break;default:mi(i,s,a,c)}}function Or(i,s,a,c,y){for(y=y&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var _=i,A=s,I=a,U=c,Y=A.flags;switch(A.tag){case 0:case 11:case 15:Or(_,A,I,U,y),sl(8,A);break;case 23:break;case 22:var Z=A.stateNode;A.memoizedState!==null?Z._visibility&2?Or(_,A,I,U,y):al(_,A):(Z._visibility|=2,Or(_,A,I,U,y)),y&&Y&2048&&zd(A.alternate,A);break;case 24:Or(_,A,I,U,y),y&&Y&2048&&Yd(A.alternate,A);break;default:Or(_,A,I,U,y)}s=s.sibling}}function al(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=i,c=s,y=c.flags;switch(c.tag){case 22:al(a,c),y&2048&&zd(c.alternate,c);break;case 24:al(a,c),y&2048&&Yd(c.alternate,c);break;default:al(a,c)}s=s.sibling}}var ll=8192;function kr(i,s,a){if(i.subtreeFlags&ll)for(i=i.child;i!==null;)Ny(i,s,a),i=i.sibling}function Ny(i,s,a){switch(i.tag){case 26:kr(i,s,a),i.flags&ll&&i.memoizedState!==null&&QC(a,pi,i.memoizedState,i.memoizedProps);break;case 5:kr(i,s,a);break;case 3:case 4:var c=pi;pi=dc(i.stateNode.containerInfo),kr(i,s,a),pi=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=ll,ll=16777216,kr(i,s,a),ll=c):kr(i,s,a));break;default:kr(i,s,a)}}function by(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function ul(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];$t=c,Dy(c,i)}by(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)My(i),i=i.sibling}function My(i){switch(i.tag){case 0:case 11:case 15:ul(i),i.flags&2048&&zo(9,i,i.return);break;case 3:ul(i);break;case 12:ul(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,ju(i)):ul(i);break;default:ul(i)}}function ju(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];$t=c,Dy(c,i)}by(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:zo(8,s,s.return),ju(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,ju(s));break;default:ju(s)}i=i.sibling}}function Dy(i,s){for(;$t!==null;){var a=$t;switch(a.tag){case 0:case 11:case 15:zo(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Ja(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,$t=c;else e:for(a=i;$t!==null;){c=$t;var y=c.sibling,_=c.return;if(Ey(c),c===a){$t=null;break e}if(y!==null){y.return=_,$t=y;break e}$t=_}}}var uC={getCacheForType:function(i){var s=nn(Lt),a=s.data.get(i);return a===void 0&&(a=i(),s.data.set(i,a)),a},cacheSignal:function(){return nn(Lt).controller.signal}},cC=typeof WeakMap=="function"?WeakMap:Map,it=0,dt=null,Fe=null,ze=0,rt=0,Ln=null,Yo=!1,qr=!1,Jd=!1,mo=0,Ct=0,Jo=0,Qs=0,Kd=0,On=0,Br=0,cl=null,Rn=null,Qd=!1,ec=0,xy=0,tc=1/0,nc=null,Ko=null,zt=0,Qo=null,Gr=null,go=0,Xd=0,$d=null,Vy=null,fl=0,Wd=null;function kn(){return(it&2)!==0&&ze!==0?ze&-ze:$.T!==null?ih():iu()}function Py(){if(On===0)if((ze&536870912)===0||Qe){var i=Es;Es<<=1,(Es&3932160)===0&&(Es=262144),On=i}else On=536870912;return i=Pn.current,i!==null&&(i.flags|=32),On}function wn(i,s,a){(i===dt&&(rt===2||rt===9)||i.cancelPendingCommit!==null)&&(Fr(i,0),Xo(i,ze,On,!1)),Ss(i,a),((it&2)===0||i!==dt)&&(i===dt&&((it&2)===0&&(Qs|=a),Ct===4&&Xo(i,ze,On,!1)),Yi(i))}function Uy(i,s,a){if((it&6)!==0)throw Error(o(327));var c=!a&&(s&127)===0&&(s&i.expiredLanes)===0||si(i,s),y=c?hC(i,s):jd(i,s,!0),_=c;do{if(y===0){qr&&!c&&Xo(i,s,0,!1);break}else{if(a=i.current.alternate,_&&!fC(a)){y=jd(i,s,!1),_=!1;continue}if(y===2){if(_=s,i.errorRecoveryDisabledLanes&_)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){s=A;e:{var I=i;y=cl;var U=I.current.memoizedState.isDehydrated;if(U&&(Fr(I,A).flags|=256),A=jd(I,A,!1),A!==2){if(Jd&&!U){I.errorRecoveryDisabledLanes|=_,Qs|=_,y=4;break e}_=Rn,Rn=y,_!==null&&(Rn===null?Rn=_:Rn.push.apply(Rn,_))}y=A}if(_=!1,y!==2)continue}}if(y===1){Fr(i,0),Xo(i,s,0,!0);break}e:{switch(c=i,_=y,_){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:Xo(c,s,On,!Yo);break e;case 2:Rn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(y=ec+300-yt(),10<y)){if(Xo(c,s,On,!Yo),wi(c,0,!0)!==0)break e;go=s,c.timeoutHandle=d_(Ly.bind(null,c,a,Rn,nc,Qd,s,On,Qs,Br,Yo,_,"Throttled",-0,0),y);break e}Ly(c,a,Rn,nc,Qd,s,On,Qs,Br,Yo,_,null,-0,0)}}break}while(!0);Yi(i)}function Ly(i,s,a,c,y,_,A,I,U,Y,Z,se,J,X){if(i.timeoutHandle=-1,se=s.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:li},Ny(s,_,se);var ge=(_&62914560)===_?ec-yt():(_&4194048)===_?xy-yt():0;if(ge=XC(se,ge),ge!==null){go=_,i.cancelPendingCommit=ge(zy.bind(null,i,s,_,a,c,y,A,I,U,Z,se,null,J,X)),Xo(i,_,A,!Y);return}}zy(i,s,_,a,c,y,A,I,U)}function fC(i){for(var s=i;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var y=a[c],_=y.getSnapshot;y=y.value;try{if(!xn(_(),y))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Xo(i,s,a,c){s&=~Kd,s&=~Qs,i.suspendedLanes|=s,i.pingedLanes&=~s,c&&(i.warmLanes|=s),c=i.expirationTimes;for(var y=s;0<y;){var _=31-Ge(y),A=1<<_;c[_]=-1,y&=~A}a!==0&&As(i,a,s)}function ic(){return(it&6)===0?(dl(0),!1):!0}function Zd(){if(Fe!==null){if(rt===0)var i=Fe.return;else i=Fe,oo=qs=null,pd(i),xr=null,Qa=0,i=Fe;for(;i!==null;)hy(i.alternate,i),i=i.return;Fe=null}}function Fr(i,s){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,DC(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),go=0,Zd(),dt=i,Fe=a=no(i.current,null),ze=s,rt=0,Ln=null,Yo=!1,qr=si(i,s),Jd=!1,Br=On=Kd=Qs=Jo=Ct=0,Rn=cl=null,Qd=!1,(s&8)!==0&&(s|=s&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=s;0<c;){var y=31-Ge(c),_=1<<y;s|=i[y],c&=~_}return mo=s,Cu(),a}function Oy(i,s){Oe=null,$.H=nl,s===Dr||s===xu?(s=jm(),rt=3):s===nd?(s=jm(),rt=4):rt=s===Md?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Ln=s,Fe===null&&(Ct=1,Ju(i,Yn(s,i.current)))}function ky(){var i=Pn.current;return i===null?!0:(ze&4194048)===ze?Xn===null:(ze&62914560)===ze||(ze&536870912)!==0?i===Xn:!1}function qy(){var i=$.H;return $.H=nl,i===null?nl:i}function By(){var i=$.A;return $.A=uC,i}function oc(){Ct=4,Yo||(ze&4194048)!==ze&&Pn.current!==null||(qr=!0),(Jo&134217727)===0&&(Qs&134217727)===0||dt===null||Xo(dt,ze,On,!1)}function jd(i,s,a){var c=it;it|=2;var y=qy(),_=By();(dt!==i||ze!==s)&&(nc=null,Fr(i,s)),s=!1;var A=Ct;e:do try{if(rt!==0&&Fe!==null){var I=Fe,U=Ln;switch(rt){case 8:Zd(),A=6;break e;case 3:case 2:case 9:case 6:Pn.current===null&&(s=!0);var Y=rt;if(rt=0,Ln=null,Hr(i,I,U,Y),a&&qr){A=0;break e}break;default:Y=rt,rt=0,Ln=null,Hr(i,I,U,Y)}}dC(),A=Ct;break}catch(Z){Oy(i,Z)}while(!0);return s&&i.shellSuspendCounter++,oo=qs=null,it=c,$.H=y,$.A=_,Fe===null&&(dt=null,ze=0,Cu()),A}function dC(){for(;Fe!==null;)Gy(Fe)}function hC(i,s){var a=it;it|=2;var c=qy(),y=By();dt!==i||ze!==s?(nc=null,tc=yt()+500,Fr(i,s)):qr=si(i,s);e:do try{if(rt!==0&&Fe!==null){s=Fe;var _=Ln;t:switch(rt){case 1:rt=0,Ln=null,Hr(i,s,_,1);break;case 2:case 9:if(Wm(_)){rt=0,Ln=null,Fy(s);break}s=function(){rt!==2&&rt!==9||dt!==i||(rt=7),Yi(i)},_.then(s,s);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:Wm(_)?(rt=0,Ln=null,Fy(s)):(rt=0,Ln=null,Hr(i,s,_,7));break;case 5:var A=null;switch(Fe.tag){case 26:A=Fe.memoizedState;case 5:case 27:var I=Fe;if(A?w_(A):I.stateNode.complete){rt=0,Ln=null;var U=I.sibling;if(U!==null)Fe=U;else{var Y=I.return;Y!==null?(Fe=Y,sc(Y)):Fe=null}break t}}rt=0,Ln=null,Hr(i,s,_,5);break;case 6:rt=0,Ln=null,Hr(i,s,_,6);break;case 8:Zd(),Ct=6;break e;default:throw Error(o(462))}}pC();break}catch(Z){Oy(i,Z)}while(!0);return oo=qs=null,$.H=c,$.A=y,it=a,Fe!==null?0:(dt=null,ze=0,Cu(),Ct)}function pC(){for(;Fe!==null&&!Kt();)Gy(Fe)}function Gy(i){var s=fy(i.alternate,i,mo);i.memoizedProps=i.pendingProps,s===null?sc(i):Fe=s}function Fy(i){var s=i,a=s.alternate;switch(s.tag){case 15:case 0:s=sy(a,s,s.pendingProps,s.type,void 0,ze);break;case 11:s=sy(a,s,s.pendingProps,s.type.render,s.ref,ze);break;case 5:pd(s);default:hy(a,s),s=Fe=Bm(s,mo),s=fy(a,s,mo)}i.memoizedProps=i.pendingProps,s===null?sc(i):Fe=s}function Hr(i,s,a,c){oo=qs=null,pd(s),xr=null,Qa=0;var y=s.return;try{if(nC(i,y,s,a,ze)){Ct=1,Ju(i,Yn(a,i.current)),Fe=null;return}}catch(_){if(y!==null)throw Fe=y,_;Ct=1,Ju(i,Yn(a,i.current)),Fe=null;return}s.flags&32768?(Qe||c===1?i=!0:qr||(ze&536870912)!==0?i=!1:(Yo=i=!0,(c===2||c===9||c===3||c===6)&&(c=Pn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Hy(s,i)):sc(s)}function sc(i){var s=i;do{if((s.flags&32768)!==0){Hy(s,Yo);return}i=s.return;var a=sC(s.alternate,s,mo);if(a!==null){Fe=a;return}if(s=s.sibling,s!==null){Fe=s;return}Fe=s=i}while(s!==null);Ct===0&&(Ct=5)}function Hy(i,s){do{var a=rC(i.alternate,i);if(a!==null){a.flags&=32767,Fe=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(i=i.sibling,i!==null)){Fe=i;return}Fe=i=a}while(i!==null);Ct=6,Fe=null}function zy(i,s,a,c,y,_,A,I,U){i.cancelPendingCommit=null;do rc();while(zt!==0);if((it&6)!==0)throw Error(o(327));if(s!==null){if(s===i.current)throw Error(o(177));if(_=s.lanes|s.childLanes,_|=Gf,xf(i,a,_,A,I,U),i===dt&&(Fe=dt=null,ze=0),Gr=s,Qo=i,go=a,Xd=_,$d=y,Vy=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,_C(oi,function(){return Xy(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=$.T,$.T=null,y=le.p,le.p=2,A=it,it|=4;try{aC(i,s,a)}finally{it=A,le.p=y,$.T=c}}zt=1,Yy(),Jy(),Ky()}}function Yy(){if(zt===1){zt=0;var i=Qo,s=Gr,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=$.T,$.T=null;var c=le.p;le.p=2;var y=it;it|=4;try{Iy(s,i);var _=fh,A=Dm(i.containerInfo),I=_.focusedElem,U=_.selectionRange;if(A!==I&&I&&I.ownerDocument&&Mm(I.ownerDocument.documentElement,I)){if(U!==null&&Lf(I)){var Y=U.start,Z=U.end;if(Z===void 0&&(Z=Y),"selectionStart"in I)I.selectionStart=Y,I.selectionEnd=Math.min(Z,I.value.length);else{var se=I.ownerDocument||document,J=se&&se.defaultView||window;if(J.getSelection){var X=J.getSelection(),ge=I.textContent.length,Ae=Math.min(U.start,ge),ft=U.end===void 0?Ae:Math.min(U.end,ge);!X.extend&&Ae>ft&&(A=ft,ft=Ae,Ae=A);var G=bm(I,Ae),q=bm(I,ft);if(G&&q&&(X.rangeCount!==1||X.anchorNode!==G.node||X.anchorOffset!==G.offset||X.focusNode!==q.node||X.focusOffset!==q.offset)){var z=se.createRange();z.setStart(G.node,G.offset),X.removeAllRanges(),Ae>ft?(X.addRange(z),X.extend(q.node,q.offset)):(z.setEnd(q.node,q.offset),X.addRange(z))}}}}for(se=[],X=I;X=X.parentNode;)X.nodeType===1&&se.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<se.length;I++){var te=se[I];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}_c=!!ch,fh=ch=null}finally{it=y,le.p=c,$.T=a}}i.current=s,zt=2}}function Jy(){if(zt===2){zt=0;var i=Qo,s=Gr,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=$.T,$.T=null;var c=le.p;le.p=2;var y=it;it|=4;try{Ty(i,s.alternate,s)}finally{it=y,le.p=c,$.T=a}}zt=3}}function Ky(){if(zt===4||zt===3){zt=0,ni();var i=Qo,s=Gr,a=go,c=Vy;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?zt=5:(zt=0,Gr=Qo=null,Qy(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(Ko=null),Zi(a),s=s.stateNode,Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(Tn,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=$.T,y=le.p,le.p=2,$.T=null;try{for(var _=i.onRecoverableError,A=0;A<c.length;A++){var I=c[A];_(I.value,{componentStack:I.stack})}}finally{$.T=s,le.p=y}}(go&3)!==0&&rc(),Yi(i),y=i.pendingLanes,(a&261930)!==0&&(y&42)!==0?i===Wd?fl++:(fl=0,Wd=i):fl=0,dl(0)}}function Qy(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Ja(s)))}function rc(){return Yy(),Jy(),Ky(),Xy()}function Xy(){if(zt!==5)return!1;var i=Qo,s=Xd;Xd=0;var a=Zi(go),c=$.T,y=le.p;try{le.p=32>a?32:a,$.T=null,a=$d,$d=null;var _=Qo,A=go;if(zt=0,Gr=Qo=null,go=0,(it&6)!==0)throw Error(o(331));var I=it;if(it|=4,My(_.current),wy(_,_.current,A,a),it=I,dl(0,!1),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(Tn,_)}catch{}return!0}finally{le.p=y,$.T=c,Qy(i,s)}}function $y(i,s,a){s=Yn(a,s),s=bd(i.stateNode,s,2),i=Go(i,s,2),i!==null&&(Ss(i,2),Yi(i))}function at(i,s,a){if(i.tag===3)$y(i,i,a);else for(;s!==null;){if(s.tag===3){$y(s,i,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ko===null||!Ko.has(c))){i=Yn(a,i),a=Wg(2),c=Go(s,a,2),c!==null&&(Zg(a,c,s,i),Ss(c,2),Yi(c));break}}s=s.return}}function eh(i,s,a){var c=i.pingCache;if(c===null){c=i.pingCache=new cC;var y=new Set;c.set(s,y)}else y=c.get(s),y===void 0&&(y=new Set,c.set(s,y));y.has(a)||(Jd=!0,y.add(a),i=mC.bind(null,i,s,a),s.then(i,i))}function mC(i,s,a){var c=i.pingCache;c!==null&&c.delete(s),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,dt===i&&(ze&a)===a&&(Ct===4||Ct===3&&(ze&62914560)===ze&&300>yt()-ec?(it&2)===0&&Fr(i,0):Kd|=a,Br===ze&&(Br=0)),Yi(i)}function Wy(i,s){s===0&&(s=nu()),i=Ls(i,s),i!==null&&(Ss(i,s),Yi(i))}function gC(i){var s=i.memoizedState,a=0;s!==null&&(a=s.retryLane),Wy(i,a)}function yC(i,s){var a=0;switch(i.tag){case 31:case 13:var c=i.stateNode,y=i.memoizedState;y!==null&&(a=y.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(o(314))}c!==null&&c.delete(s),Wy(i,a)}function _C(i,s){return qe(i,s)}var ac=null,zr=null,th=!1,lc=!1,nh=!1,$o=0;function Yi(i){i!==zr&&i.next===null&&(zr===null?ac=zr=i:zr=zr.next=i),lc=!0,th||(th=!0,TC())}function dl(i,s){if(!nh&&lc){nh=!0;do for(var a=!1,c=ac;c!==null;){if(i!==0){var y=c.pendingLanes;if(y===0)var _=0;else{var A=c.suspendedLanes,I=c.pingedLanes;_=(1<<31-Ge(42|i)+1)-1,_&=y&~(A&~I),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(a=!0,t_(c,_))}else _=ze,_=wi(c,c===dt?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(_&3)===0||si(c,_)||(a=!0,t_(c,_));c=c.next}while(a);nh=!1}}function vC(){Zy()}function Zy(){lc=th=!1;var i=0;$o!==0&&MC()&&(i=$o);for(var s=yt(),a=null,c=ac;c!==null;){var y=c.next,_=jy(c,s);_===0?(c.next=null,a===null?ac=y:a.next=y,y===null&&(zr=a)):(a=c,(i!==0||(_&3)!==0)&&(lc=!0)),c=y}zt!==0&&zt!==5||dl(i),$o!==0&&($o=0)}function jy(i,s){for(var a=i.suspendedLanes,c=i.pingedLanes,y=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var A=31-Ge(_),I=1<<A,U=y[A];U===-1?((I&a)===0||(I&c)!==0)&&(y[A]=Df(I,s)):U<=s&&(i.expiredLanes|=I),_&=~I}if(s=dt,a=ze,a=wi(i,i===s?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,a===0||i===s&&(rt===2||rt===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&Mt(c),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||si(i,a)){if(s=a&-a,s===i.callbackPriority)return s;switch(c!==null&&Mt(c),Zi(a)){case 2:case 8:a=Io;break;case 32:a=oi;break;case 268435456:a=_s;break;default:a=oi}return c=e_.bind(null,i),a=qe(a,c),i.callbackPriority=s,i.callbackNode=a,s}return c!==null&&c!==null&&Mt(c),i.callbackPriority=2,i.callbackNode=null,2}function e_(i,s){if(zt!==0&&zt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(rc()&&i.callbackNode!==a)return null;var c=ze;return c=wi(i,i===dt?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(Uy(i,c,s),jy(i,yt()),i.callbackNode!=null&&i.callbackNode===a?e_.bind(null,i):null)}function t_(i,s){if(rc())return null;Uy(i,s,!0)}function TC(){xC(function(){(it&6)!==0?qe(jt,vC):Zy()})}function ih(){if($o===0){var i=br;i===0&&(i=Ii,Ii<<=1,(Ii&261888)===0&&(Ii=256)),$o=i}return $o}function n_(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:pr(""+i)}function i_(i,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,i.id&&a.setAttribute("form",i.id),s.parentNode.insertBefore(a,s),i=new FormData(i),a.parentNode.removeChild(a),i}function EC(i,s,a,c,y){if(s==="submit"&&a&&a.stateNode===y){var _=n_((y[Qt]||null).action),A=c.submitter;A&&(s=(s=A[Qt]||null)?n_(s.formAction):A.getAttribute("formAction"),s!==null&&(_=s,A=null));var I=new ki("action","action",null,c,y);i.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if($o!==0){var U=A?i_(y,A):new FormData(y);Ad(a,{pending:!0,data:U,method:y.method,action:_},null,U)}}else typeof _=="function"&&(I.preventDefault(),U=A?i_(y,A):new FormData(y),Ad(a,{pending:!0,data:U,method:y.method,action:_},_,U))},currentTarget:y}]})}}for(var oh=0;oh<Bf.length;oh++){var sh=Bf[oh],SC=sh.toLowerCase(),AC=sh[0].toUpperCase()+sh.slice(1);hi(SC,"on"+AC)}hi(Pm,"onAnimationEnd"),hi(Um,"onAnimationIteration"),hi(Lm,"onAnimationStart"),hi("dblclick","onDoubleClick"),hi("focusin","onFocus"),hi("focusout","onBlur"),hi(qA,"onTransitionRun"),hi(BA,"onTransitionStart"),hi(GA,"onTransitionCancel"),hi(Om,"onTransitionEnd"),Pi("onMouseEnter",["mouseout","mouseover"]),Pi("onMouseLeave",["mouseout","mouseover"]),Pi("onPointerEnter",["pointerout","pointerover"]),Pi("onPointerLeave",["pointerout","pointerover"]),Vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hl));function o_(i,s){s=(s&4)!==0;for(var a=0;a<i.length;a++){var c=i[a],y=c.event;c=c.listeners;e:{var _=void 0;if(s)for(var A=c.length-1;0<=A;A--){var I=c[A],U=I.instance,Y=I.currentTarget;if(I=I.listener,U!==_&&y.isPropagationStopped())break e;_=I,y.currentTarget=Y;try{_(y)}catch(Z){Au(Z)}y.currentTarget=null,_=U}else for(A=0;A<c.length;A++){if(I=c[A],U=I.instance,Y=I.currentTarget,I=I.listener,U!==_&&y.isPropagationStopped())break e;_=I,y.currentTarget=Y;try{_(y)}catch(Z){Au(Z)}y.currentTarget=null,_=U}}}}function He(i,s){var a=s[ur];a===void 0&&(a=s[ur]=new Set);var c=i+"__bubble";a.has(c)||(s_(s,i,2,!1),a.add(c))}function rh(i,s,a){var c=0;s&&(c|=4),s_(a,i,c,s)}var uc="_reactListening"+Math.random().toString(36).slice(2);function ah(i){if(!i[uc]){i[uc]=!0,Ia.forEach(function(a){a!=="selectionchange"&&(CC.has(a)||rh(a,!1,i),rh(a,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[uc]||(s[uc]=!0,rh("selectionchange",!1,s))}}function s_(i,s,a,c){switch(P_(s)){case 2:var y=ZC;break;case 8:y=jC;break;default:y=Sh}a=y.bind(null,s,a,i),y=void 0,!Ns||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),c?y!==void 0?i.addEventListener(s,a,{capture:!0,passive:y}):i.addEventListener(s,a,!0):y!==void 0?i.addEventListener(s,a,{passive:y}):i.addEventListener(s,a,!1)}function lh(i,s,a,c,y){var _=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var I=c.stateNode.containerInfo;if(I===y)break;if(A===4)for(A=c.return;A!==null;){var U=A.tag;if((U===3||U===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;I!==null;){if(A=Di(I),A===null)return;if(U=A.tag,U===5||U===6||U===26||U===27){c=_=A;continue e}I=I.parentNode}}c=c.return}Do(function(){var Y=_,Z=Gn(a),se=[];e:{var J=km.get(i);if(J!==void 0){var X=ki,ge=i;switch(i){case"keypress":if(Ms(a)===0)break e;case"keydown":case"keyup":X=Tu;break;case"focusin":ge="focus",X=xs;break;case"focusout":ge="blur",X=xs;break;case"beforeblur":case"afterblur":X=xs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=ka;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=fu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=E;break;case Pm:case Um:case Lm:X=hu;break;case Om:X=w;break;case"scroll":case"scrollend":X=Oa;break;case"wheel":X=Q;break;case"copy":case"cut":case"paste":X=pu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=to;break;case"toggle":case"beforetoggle":X=Le}var Ae=(s&4)!==0,ft=!Ae&&(i==="scroll"||i==="scrollend"),G=Ae?J!==null?J+"Capture":null:J;Ae=[];for(var q=Y,z;q!==null;){var te=q;if(z=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||z===null||G===null||(te=ui(q,G),te!=null&&Ae.push(pl(q,te,z))),ft)break;q=q.return}0<Ae.length&&(J=new X(J,ge,null,a,Z),se.push({event:J,listeners:Ae}))}}if((s&7)===0){e:{if(J=i==="mouseover"||i==="pointerover",X=i==="mouseout"||i==="pointerout",J&&a!==Pa&&(ge=a.relatedTarget||a.fromElement)&&(Di(ge)||ge[bi]))break e;if((X||J)&&(J=Z.window===Z?Z:(J=Z.ownerDocument)?J.defaultView||J.parentWindow:window,X?(ge=a.relatedTarget||a.toElement,X=Y,ge=ge?Di(ge):null,ge!==null&&(ft=l(ge),Ae=ge.tag,ge!==ft||Ae!==5&&Ae!==27&&Ae!==6)&&(ge=null)):(X=null,ge=Y),X!==ge)){if(Ae=ka,te="onMouseLeave",G="onMouseEnter",q="mouse",(i==="pointerout"||i==="pointerover")&&(Ae=to,te="onPointerLeave",G="onPointerEnter",q="pointer"),ft=X==null?J:Mn(X),z=ge==null?J:Mn(ge),J=new Ae(te,q+"leave",X,a,Z),J.target=ft,J.relatedTarget=z,te=null,Di(Z)===Y&&(Ae=new Ae(G,q+"enter",ge,a,Z),Ae.target=z,Ae.relatedTarget=ft,te=Ae),ft=te,X&&ge)t:{for(Ae=IC,G=X,q=ge,z=0,te=G;te;te=Ae(te))z++;te=0;for(var ve=q;ve;ve=Ae(ve))te++;for(;0<z-te;)G=Ae(G),z--;for(;0<te-z;)q=Ae(q),te--;for(;z--;){if(G===q||q!==null&&G===q.alternate){Ae=G;break t}G=Ae(G),q=Ae(q)}Ae=null}else Ae=null;X!==null&&r_(se,J,X,Ae,!1),ge!==null&&ft!==null&&r_(se,ft,ge,Ae,!0)}}e:{if(J=Y?Mn(Y):window,X=J.nodeName&&J.nodeName.toLowerCase(),X==="select"||X==="input"&&J.type==="file")var je=Am;else if(Em(J))if(Cm)je=LA;else{je=PA;var _e=VA}else X=J.nodeName,!X||X.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?Y&&hr(Y.elementType)&&(je=Am):je=UA;if(je&&(je=je(i,Y))){Sm(se,je,a,Z);break e}_e&&_e(i,J,Y),i==="focusout"&&Y&&J.type==="number"&&Y.memoizedProps.value!=null&&Da(J,"number",J.value)}switch(_e=Y?Mn(Y):window,i){case"focusin":(Em(_e)||_e.contentEditable==="true")&&(Er=_e,Of=Y,Ha=null);break;case"focusout":Ha=Of=Er=null;break;case"mousedown":kf=!0;break;case"contextmenu":case"mouseup":case"dragend":kf=!1,xm(se,a,Z);break;case"selectionchange":if(kA)break;case"keydown":case"keyup":xm(se,a,Z)}var ke;if(nt)e:{switch(i){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else Tr?Vs(i,a)&&(Ye="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Ye="onCompositionStart");Ye&&(Gi&&a.locale!=="ko"&&(Tr||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&Tr&&(ke=La()):(Oi=Z,Ua="value"in Oi?Oi.value:Oi.textContent,Tr=!0)),_e=cc(Y,Ye),0<_e.length&&(Ye=new Bi(Ye,i,null,a,Z),se.push({event:Ye,listeners:_e}),ke?Ye.data=ke:(ke=vr(a),ke!==null&&(Ye.data=ke)))),(ke=Hn?bA(i,a):MA(i,a))&&(Ye=cc(Y,"onBeforeInput"),0<Ye.length&&(_e=new Bi("onBeforeInput","beforeinput",null,a,Z),se.push({event:_e,listeners:Ye}),_e.data=ke)),EC(se,i,Y,a,Z)}o_(se,s)})}function pl(i,s,a){return{instance:i,listener:s,currentTarget:a}}function cc(i,s){for(var a=s+"Capture",c=[];i!==null;){var y=i,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=ui(i,a),y!=null&&c.unshift(pl(i,y,_)),y=ui(i,s),y!=null&&c.push(pl(i,y,_))),i.tag===3)return c;i=i.return}return[]}function IC(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function r_(i,s,a,c,y){for(var _=s._reactName,A=[];a!==null&&a!==c;){var I=a,U=I.alternate,Y=I.stateNode;if(I=I.tag,U!==null&&U===c)break;I!==5&&I!==26&&I!==27||Y===null||(U=Y,y?(Y=ui(a,_),Y!=null&&A.unshift(pl(a,Y,U))):y||(Y=ui(a,_),Y!=null&&A.push(pl(a,Y,U)))),a=a.return}A.length!==0&&i.push({event:s,listeners:A})}var RC=/\r\n?/g,wC=/\u0000|\uFFFD/g;function a_(i){return(typeof i=="string"?i:""+i).replace(RC,`
`).replace(wC,"")}function l_(i,s){return s=a_(s),a_(i)===s}function ct(i,s,a,c,y,_){switch(a){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||Sn(i,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&Sn(i,""+c);break;case"className":Dn(i,"class",c);break;case"tabIndex":Dn(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Dn(i,a,c);break;case"style":Va(i,c,_);break;case"data":if(s!=="object"){Dn(i,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||a!=="href")){i.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=pr(""+c),i.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(a==="formAction"?(s!=="input"&&ct(i,s,"name",y.name,y,null),ct(i,s,"formEncType",y.formEncType,y,null),ct(i,s,"formMethod",y.formMethod,y,null),ct(i,s,"formTarget",y.formTarget,y,null)):(ct(i,s,"encType",y.encType,y,null),ct(i,s,"method",y.method,y,null),ct(i,s,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=pr(""+c),i.setAttribute(a,c);break;case"onClick":c!=null&&(i.onclick=li);break;case"onScroll":c!=null&&He("scroll",i);break;case"onScrollEnd":c!=null&&He("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(o(60));i.innerHTML=a}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}a=pr(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""+c):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":c===!0?i.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,c):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(a,c):i.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(a):i.setAttribute(a,c);break;case"popover":He("beforetoggle",i),He("toggle",i),fr(i,"popover",c);break;case"xlinkActuate":Ut(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Ut(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Ut(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Ut(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Ut(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Ut(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Ut(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Ut(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Ut(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":fr(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=cu.get(a)||a,fr(i,a,c))}}function uh(i,s,a,c,y,_){switch(a){case"style":Va(i,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(o(60));i.innerHTML=a}}break;case"children":typeof c=="string"?Sn(i,c):(typeof c=="number"||typeof c=="bigint")&&Sn(i,""+c);break;case"onScroll":c!=null&&He("scroll",i);break;case"onScrollEnd":c!=null&&He("scrollend",i);break;case"onClick":c!=null&&(i.onclick=li);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ra.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),s=a.slice(2,y?a.length-7:void 0),_=i[Qt]||null,_=_!=null?_[a]:null,typeof _=="function"&&i.removeEventListener(s,_,y),typeof c=="function")){typeof _!="function"&&_!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(s,c,y);break e}a in i?i[a]=c:c===!0?i.setAttribute(a,""):fr(i,a,c)}}}function sn(i,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",i),He("load",i);var c=!1,y=!1,_;for(_ in a)if(a.hasOwnProperty(_)){var A=a[_];if(A!=null)switch(_){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:ct(i,s,_,A,a,null)}}y&&ct(i,s,"srcSet",a.srcSet,a,null),c&&ct(i,s,"src",a.src,a,null);return;case"input":He("invalid",i);var I=_=A=y=null,U=null,Y=null;for(c in a)if(a.hasOwnProperty(c)){var Z=a[c];if(Z!=null)switch(c){case"name":y=Z;break;case"type":A=Z;break;case"checked":U=Z;break;case"defaultChecked":Y=Z;break;case"value":_=Z;break;case"defaultValue":I=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(o(137,s));break;default:ct(i,s,c,Z,a,null)}}au(i,_,I,U,Y,A,y,!1);return;case"select":He("invalid",i),c=A=_=null;for(y in a)if(a.hasOwnProperty(y)&&(I=a[y],I!=null))switch(y){case"value":_=I;break;case"defaultValue":A=I;break;case"multiple":c=I;default:ct(i,s,y,I,a,null)}s=_,a=A,i.multiple=!!c,s!=null?wo(i,!!c,s,!1):a!=null&&wo(i,!!c,a,!0);return;case"textarea":He("invalid",i),_=y=c=null;for(A in a)if(a.hasOwnProperty(A)&&(I=a[A],I!=null))switch(A){case"value":c=I;break;case"defaultValue":y=I;break;case"children":_=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(o(91));break;default:ct(i,s,A,I,a,null)}No(i,c,y,_);return;case"option":for(U in a)if(a.hasOwnProperty(U)&&(c=a[U],c!=null))switch(U){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ct(i,s,U,c,a,null)}return;case"dialog":He("beforetoggle",i),He("toggle",i),He("cancel",i),He("close",i);break;case"iframe":case"object":He("load",i);break;case"video":case"audio":for(c=0;c<hl.length;c++)He(hl[c],i);break;case"image":He("error",i),He("load",i);break;case"details":He("toggle",i);break;case"embed":case"source":case"link":He("error",i),He("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in a)if(a.hasOwnProperty(Y)&&(c=a[Y],c!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:ct(i,s,Y,c,a,null)}return;default:if(hr(s)){for(Z in a)a.hasOwnProperty(Z)&&(c=a[Z],c!==void 0&&uh(i,s,Z,c,a,void 0));return}}for(I in a)a.hasOwnProperty(I)&&(c=a[I],c!=null&&ct(i,s,I,c,a,null))}function NC(i,s,a,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,A=null,I=null,U=null,Y=null,Z=null;for(X in a){var se=a[X];if(a.hasOwnProperty(X)&&se!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":U=se;default:c.hasOwnProperty(X)||ct(i,s,X,null,c,se)}}for(var J in c){var X=c[J];if(se=a[J],c.hasOwnProperty(J)&&(X!=null||se!=null))switch(J){case"type":_=X;break;case"name":y=X;break;case"checked":Y=X;break;case"defaultChecked":Z=X;break;case"value":A=X;break;case"defaultValue":I=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(o(137,s));break;default:X!==se&&ct(i,s,J,X,c,se)}}dr(i,A,I,U,Y,Z,_,y);return;case"select":X=A=I=J=null;for(_ in a)if(U=a[_],a.hasOwnProperty(_)&&U!=null)switch(_){case"value":break;case"multiple":X=U;default:c.hasOwnProperty(_)||ct(i,s,_,null,c,U)}for(y in c)if(_=c[y],U=a[y],c.hasOwnProperty(y)&&(_!=null||U!=null))switch(y){case"value":J=_;break;case"defaultValue":I=_;break;case"multiple":A=_;default:_!==U&&ct(i,s,y,_,c,U)}s=I,a=A,c=X,J!=null?wo(i,!!a,J,!1):!!c!=!!a&&(s!=null?wo(i,!!a,s,!0):wo(i,!!a,a?[]:"",!1));return;case"textarea":X=J=null;for(I in a)if(y=a[I],a.hasOwnProperty(I)&&y!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:ct(i,s,I,null,c,y)}for(A in c)if(y=c[A],_=a[A],c.hasOwnProperty(A)&&(y!=null||_!=null))switch(A){case"value":J=y;break;case"defaultValue":X=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(o(91));break;default:y!==_&&ct(i,s,A,y,c,_)}lu(i,J,X);return;case"option":for(var ge in a)if(J=a[ge],a.hasOwnProperty(ge)&&J!=null&&!c.hasOwnProperty(ge))switch(ge){case"selected":i.selected=!1;break;default:ct(i,s,ge,null,c,J)}for(U in c)if(J=c[U],X=a[U],c.hasOwnProperty(U)&&J!==X&&(J!=null||X!=null))switch(U){case"selected":i.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:ct(i,s,U,J,c,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in a)J=a[Ae],a.hasOwnProperty(Ae)&&J!=null&&!c.hasOwnProperty(Ae)&&ct(i,s,Ae,null,c,J);for(Y in c)if(J=c[Y],X=a[Y],c.hasOwnProperty(Y)&&J!==X&&(J!=null||X!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(o(137,s));break;default:ct(i,s,Y,J,c,X)}return;default:if(hr(s)){for(var ft in a)J=a[ft],a.hasOwnProperty(ft)&&J!==void 0&&!c.hasOwnProperty(ft)&&uh(i,s,ft,void 0,c,J);for(Z in c)J=c[Z],X=a[Z],!c.hasOwnProperty(Z)||J===X||J===void 0&&X===void 0||uh(i,s,Z,J,c,X);return}}for(var G in a)J=a[G],a.hasOwnProperty(G)&&J!=null&&!c.hasOwnProperty(G)&&ct(i,s,G,null,c,J);for(se in c)J=c[se],X=a[se],!c.hasOwnProperty(se)||J===X||J==null&&X==null||ct(i,s,se,J,c,X)}function u_(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function bC(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var y=a[c],_=y.transferSize,A=y.initiatorType,I=y.duration;if(_&&I&&u_(A)){for(A=0,I=y.responseEnd,c+=1;c<a.length;c++){var U=a[c],Y=U.startTime;if(Y>I)break;var Z=U.transferSize,se=U.initiatorType;Z&&u_(se)&&(U=U.responseEnd,A+=Z*(U<I?1:(I-Y)/(U-Y)))}if(--c,s+=8*(_+A)/(y.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var ch=null,fh=null;function fc(i){return i.nodeType===9?i:i.ownerDocument}function c_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function f_(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function dh(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var hh=null;function MC(){var i=window.event;return i&&i.type==="popstate"?i===hh?!1:(hh=i,!0):(hh=null,!1)}var d_=typeof setTimeout=="function"?setTimeout:void 0,DC=typeof clearTimeout=="function"?clearTimeout:void 0,h_=typeof Promise=="function"?Promise:void 0,xC=typeof queueMicrotask=="function"?queueMicrotask:typeof h_<"u"?function(i){return h_.resolve(null).then(i).catch(VC)}:d_;function VC(i){setTimeout(function(){throw i})}function Wo(i){return i==="head"}function p_(i,s){var a=s,c=0;do{var y=a.nextSibling;if(i.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(c===0){i.removeChild(y),Qr(s);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")ml(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,ml(a);for(var _=a.firstChild;_;){var A=_.nextSibling,I=_.nodeName;_[Mi]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=A}}else a==="body"&&ml(i.ownerDocument.body);a=y}while(a);Qr(s)}function m_(i,s){var a=i;i=0;do{var c=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=c}while(a)}function ph(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":ph(a),cr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function PC(i,s,a,c){for(;i.nodeType===1;){var y=a;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[Mi])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=$n(i.nextSibling),i===null)break}return null}function UC(i,s,a){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=$n(i.nextSibling),i===null))return null;return i}function g_(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=$n(i.nextSibling),i===null))return null;return i}function mh(i){return i.data==="$?"||i.data==="$~"}function gh(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function LC(i,s){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||a.readyState!=="loading")s();else{var c=function(){s(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function $n(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var yh=null;function y_(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(s===0)return $n(i.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}i=i.nextSibling}return null}function __(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return i;s--}else a!=="/$"&&a!=="/&"||s++}i=i.previousSibling}return null}function v_(i,s,a){switch(s=fc(a),i){case"html":if(i=s.documentElement,!i)throw Error(o(452));return i;case"head":if(i=s.head,!i)throw Error(o(453));return i;case"body":if(i=s.body,!i)throw Error(o(454));return i;default:throw Error(o(451))}}function ml(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);cr(i)}var Wn=new Map,T_=new Set;function dc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var yo=le.d;le.d={f:OC,r:kC,D:qC,C:BC,L:GC,m:FC,X:zC,S:HC,M:YC};function OC(){var i=yo.f(),s=ic();return i||s}function kC(i){var s=Bn(i);s!==null&&s.tag===5&&s.type==="form"?Og(s):yo.r(i)}var Yr=typeof document>"u"?null:document;function E_(i,s,a){var c=Yr;if(c&&typeof s=="string"&&s){var y=En(s);y='link[rel="'+i+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),T_.has(y)||(T_.add(y),i={rel:i,crossOrigin:a,href:s},c.querySelector(y)===null&&(s=c.createElement("link"),sn(s,"link",i),Pt(s),c.head.appendChild(s)))}}function qC(i){yo.D(i),E_("dns-prefetch",i,null)}function BC(i,s){yo.C(i,s),E_("preconnect",i,s)}function GC(i,s,a){yo.L(i,s,a);var c=Yr;if(c&&i&&s){var y='link[rel="preload"][as="'+En(s)+'"]';s==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+En(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+En(a.imageSizes)+'"]')):y+='[href="'+En(i)+'"]';var _=y;switch(s){case"style":_=Jr(i);break;case"script":_=Kr(i)}Wn.has(_)||(i=T({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:i,as:s},a),Wn.set(_,i),c.querySelector(y)!==null||s==="style"&&c.querySelector(gl(_))||s==="script"&&c.querySelector(yl(_))||(s=c.createElement("link"),sn(s,"link",i),Pt(s),c.head.appendChild(s)))}}function FC(i,s){yo.m(i,s);var a=Yr;if(a&&i){var c=s&&typeof s.as=="string"?s.as:"script",y='link[rel="modulepreload"][as="'+En(c)+'"][href="'+En(i)+'"]',_=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Kr(i)}if(!Wn.has(_)&&(i=T({rel:"modulepreload",href:i},s),Wn.set(_,i),a.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(yl(_)))return}c=a.createElement("link"),sn(c,"link",i),Pt(c),a.head.appendChild(c)}}}function HC(i,s,a){yo.S(i,s,a);var c=Yr;if(c&&i){var y=xi(c).hoistableStyles,_=Jr(i);s=s||"default";var A=y.get(_);if(!A){var I={loading:0,preload:null};if(A=c.querySelector(gl(_)))I.loading=5;else{i=T({rel:"stylesheet",href:i,"data-precedence":s},a),(a=Wn.get(_))&&_h(i,a);var U=A=c.createElement("link");Pt(U),sn(U,"link",i),U._p=new Promise(function(Y,Z){U.onload=Y,U.onerror=Z}),U.addEventListener("load",function(){I.loading|=1}),U.addEventListener("error",function(){I.loading|=2}),I.loading|=4,hc(A,s,c)}A={type:"stylesheet",instance:A,count:1,state:I},y.set(_,A)}}}function zC(i,s){yo.X(i,s);var a=Yr;if(a&&i){var c=xi(a).hoistableScripts,y=Kr(i),_=c.get(y);_||(_=a.querySelector(yl(y)),_||(i=T({src:i,async:!0},s),(s=Wn.get(y))&&vh(i,s),_=a.createElement("script"),Pt(_),sn(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function YC(i,s){yo.M(i,s);var a=Yr;if(a&&i){var c=xi(a).hoistableScripts,y=Kr(i),_=c.get(y);_||(_=a.querySelector(yl(y)),_||(i=T({src:i,async:!0,type:"module"},s),(s=Wn.get(y))&&vh(i,s),_=a.createElement("script"),Pt(_),sn(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function S_(i,s,a,c){var y=(y=Me.current)?dc(y):null;if(!y)throw Error(o(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Jr(a.href),a=xi(y).hoistableStyles,c=a.get(s),c||(c={type:"style",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=Jr(a.href);var _=xi(y).hoistableStyles,A=_.get(i);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,A),(_=y.querySelector(gl(i)))&&!_._p&&(A.instance=_,A.state.loading=5),Wn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Wn.set(i,a),_||JC(y,i,a,A.state))),s&&c===null)throw Error(o(528,""));return A}if(s&&c!==null)throw Error(o(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Kr(a),a=xi(y).hoistableScripts,c=a.get(s),c||(c={type:"script",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,i))}}function Jr(i){return'href="'+En(i)+'"'}function gl(i){return'link[rel="stylesheet"]['+i+"]"}function A_(i){return T({},i,{"data-precedence":i.precedence,precedence:null})}function JC(i,s,a,c){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=i.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),sn(s,"link",a),Pt(s),i.head.appendChild(s))}function Kr(i){return'[src="'+En(i)+'"]'}function yl(i){return"script[async]"+i}function C_(i,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var c=i.querySelector('style[data-href~="'+En(a.href)+'"]');if(c)return s.instance=c,Pt(c),c;var y=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),Pt(c),sn(c,"style",y),hc(c,a.precedence,i),s.instance=c;case"stylesheet":y=Jr(a.href);var _=i.querySelector(gl(y));if(_)return s.state.loading|=4,s.instance=_,Pt(_),_;c=A_(a),(y=Wn.get(y))&&_h(c,y),_=(i.ownerDocument||i).createElement("link"),Pt(_);var A=_;return A._p=new Promise(function(I,U){A.onload=I,A.onerror=U}),sn(_,"link",c),s.state.loading|=4,hc(_,a.precedence,i),s.instance=_;case"script":return _=Kr(a.src),(y=i.querySelector(yl(_)))?(s.instance=y,Pt(y),y):(c=a,(y=Wn.get(_))&&(c=T({},a),vh(c,y)),i=i.ownerDocument||i,y=i.createElement("script"),Pt(y),sn(y,"link",c),i.head.appendChild(y),s.instance=y);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,hc(c,a.precedence,i));return s.instance}function hc(i,s,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,_=y,A=0;A<c.length;A++){var I=c[A];if(I.dataset.precedence===s)_=I;else if(_!==y)break}_?_.parentNode.insertBefore(i,_.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(i,s.firstChild))}function _h(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function vh(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var pc=null;function I_(i,s,a){if(pc===null){var c=new Map,y=pc=new Map;y.set(a,c)}else y=pc,c=y.get(a),c||(c=new Map,y.set(a,c));if(c.has(i))return c;for(c.set(i,null),a=a.getElementsByTagName(i),y=0;y<a.length;y++){var _=a[y];if(!(_[Mi]||_[Vt]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(s)||"";A=i+A;var I=c.get(A);I?I.push(_):c.set(A,[_])}}return c}function R_(i,s,a){i=i.ownerDocument||i,i.head.insertBefore(a,s==="title"?i.querySelector("head > title"):null)}function KC(i,s,a){if(a===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function w_(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function QC(i,s,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=Jr(c.href),_=s.querySelector(gl(y));if(_){s=_._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=mc.bind(i),s.then(i,i)),a.state.loading|=4,a.instance=_,Pt(_);return}_=s.ownerDocument||s,c=A_(c),(y=Wn.get(y))&&_h(c,y),_=_.createElement("link"),Pt(_);var A=_;A._p=new Promise(function(I,U){A.onload=I,A.onerror=U}),sn(_,"link",c),a.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=mc.bind(i),s.addEventListener("load",a),s.addEventListener("error",a))}}var Th=0;function XC(i,s){return i.stylesheets&&i.count===0&&yc(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var c=setTimeout(function(){if(i.stylesheets&&yc(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+s);0<i.imgBytes&&Th===0&&(Th=62500*bC());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&yc(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>Th?50:800)+s);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function mc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)yc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var gc=null;function yc(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,gc=new Map,s.forEach($C,i),gc=null,mc.call(i))}function $C(i,s){if(!(s.state.loading&4)){var a=gc.get(i);if(a)var c=a.get(null);else{a=new Map,gc.set(i,a);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var A=y[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),c=A)}c&&a.set(null,c)}y=s.instance,A=y.getAttribute("data-precedence"),_=a.get(A)||c,_===c&&a.set(null,y),a.set(A,y),this.count++,c=mc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),_?_.parentNode.insertBefore(y,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),s.state.loading|=4}}var _l={$$typeof:j,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function WC(i,s,a,c,y,_,A,I,U){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ni(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ni(0),this.hiddenUpdates=Ni(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function N_(i,s,a,c,y,_,A,I,U,Y,Z,se){return i=new WC(i,s,a,A,U,Y,Z,se,I),s=1,_===!0&&(s|=24),_=Vn(3,null,null,s),i.current=_,_.stateNode=i,s=jf(),s.refCount++,i.pooledCache=s,s.refCount++,_.memoizedState={element:c,isDehydrated:a,cache:s},id(_),i}function b_(i){return i?(i=Cr,i):Cr}function M_(i,s,a,c,y,_){y=b_(y),c.context===null?c.context=y:c.pendingContext=y,c=Bo(s),c.payload={element:a},_=_===void 0?null:_,_!==null&&(c.callback=_),a=Go(i,c,s),a!==null&&(wn(a,i,s),$a(a,i,s))}function D_(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<s?a:s}}function Eh(i,s){D_(i,s),(i=i.alternate)&&D_(i,s)}function x_(i){if(i.tag===13||i.tag===31){var s=Ls(i,67108864);s!==null&&wn(s,i,67108864),Eh(i,67108864)}}function V_(i){if(i.tag===13||i.tag===31){var s=kn();s=Cs(s);var a=Ls(i,s);a!==null&&wn(a,i,s),Eh(i,s)}}var _c=!0;function ZC(i,s,a,c){var y=$.T;$.T=null;var _=le.p;try{le.p=2,Sh(i,s,a,c)}finally{le.p=_,$.T=y}}function jC(i,s,a,c){var y=$.T;$.T=null;var _=le.p;try{le.p=8,Sh(i,s,a,c)}finally{le.p=_,$.T=y}}function Sh(i,s,a,c){if(_c){var y=Ah(c);if(y===null)lh(i,s,c,vc,a),U_(i,c);else if(tI(y,i,s,a,c))c.stopPropagation();else if(U_(i,c),s&4&&-1<eI.indexOf(i)){for(;y!==null;){var _=Bn(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=Ri(_.pendingLanes);if(A!==0){var I=_;for(I.pendingLanes|=2,I.entangledLanes|=2;A;){var U=1<<31-Ge(A);I.entanglements[1]|=U,A&=~U}Yi(_),(it&6)===0&&(tc=yt()+500,dl(0))}}break;case 31:case 13:I=Ls(_,2),I!==null&&wn(I,_,2),ic(),Eh(_,2)}if(_=Ah(c),_===null&&lh(i,s,c,vc,a),_===y)break;y=_}y!==null&&c.stopPropagation()}else lh(i,s,c,null,a)}}function Ah(i){return i=Gn(i),Ch(i)}var vc=null;function Ch(i){if(vc=null,i=Di(i),i!==null){var s=l(i);if(s===null)i=null;else{var a=s.tag;if(a===13){if(i=u(s),i!==null)return i;i=null}else if(a===31){if(i=d(s),i!==null)return i;i=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return vc=i,null}function P_(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ii()){case jt:return 2;case Io:return 8;case oi:case lr:return 32;case _s:return 268435456;default:return 32}default:return 32}}var Ih=!1,Zo=null,jo=null,es=null,vl=new Map,Tl=new Map,ts=[],eI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function U_(i,s){switch(i){case"focusin":case"focusout":Zo=null;break;case"dragenter":case"dragleave":jo=null;break;case"mouseover":case"mouseout":es=null;break;case"pointerover":case"pointerout":vl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tl.delete(s.pointerId)}}function El(i,s,a,c,y,_){return i===null||i.nativeEvent!==_?(i={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:_,targetContainers:[y]},s!==null&&(s=Bn(s),s!==null&&x_(s)),i):(i.eventSystemFlags|=c,s=i.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),i)}function tI(i,s,a,c,y){switch(s){case"focusin":return Zo=El(Zo,i,s,a,c,y),!0;case"dragenter":return jo=El(jo,i,s,a,c,y),!0;case"mouseover":return es=El(es,i,s,a,c,y),!0;case"pointerover":var _=y.pointerId;return vl.set(_,El(vl.get(_)||null,i,s,a,c,y)),!0;case"gotpointercapture":return _=y.pointerId,Tl.set(_,El(Tl.get(_)||null,i,s,a,c,y)),!0}return!1}function L_(i){var s=Di(i.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=u(a),s!==null){i.blockedOn=s,ri(i.priority,function(){V_(a)});return}}else if(s===31){if(s=d(a),s!==null){i.blockedOn=s,ri(i.priority,function(){V_(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Tc(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var a=Ah(i.nativeEvent);if(a===null){a=i.nativeEvent;var c=new a.constructor(a.type,a);Pa=c,a.target.dispatchEvent(c),Pa=null}else return s=Bn(a),s!==null&&x_(s),i.blockedOn=a,!1;s.shift()}return!0}function O_(i,s,a){Tc(i)&&a.delete(s)}function nI(){Ih=!1,Zo!==null&&Tc(Zo)&&(Zo=null),jo!==null&&Tc(jo)&&(jo=null),es!==null&&Tc(es)&&(es=null),vl.forEach(O_),Tl.forEach(O_)}function Ec(i,s){i.blockedOn===s&&(i.blockedOn=null,Ih||(Ih=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,nI)))}var Sc=null;function k_(i){Sc!==i&&(Sc=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Sc===i&&(Sc=null);for(var s=0;s<i.length;s+=3){var a=i[s],c=i[s+1],y=i[s+2];if(typeof c!="function"){if(Ch(c||a)===null)continue;break}var _=Bn(a);_!==null&&(i.splice(s,3),s-=3,Ad(_,{pending:!0,data:y,method:a.method,action:c},c,y))}}))}function Qr(i){function s(U){return Ec(U,i)}Zo!==null&&Ec(Zo,i),jo!==null&&Ec(jo,i),es!==null&&Ec(es,i),vl.forEach(s),Tl.forEach(s);for(var a=0;a<ts.length;a++){var c=ts[a];c.blockedOn===i&&(c.blockedOn=null)}for(;0<ts.length&&(a=ts[0],a.blockedOn===null);)L_(a),a.blockedOn===null&&ts.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var y=a[c],_=a[c+1],A=y[Qt]||null;if(typeof _=="function")A||k_(a);else if(A){var I=null;if(_&&_.hasAttribute("formAction")){if(y=_,A=_[Qt]||null)I=A.formAction;else if(Ch(y)!==null)continue}else I=A.action;typeof I=="function"?a[c+1]=I:(a.splice(c,3),c-=3),k_(a)}}}function q_(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function s(){y!==null&&(y(),y=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),y!==null&&(y(),y=null)}}}function Rh(i){this._internalRoot=i}Ac.prototype.render=Rh.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(o(409));var a=s.current,c=kn();M_(a,c,i,s,null,null)},Ac.prototype.unmount=Rh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;M_(i.current,2,null,i,null,null),ic(),s[bi]=null}};function Ac(i){this._internalRoot=i}Ac.prototype.unstable_scheduleHydration=function(i){if(i){var s=iu();i={blockedOn:null,target:i,priority:s};for(var a=0;a<ts.length&&s!==0&&s<ts[a].priority;a++);ts.splice(a,0,i),a===0&&L_(i)}};var B_=e.version;if(B_!=="19.2.4")throw Error(o(527,B_,"19.2.4"));le.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(o(188)):(i=Object.keys(i).join(","),Error(o(268,i)));return i=m(s),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var iI={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cc.isDisabled&&Cc.supportsFiber)try{Tn=Cc.inject(iI),Dt=Cc}catch{}}return Al.createRoot=function(i,s){if(!r(i))throw Error(o(299));var a=!1,c="",y=Kg,_=Qg,A=Xg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(y=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError)),s=N_(i,1,!1,null,null,a,c,null,y,_,A,q_),i[bi]=s.current,ah(i),new Rh(s)},Al.hydrateRoot=function(i,s,a){if(!r(i))throw Error(o(299));var c=!1,y="",_=Kg,A=Qg,I=Xg,U=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(I=a.onRecoverableError),a.formState!==void 0&&(U=a.formState)),s=N_(i,1,!0,s,a??null,c,y,U,_,A,I,q_),s.context=b_(null),a=s.current,c=kn(),c=Cs(c),y=Bo(c),y.callback=null,Go(a,y,c),a=c,s.current.lanes=a,Ss(s,a),Yi(s),i[bi]=s.current,ah(i),new Ac(s)},Al.version="19.2.4",Al}var $_;function pI(){if($_)return bh.exports;$_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),bh.exports=hI(),bh.exports}var mI=pI();const gI=BT(mI),yI=()=>{};var W_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT=function(n){const e=[];let t=0;for(let o=0;o<n.length;o++){let r=n.charCodeAt(o);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&o+1<n.length&&(n.charCodeAt(o+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++o)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},_I=function(n){const e=[];let t=0,o=0;for(;t<n.length;){const r=n[t++];if(r<128)e[o++]=String.fromCharCode(r);else if(r>191&&r<224){const l=n[t++];e[o++]=String.fromCharCode((r&31)<<6|l&63)}else if(r>239&&r<365){const l=n[t++],u=n[t++],d=n[t++],g=((r&7)<<18|(l&63)<<12|(u&63)<<6|d&63)-65536;e[o++]=String.fromCharCode(55296+(g>>10)),e[o++]=String.fromCharCode(56320+(g&1023))}else{const l=n[t++],u=n[t++];e[o++]=String.fromCharCode((r&15)<<12|(l&63)<<6|u&63)}}return e.join("")},FT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let r=0;r<n.length;r+=3){const l=n[r],u=r+1<n.length,d=u?n[r+1]:0,g=r+2<n.length,m=g?n[r+2]:0,v=l>>2,T=(l&3)<<4|d>>4;let S=(d&15)<<2|m>>6,R=m&63;g||(R=64,u||(S=64)),o.push(t[v],t[T],t[S],t[R])}return o.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(GT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):_I(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let r=0;r<n.length;){const l=t[n.charAt(r++)],d=r<n.length?t[n.charAt(r)]:0;++r;const m=r<n.length?t[n.charAt(r)]:64;++r;const T=r<n.length?t[n.charAt(r)]:64;if(++r,l==null||d==null||m==null||T==null)throw new vI;const S=l<<2|d>>4;if(o.push(S),m!==64){const R=d<<4&240|m>>2;if(o.push(R),T!==64){const x=m<<6&192|T;o.push(x)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class vI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TI=function(n){const e=GT(n);return FT.encodeByteArray(e,!0)},zc=function(n){return TI(n).replace(/\./g,"")},EI=function(n){try{return FT.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=()=>SI().__FIREBASE_DEFAULTS__,CI=()=>{if(typeof process>"u"||typeof W_>"u")return;const n=W_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},II=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&EI(n[1]);return e&&JSON.parse(e)},Mp=()=>{try{return yI()||AI()||CI()||II()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},RI=n=>{var e,t;return(t=(e=Mp())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},wI=n=>{const e=RI(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),o]:[e.substring(0,t),o]},HT=()=>{var n;return(n=Mp())==null?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,o)=>{t?this.reject(t):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function bI(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},o=e||"demo-project",r=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${o}`,aud:o,iat:r,exp:r+3600,auth_time:r,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[zc(JSON.stringify(t)),zc(JSON.stringify(u)),""].join(".")}const xl={};function DI(){const n={prod:[],emulator:[]};for(const e of Object.keys(xl))xl[e]?n.emulator.push(e):n.prod.push(e);return n}function xI(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Z_=!1;function VI(n,e){if(typeof window>"u"||typeof document>"u"||!Dp(window.location.host)||xl[n]===e||xl[n]||Z_)return;xl[n]=e;function t(S){return`__firebase__banner__${S}`}const o="__firebase__banner",l=DI().prod.length>0;function u(){const S=document.getElementById(o);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,R){S.setAttribute("width","24"),S.setAttribute("id",R),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function m(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Z_=!0,u()},S}function v(S,R){S.setAttribute("id",R),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=xI(o),R=t("text"),x=document.getElementById(R)||document.createElement("span"),O=t("learnmore"),k=document.getElementById(O)||document.createElement("a"),K=t("preprendIcon"),ne=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const j=S.element;d(j),v(k,O);const ae=m();g(ne,K),j.append(ne,x,k,ae),document.body.appendChild(j)}l?(x.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UI(){var e;const n=(e=Mp())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LI(){return!UI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OI(){try{return typeof indexedDB=="object"}catch{return!1}}function kI(){return new Promise((n,e)=>{try{let t=!0;const o="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(o);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(o),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var l;e(((l=r.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI="FirebaseError";class pa extends Error{constructor(e,t,o){super(t),this.code=e,this.customData=o,this.name=qI,Object.setPrototypeOf(this,pa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zT.prototype.create)}}class zT{constructor(e,t,o){this.service=e,this.serviceName=t,this.errors=o}create(e,...t){const o=t[0]||{},r=`${this.service}/${e}`,l=this.errors[e],u=l?BI(l,o):"Error",d=`${this.serviceName}: ${u} (${r}).`;return new pa(r,d,o)}}function BI(n,e){return n.replace(GI,(t,o)=>{const r=e[o];return r!=null?String(r):`<${o}?>`})}const GI=/\{\$([^}]+)}/g;function Yc(n,e){if(n===e)return!0;const t=Object.keys(n),o=Object.keys(e);for(const r of t){if(!o.includes(r))return!1;const l=n[r],u=e[r];if(j_(l)&&j_(u)){if(!Yc(l,u))return!1}else if(l!==u)return!1}for(const r of o)if(!t.includes(r))return!1;return!0}function j_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(n){return n&&n._delegate?n._delegate:n}class Ol{constructor(e,t,o){this.name=e,this.instanceFactory=t,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const o=new NI;if(this.instancesDeferred.set(t,o),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&o.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(o)return null;throw r}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zI(e))try{this.getOrInitializeService({instanceIdentifier:Xs})}catch{}for(const[t,o]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:r});o.resolve(l)}catch{}}}}clearInstance(e=Xs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xs){return this.instances.has(e)}getOptions(e=Xs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:o,options:t});for(const[l,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);o===d&&u.resolve(r)}return r}onInit(e,t){const o=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(o)??new Set;r.add(e),this.onInitCallbacks.set(o,r);const l=this.instances.get(o);return l&&e(l,o),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const o=this.onInitCallbacks.get(t);if(o)for(const r of o)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:HI(e),options:t}),this.instances.set(e,o),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=Xs){return this.component?this.component.multipleInstances?e:Xs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function HI(n){return n===Xs?void 0:n}function zI(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new FI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ze||(Ze={}));const JI={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},KI=Ze.INFO,QI={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},XI=(n,e,...t)=>{if(e<n.logLevel)return;const o=new Date().toISOString(),r=QI[e];if(r)console[r](`[${o}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class YT{constructor(e){this.name=e,this._logLevel=KI,this._logHandler=XI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}const $I=(n,e)=>e.some(t=>n instanceof t);let ev,tv;function WI(){return ev||(ev=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZI(){return tv||(tv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JT=new WeakMap,Yh=new WeakMap,KT=new WeakMap,Vh=new WeakMap,xp=new WeakMap;function jI(n){const e=new Promise((t,o)=>{const r=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(rs(n.result)),r()},u=()=>{o(n.error),r()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&JT.set(t,n)}).catch(()=>{}),xp.set(e,n),e}function eR(n){if(Yh.has(n))return;const e=new Promise((t,o)=>{const r=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),r()},u=()=>{o(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});Yh.set(n,e)}let Jh={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Yh.get(n);if(e==="objectStoreNames")return n.objectStoreNames||KT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return rs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function tR(n){Jh=n(Jh)}function nR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const o=n.call(Ph(this),e,...t);return KT.set(o,e.sort?e.sort():[e]),rs(o)}:ZI().includes(n)?function(...e){return n.apply(Ph(this),e),rs(JT.get(this))}:function(...e){return rs(n.apply(Ph(this),e))}}function iR(n){return typeof n=="function"?nR(n):(n instanceof IDBTransaction&&eR(n),$I(n,WI())?new Proxy(n,Jh):n)}function rs(n){if(n instanceof IDBRequest)return jI(n);if(Vh.has(n))return Vh.get(n);const e=iR(n);return e!==n&&(Vh.set(n,e),xp.set(e,n)),e}const Ph=n=>xp.get(n);function oR(n,e,{blocked:t,upgrade:o,blocking:r,terminated:l}={}){const u=indexedDB.open(n,e),d=rs(u);return o&&u.addEventListener("upgradeneeded",g=>{o(rs(u.result),g.oldVersion,g.newVersion,rs(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),d.then(g=>{l&&g.addEventListener("close",()=>l()),r&&g.addEventListener("versionchange",m=>r(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const sR=["get","getKey","getAll","getAllKeys","count"],rR=["put","add","delete","clear"],Uh=new Map;function nv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Uh.get(e))return Uh.get(e);const t=e.replace(/FromIndex$/,""),o=e!==t,r=rR.includes(t);if(!(t in(o?IDBIndex:IDBObjectStore).prototype)||!(r||sR.includes(t)))return;const l=async function(u,...d){const g=this.transaction(u,r?"readwrite":"readonly");let m=g.store;return o&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),r&&g.done]))[0]};return Uh.set(e,l),l}tR(n=>({...n,get:(e,t,o)=>nv(e,t)||n.get(e,t,o),has:(e,t)=>!!nv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(lR(t)){const o=t.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(t=>t).join(" ")}}function lR(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Kh="@firebase/app",iv="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=new YT("@firebase/app"),uR="@firebase/app-compat",cR="@firebase/analytics-compat",fR="@firebase/analytics",dR="@firebase/app-check-compat",hR="@firebase/app-check",pR="@firebase/auth",mR="@firebase/auth-compat",gR="@firebase/database",yR="@firebase/data-connect",_R="@firebase/database-compat",vR="@firebase/functions",TR="@firebase/functions-compat",ER="@firebase/installations",SR="@firebase/installations-compat",AR="@firebase/messaging",CR="@firebase/messaging-compat",IR="@firebase/performance",RR="@firebase/performance-compat",wR="@firebase/remote-config",NR="@firebase/remote-config-compat",bR="@firebase/storage",MR="@firebase/storage-compat",DR="@firebase/firestore",xR="@firebase/ai",VR="@firebase/firestore-compat",PR="firebase",UR="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh="[DEFAULT]",LR={[Kh]:"fire-core",[uR]:"fire-core-compat",[fR]:"fire-analytics",[cR]:"fire-analytics-compat",[hR]:"fire-app-check",[dR]:"fire-app-check-compat",[pR]:"fire-auth",[mR]:"fire-auth-compat",[gR]:"fire-rtdb",[yR]:"fire-data-connect",[_R]:"fire-rtdb-compat",[vR]:"fire-fn",[TR]:"fire-fn-compat",[ER]:"fire-iid",[SR]:"fire-iid-compat",[AR]:"fire-fcm",[CR]:"fire-fcm-compat",[IR]:"fire-perf",[RR]:"fire-perf-compat",[wR]:"fire-rc",[NR]:"fire-rc-compat",[bR]:"fire-gcs",[MR]:"fire-gcs-compat",[DR]:"fire-fst",[VR]:"fire-fst-compat",[xR]:"fire-vertex","fire-js":"fire-js",[PR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc=new Map,OR=new Map,Xh=new Map;function ov(n,e){try{n.container.addComponent(e)}catch(t){vo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Kc(n){const e=n.name;if(Xh.has(e))return vo.debug(`There were multiple attempts to register component ${e}.`),!1;Xh.set(e,n);for(const t of Jc.values())ov(t,n);for(const t of OR.values())ov(t,n);return!0}function kR(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function qR(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},as=new zT("app","Firebase",BR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,t,o){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new Ol("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw as.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=UR;function QT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const o={name:Qh,automaticDataCollectionEnabled:!0,...e},r=o.name;if(typeof r!="string"||!r)throw as.create("bad-app-name",{appName:String(r)});if(t||(t=HT()),!t)throw as.create("no-options");const l=Jc.get(r);if(l){if(Yc(t,l.options)&&Yc(o,l.config))return l;throw as.create("duplicate-app",{appName:r})}const u=new YI(r);for(const g of Xh.values())u.addComponent(g);const d=new GR(t,o,u);return Jc.set(r,d),d}function HR(n=Qh){const e=Jc.get(n);if(!e&&n===Qh&&HT())return QT();if(!e)throw as.create("no-app",{appName:n});return e}function na(n,e,t){let o=LR[n]??n;t&&(o+=`-${t}`);const r=o.match(/\s|\//),l=e.match(/\s|\//);if(r||l){const u=[`Unable to register library "${o}" with version "${e}":`];r&&u.push(`library name "${o}" contains illegal characters (whitespace or "/")`),r&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vo.warn(u.join(" "));return}Kc(new Ol(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR="firebase-heartbeat-database",YR=1,kl="firebase-heartbeat-store";let Lh=null;function XT(){return Lh||(Lh=oR(zR,YR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(kl)}catch(t){console.warn(t)}}}}).catch(n=>{throw as.create("idb-open",{originalErrorMessage:n.message})})),Lh}async function JR(n){try{const t=(await XT()).transaction(kl),o=await t.objectStore(kl).get($T(n));return await t.done,o}catch(e){if(e instanceof pa)vo.warn(e.message);else{const t=as.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vo.warn(t.message)}}}async function sv(n,e){try{const o=(await XT()).transaction(kl,"readwrite");await o.objectStore(kl).put(e,$T(n)),await o.done}catch(t){if(t instanceof pa)vo.warn(t.message);else{const o=as.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});vo.warn(o.message)}}}function $T(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=1024,QR=30;class XR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new WR(t),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=rv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:r}),this._heartbeatsCache.heartbeats.length>QR){const u=ZR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){vo.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=rv(),{heartbeatsToSend:o,unsentEntries:r}=$R(this._heartbeatsCache.heartbeats),l=zc(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return vo.warn(t),""}}}function rv(){return new Date().toISOString().substring(0,10)}function $R(n,e=KR){const t=[];let o=n.slice();for(const r of n){const l=t.find(u=>u.agent===r.agent);if(l){if(l.dates.push(r.date),av(t)>e){l.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),av(t)>e){t.pop();break}o=o.slice(1)}return{heartbeatsToSend:t,unsentEntries:o}}class WR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OI()?kI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await JR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return sv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return sv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function av(n){return zc(JSON.stringify({version:2,heartbeats:n})).length}function ZR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let o=1;o<n.length;o++)n[o].date<t&&(t=n[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(n){Kc(new Ol("platform-logger",e=>new aR(e),"PRIVATE")),Kc(new Ol("heartbeat",e=>new XR(e),"PRIVATE")),na(Kh,iv,n),na(Kh,iv,"esm2020"),na("fire-js","")}jR("");var ew="firebase",tw="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */na(ew,tw,"app");var lv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ls,WT;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,b){function N(){}N.prototype=b.prototype,M.F=b.prototype,M.prototype=new N,M.prototype.constructor=M,M.D=function(P,V,B){for(var D=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)D[Ce-2]=arguments[Ce];return b.prototype[V].apply(P,D)}}function t(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(o,t),o.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(M,b,N){N||(N=0);const P=Array(16);if(typeof b=="string")for(var V=0;V<16;++V)P[V]=b.charCodeAt(N++)|b.charCodeAt(N++)<<8|b.charCodeAt(N++)<<16|b.charCodeAt(N++)<<24;else for(V=0;V<16;++V)P[V]=b[N++]|b[N++]<<8|b[N++]<<16|b[N++]<<24;b=M.g[0],N=M.g[1],V=M.g[2];let B=M.g[3],D;D=b+(B^N&(V^B))+P[0]+3614090360&4294967295,b=N+(D<<7&4294967295|D>>>25),D=B+(V^b&(N^V))+P[1]+3905402710&4294967295,B=b+(D<<12&4294967295|D>>>20),D=V+(N^B&(b^N))+P[2]+606105819&4294967295,V=B+(D<<17&4294967295|D>>>15),D=N+(b^V&(B^b))+P[3]+3250441966&4294967295,N=V+(D<<22&4294967295|D>>>10),D=b+(B^N&(V^B))+P[4]+4118548399&4294967295,b=N+(D<<7&4294967295|D>>>25),D=B+(V^b&(N^V))+P[5]+1200080426&4294967295,B=b+(D<<12&4294967295|D>>>20),D=V+(N^B&(b^N))+P[6]+2821735955&4294967295,V=B+(D<<17&4294967295|D>>>15),D=N+(b^V&(B^b))+P[7]+4249261313&4294967295,N=V+(D<<22&4294967295|D>>>10),D=b+(B^N&(V^B))+P[8]+1770035416&4294967295,b=N+(D<<7&4294967295|D>>>25),D=B+(V^b&(N^V))+P[9]+2336552879&4294967295,B=b+(D<<12&4294967295|D>>>20),D=V+(N^B&(b^N))+P[10]+4294925233&4294967295,V=B+(D<<17&4294967295|D>>>15),D=N+(b^V&(B^b))+P[11]+2304563134&4294967295,N=V+(D<<22&4294967295|D>>>10),D=b+(B^N&(V^B))+P[12]+1804603682&4294967295,b=N+(D<<7&4294967295|D>>>25),D=B+(V^b&(N^V))+P[13]+4254626195&4294967295,B=b+(D<<12&4294967295|D>>>20),D=V+(N^B&(b^N))+P[14]+2792965006&4294967295,V=B+(D<<17&4294967295|D>>>15),D=N+(b^V&(B^b))+P[15]+1236535329&4294967295,N=V+(D<<22&4294967295|D>>>10),D=b+(V^B&(N^V))+P[1]+4129170786&4294967295,b=N+(D<<5&4294967295|D>>>27),D=B+(N^V&(b^N))+P[6]+3225465664&4294967295,B=b+(D<<9&4294967295|D>>>23),D=V+(b^N&(B^b))+P[11]+643717713&4294967295,V=B+(D<<14&4294967295|D>>>18),D=N+(B^b&(V^B))+P[0]+3921069994&4294967295,N=V+(D<<20&4294967295|D>>>12),D=b+(V^B&(N^V))+P[5]+3593408605&4294967295,b=N+(D<<5&4294967295|D>>>27),D=B+(N^V&(b^N))+P[10]+38016083&4294967295,B=b+(D<<9&4294967295|D>>>23),D=V+(b^N&(B^b))+P[15]+3634488961&4294967295,V=B+(D<<14&4294967295|D>>>18),D=N+(B^b&(V^B))+P[4]+3889429448&4294967295,N=V+(D<<20&4294967295|D>>>12),D=b+(V^B&(N^V))+P[9]+568446438&4294967295,b=N+(D<<5&4294967295|D>>>27),D=B+(N^V&(b^N))+P[14]+3275163606&4294967295,B=b+(D<<9&4294967295|D>>>23),D=V+(b^N&(B^b))+P[3]+4107603335&4294967295,V=B+(D<<14&4294967295|D>>>18),D=N+(B^b&(V^B))+P[8]+1163531501&4294967295,N=V+(D<<20&4294967295|D>>>12),D=b+(V^B&(N^V))+P[13]+2850285829&4294967295,b=N+(D<<5&4294967295|D>>>27),D=B+(N^V&(b^N))+P[2]+4243563512&4294967295,B=b+(D<<9&4294967295|D>>>23),D=V+(b^N&(B^b))+P[7]+1735328473&4294967295,V=B+(D<<14&4294967295|D>>>18),D=N+(B^b&(V^B))+P[12]+2368359562&4294967295,N=V+(D<<20&4294967295|D>>>12),D=b+(N^V^B)+P[5]+4294588738&4294967295,b=N+(D<<4&4294967295|D>>>28),D=B+(b^N^V)+P[8]+2272392833&4294967295,B=b+(D<<11&4294967295|D>>>21),D=V+(B^b^N)+P[11]+1839030562&4294967295,V=B+(D<<16&4294967295|D>>>16),D=N+(V^B^b)+P[14]+4259657740&4294967295,N=V+(D<<23&4294967295|D>>>9),D=b+(N^V^B)+P[1]+2763975236&4294967295,b=N+(D<<4&4294967295|D>>>28),D=B+(b^N^V)+P[4]+1272893353&4294967295,B=b+(D<<11&4294967295|D>>>21),D=V+(B^b^N)+P[7]+4139469664&4294967295,V=B+(D<<16&4294967295|D>>>16),D=N+(V^B^b)+P[10]+3200236656&4294967295,N=V+(D<<23&4294967295|D>>>9),D=b+(N^V^B)+P[13]+681279174&4294967295,b=N+(D<<4&4294967295|D>>>28),D=B+(b^N^V)+P[0]+3936430074&4294967295,B=b+(D<<11&4294967295|D>>>21),D=V+(B^b^N)+P[3]+3572445317&4294967295,V=B+(D<<16&4294967295|D>>>16),D=N+(V^B^b)+P[6]+76029189&4294967295,N=V+(D<<23&4294967295|D>>>9),D=b+(N^V^B)+P[9]+3654602809&4294967295,b=N+(D<<4&4294967295|D>>>28),D=B+(b^N^V)+P[12]+3873151461&4294967295,B=b+(D<<11&4294967295|D>>>21),D=V+(B^b^N)+P[15]+530742520&4294967295,V=B+(D<<16&4294967295|D>>>16),D=N+(V^B^b)+P[2]+3299628645&4294967295,N=V+(D<<23&4294967295|D>>>9),D=b+(V^(N|~B))+P[0]+4096336452&4294967295,b=N+(D<<6&4294967295|D>>>26),D=B+(N^(b|~V))+P[7]+1126891415&4294967295,B=b+(D<<10&4294967295|D>>>22),D=V+(b^(B|~N))+P[14]+2878612391&4294967295,V=B+(D<<15&4294967295|D>>>17),D=N+(B^(V|~b))+P[5]+4237533241&4294967295,N=V+(D<<21&4294967295|D>>>11),D=b+(V^(N|~B))+P[12]+1700485571&4294967295,b=N+(D<<6&4294967295|D>>>26),D=B+(N^(b|~V))+P[3]+2399980690&4294967295,B=b+(D<<10&4294967295|D>>>22),D=V+(b^(B|~N))+P[10]+4293915773&4294967295,V=B+(D<<15&4294967295|D>>>17),D=N+(B^(V|~b))+P[1]+2240044497&4294967295,N=V+(D<<21&4294967295|D>>>11),D=b+(V^(N|~B))+P[8]+1873313359&4294967295,b=N+(D<<6&4294967295|D>>>26),D=B+(N^(b|~V))+P[15]+4264355552&4294967295,B=b+(D<<10&4294967295|D>>>22),D=V+(b^(B|~N))+P[6]+2734768916&4294967295,V=B+(D<<15&4294967295|D>>>17),D=N+(B^(V|~b))+P[13]+1309151649&4294967295,N=V+(D<<21&4294967295|D>>>11),D=b+(V^(N|~B))+P[4]+4149444226&4294967295,b=N+(D<<6&4294967295|D>>>26),D=B+(N^(b|~V))+P[11]+3174756917&4294967295,B=b+(D<<10&4294967295|D>>>22),D=V+(b^(B|~N))+P[2]+718787259&4294967295,V=B+(D<<15&4294967295|D>>>17),D=N+(B^(V|~b))+P[9]+3951481745&4294967295,M.g[0]=M.g[0]+b&4294967295,M.g[1]=M.g[1]+(V+(D<<21&4294967295|D>>>11))&4294967295,M.g[2]=M.g[2]+V&4294967295,M.g[3]=M.g[3]+B&4294967295}o.prototype.v=function(M,b){b===void 0&&(b=M.length);const N=b-this.blockSize,P=this.C;let V=this.h,B=0;for(;B<b;){if(V==0)for(;B<=N;)r(this,M,B),B+=this.blockSize;if(typeof M=="string"){for(;B<b;)if(P[V++]=M.charCodeAt(B++),V==this.blockSize){r(this,P),V=0;break}}else for(;B<b;)if(P[V++]=M[B++],V==this.blockSize){r(this,P),V=0;break}}this.h=V,this.o+=b},o.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var b=1;b<M.length-8;++b)M[b]=0;b=this.o*8;for(var N=M.length-8;N<M.length;++N)M[N]=b&255,b/=256;for(this.v(M),M=Array(16),b=0,N=0;N<4;++N)for(let P=0;P<32;P+=8)M[b++]=this.g[N]>>>P&255;return M};function l(M,b){var N=d;return Object.prototype.hasOwnProperty.call(N,M)?N[M]:N[M]=b(M)}function u(M,b){this.h=b;const N=[];let P=!0;for(let V=M.length-1;V>=0;V--){const B=M[V]|0;P&&B==b||(N[V]=B,P=!1)}this.g=N}var d={};function g(M){return-128<=M&&M<128?l(M,function(b){return new u([b|0],b<0?-1:0)}):new u([M|0],M<0?-1:0)}function m(M){if(isNaN(M)||!isFinite(M))return T;if(M<0)return k(m(-M));const b=[];let N=1;for(let P=0;M>=N;P++)b[P]=M/N|0,N*=4294967296;return new u(b,0)}function v(M,b){if(M.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(M.charAt(0)=="-")return k(v(M.substring(1),b));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=m(Math.pow(b,8));let P=T;for(let B=0;B<M.length;B+=8){var V=Math.min(8,M.length-B);const D=parseInt(M.substring(B,B+V),b);V<8?(V=m(Math.pow(b,V)),P=P.j(V).add(m(D))):(P=P.j(N),P=P.add(m(D)))}return P}var T=g(0),S=g(1),R=g(16777216);n=u.prototype,n.m=function(){if(O(this))return-k(this).m();let M=0,b=1;for(let N=0;N<this.g.length;N++){const P=this.i(N);M+=(P>=0?P:4294967296+P)*b,b*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(x(this))return"0";if(O(this))return"-"+k(this).toString(M);const b=m(Math.pow(M,6));var N=this;let P="";for(;;){const V=ae(N,b).g;N=K(N,V.j(b));let B=((N.g.length>0?N.g[0]:N.h)>>>0).toString(M);if(N=V,x(N))return B+P;for(;B.length<6;)B="0"+B;P=B+P}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function x(M){if(M.h!=0)return!1;for(let b=0;b<M.g.length;b++)if(M.g[b]!=0)return!1;return!0}function O(M){return M.h==-1}n.l=function(M){return M=K(this,M),O(M)?-1:x(M)?0:1};function k(M){const b=M.g.length,N=[];for(let P=0;P<b;P++)N[P]=~M.g[P];return new u(N,~M.h).add(S)}n.abs=function(){return O(this)?k(this):this},n.add=function(M){const b=Math.max(this.g.length,M.g.length),N=[];let P=0;for(let V=0;V<=b;V++){let B=P+(this.i(V)&65535)+(M.i(V)&65535),D=(B>>>16)+(this.i(V)>>>16)+(M.i(V)>>>16);P=D>>>16,B&=65535,D&=65535,N[V]=D<<16|B}return new u(N,N[N.length-1]&-2147483648?-1:0)};function K(M,b){return M.add(k(b))}n.j=function(M){if(x(this)||x(M))return T;if(O(this))return O(M)?k(this).j(k(M)):k(k(this).j(M));if(O(M))return k(this.j(k(M)));if(this.l(R)<0&&M.l(R)<0)return m(this.m()*M.m());const b=this.g.length+M.g.length,N=[];for(var P=0;P<2*b;P++)N[P]=0;for(P=0;P<this.g.length;P++)for(let V=0;V<M.g.length;V++){const B=this.i(P)>>>16,D=this.i(P)&65535,Ce=M.i(V)>>>16,Xe=M.i(V)&65535;N[2*P+2*V]+=D*Xe,ne(N,2*P+2*V),N[2*P+2*V+1]+=B*Xe,ne(N,2*P+2*V+1),N[2*P+2*V+1]+=D*Ce,ne(N,2*P+2*V+1),N[2*P+2*V+2]+=B*Ce,ne(N,2*P+2*V+2)}for(M=0;M<b;M++)N[M]=N[2*M+1]<<16|N[2*M];for(M=b;M<2*b;M++)N[M]=0;return new u(N,0)};function ne(M,b){for(;(M[b]&65535)!=M[b];)M[b+1]+=M[b]>>>16,M[b]&=65535,b++}function j(M,b){this.g=M,this.h=b}function ae(M,b){if(x(b))throw Error("division by zero");if(x(M))return new j(T,T);if(O(M))return b=ae(k(M),b),new j(k(b.g),k(b.h));if(O(b))return b=ae(M,k(b)),new j(k(b.g),b.h);if(M.g.length>30){if(O(M)||O(b))throw Error("slowDivide_ only works with positive integers.");for(var N=S,P=b;P.l(M)<=0;)N=W(N),P=W(P);var V=F(N,1),B=F(P,1);for(P=F(P,2),N=F(N,2);!x(P);){var D=B.add(P);D.l(M)<=0&&(V=V.add(N),B=D),P=F(P,1),N=F(N,1)}return b=K(M,V.j(b)),new j(V,b)}for(V=T;M.l(b)>=0;){for(N=Math.max(1,Math.floor(M.m()/b.m())),P=Math.ceil(Math.log(N)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),B=m(N),D=B.j(b);O(D)||D.l(M)>0;)N-=P,B=m(N),D=B.j(b);x(B)&&(B=S),V=V.add(B),M=K(M,D)}return new j(V,M)}n.B=function(M){return ae(this,M).h},n.and=function(M){const b=Math.max(this.g.length,M.g.length),N=[];for(let P=0;P<b;P++)N[P]=this.i(P)&M.i(P);return new u(N,this.h&M.h)},n.or=function(M){const b=Math.max(this.g.length,M.g.length),N=[];for(let P=0;P<b;P++)N[P]=this.i(P)|M.i(P);return new u(N,this.h|M.h)},n.xor=function(M){const b=Math.max(this.g.length,M.g.length),N=[];for(let P=0;P<b;P++)N[P]=this.i(P)^M.i(P);return new u(N,this.h^M.h)};function W(M){const b=M.g.length+1,N=[];for(let P=0;P<b;P++)N[P]=M.i(P)<<1|M.i(P-1)>>>31;return new u(N,M.h)}function F(M,b){const N=b>>5;b%=32;const P=M.g.length-N,V=[];for(let B=0;B<P;B++)V[B]=b>0?M.i(B+N)>>>b|M.i(B+N+1)<<32-b:M.i(B+N);return new u(V,M.h)}o.prototype.digest=o.prototype.A,o.prototype.reset=o.prototype.u,o.prototype.update=o.prototype.v,WT=o,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=v,ls=u}).apply(typeof lv<"u"?lv:typeof self<"u"?self:typeof window<"u"?window:{});var Ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZT,wl,jT,Lc,$h,eE,tE,nE;(function(){var n,e=Object.defineProperty;function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ic=="object"&&Ic];for(var E=0;E<p.length;++E){var C=p[E];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var o=t(this);function r(p,E){if(E)e:{var C=o;p=p.split(".");for(var w=0;w<p.length-1;w++){var H=p[w];if(!(H in C))break e;C=C[H]}p=p[p.length-1],w=C[p],E=E(w),E!=w&&E!=null&&e(C,p,{configurable:!0,writable:!0,value:E})}}r("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(p){return p||function(E){var C=[],w;for(w in E)Object.prototype.hasOwnProperty.call(E,w)&&C.push([w,E[w]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function d(p){var E=typeof p;return E=="object"&&p!=null||E=="function"}function g(p,E,C){return p.call.apply(p.bind,arguments)}function m(p,E,C){return m=g,m.apply(null,arguments)}function v(p,E){var C=Array.prototype.slice.call(arguments,1);return function(){var w=C.slice();return w.push.apply(w,arguments),p.apply(this,w)}}function T(p,E){function C(){}C.prototype=E.prototype,p.Z=E.prototype,p.prototype=new C,p.prototype.constructor=p,p.Ob=function(w,H,Q){for(var ce=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)ce[Le-2]=arguments[Le];return E.prototype[H].apply(w,ce)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function R(p){const E=p.length;if(E>0){const C=Array(E);for(let w=0;w<E;w++)C[w]=p[w];return C}return[]}function x(p,E){for(let w=1;w<arguments.length;w++){const H=arguments[w];var C=typeof H;if(C=C!="object"?C:H?Array.isArray(H)?"array":C:"null",C=="array"||C=="object"&&typeof H.length=="number"){C=p.length||0;const Q=H.length||0;p.length=C+Q;for(let ce=0;ce<Q;ce++)p[C+ce]=H[ce]}else p.push(H)}}class O{constructor(E,C){this.i=E,this.j=C,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function k(p){u.setTimeout(()=>{throw p},0)}function K(){var p=M;let E=null;return p.g&&(E=p.g,p.g=p.g.next,p.g||(p.h=null),E.next=null),E}class ne{constructor(){this.h=this.g=null}add(E,C){const w=j.get();w.set(E,C),this.h?this.h.next=w:this.g=w,this.h=w}}var j=new O(()=>new ae,p=>p.reset());class ae{constructor(){this.next=this.g=this.h=null}set(E,C){this.h=E,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let W,F=!1,M=new ne,b=()=>{const p=Promise.resolve(void 0);W=()=>{p.then(N)}};function N(){for(var p;p=K();){try{p.h.call(p.g)}catch(C){k(C)}var E=j;E.j(p),E.h<100&&(E.h++,p.next=E.g,E.g=p)}F=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(p,E){this.type=p,this.g=this.target=E,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var p=!1,E=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const C=()=>{};u.addEventListener("test",C,E),u.removeEventListener("test",C,E)}catch{}return p})();function D(p){return/^[\s\xa0]*$/.test(p)}function Ce(p,E){V.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,E)}T(Ce,V),Ce.prototype.init=function(p,E){const C=this.type=p.type,w=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=E,E=p.relatedTarget,E||(C=="mouseover"?E=p.fromElement:C=="mouseout"&&(E=p.toElement)),this.relatedTarget=E,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&Ce.Z.h.call(this)},Ce.prototype.h=function(){Ce.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Xe="closure_listenable_"+(Math.random()*1e6|0),$=0;function le(p,E,C,w,H){this.listener=p,this.proxy=null,this.src=E,this.type=C,this.capture=!!w,this.ha=H,this.key=++$,this.da=this.fa=!1}function pe(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Ne(p,E,C){for(const w in p)E.call(C,p[w],w,p)}function be(p,E){for(const C in p)E.call(void 0,p[C],C,p)}function L(p){const E={};for(const C in p)E[C]=p[C];return E}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(p,E){let C,w;for(let H=1;H<arguments.length;H++){w=arguments[H];for(C in w)p[C]=w[C];for(let Q=0;Q<ee.length;Q++)C=ee[Q],Object.prototype.hasOwnProperty.call(w,C)&&(p[C]=w[C])}}function fe(p){this.src=p,this.g={},this.h=0}fe.prototype.add=function(p,E,C,w,H){const Q=p.toString();p=this.g[Q],p||(p=this.g[Q]=[],this.h++);const ce=Me(p,E,w,H);return ce>-1?(E=p[ce],C||(E.fa=!1)):(E=new le(E,this.src,Q,!!w,H),E.fa=C,p.push(E)),E};function Se(p,E){const C=E.type;if(C in p.g){var w=p.g[C],H=Array.prototype.indexOf.call(w,E,void 0),Q;(Q=H>=0)&&Array.prototype.splice.call(w,H,1),Q&&(pe(E),p.g[C].length==0&&(delete p.g[C],p.h--))}}function Me(p,E,C,w){for(let H=0;H<p.length;++H){const Q=p[H];if(!Q.da&&Q.listener==E&&Q.capture==!!C&&Q.ha==w)return H}return-1}var Be="closure_lm_"+(Math.random()*1e6|0),Tt={};function Ie(p,E,C,w,H){if(Array.isArray(E)){for(let Q=0;Q<E.length;Q++)Ie(p,E[Q],C,w,H);return null}return C=Ue(C),p&&p[Xe]?p.J(E,C,d(w)?!!w.capture:!1,H):$e(p,E,C,!1,w,H)}function $e(p,E,C,w,H,Q){if(!E)throw Error("Invalid event type");const ce=d(H)?!!H.capture:!!H;let Le=bn(p);if(Le||(p[Be]=Le=new fe(p)),C=Le.add(E,C,w,ce,Q),C.proxy)return C;if(w=bt(),C.proxy=w,w.src=p,w.listener=C,p.addEventListener)B||(H=ce),H===void 0&&(H=!1),p.addEventListener(E.toString(),w,H);else if(p.attachEvent)p.attachEvent(vn(E.toString()),w);else if(p.addListener&&p.removeListener)p.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return C}function bt(){function p(C){return E.call(p.src,p.listener,C)}const E=Ai;return p}function Jt(p,E,C,w,H){if(Array.isArray(E))for(var Q=0;Q<E.length;Q++)Jt(p,E[Q],C,w,H);else w=d(w)?!!w.capture:!!w,C=Ue(C),p&&p[Xe]?(p=p.i,Q=String(E).toString(),Q in p.g&&(E=p.g[Q],C=Me(E,C,w,H),C>-1&&(pe(E[C]),Array.prototype.splice.call(E,C,1),E.length==0&&(delete p.g[Q],p.h--)))):p&&(p=bn(p))&&(E=p.g[E.toString()],p=-1,E&&(p=Me(E,C,w,H)),(C=p>-1?E[p]:null)&&Si(C))}function Si(p){if(typeof p!="number"&&p&&!p.da){var E=p.src;if(E&&E[Xe])Se(E.i,p);else{var C=p.type,w=p.proxy;E.removeEventListener?E.removeEventListener(C,w,p.capture):E.detachEvent?E.detachEvent(vn(C),w):E.addListener&&E.removeListener&&E.removeListener(w),(C=bn(E))?(Se(C,p),C.h==0&&(C.src=null,E[Be]=null)):pe(p)}}}function vn(p){return p in Tt?Tt[p]:Tt[p]="on"+p}function Ai(p,E){if(p.da)p=!0;else{E=new Ce(E,this);const C=p.listener,w=p.ha||p.src;p.fa&&Si(p),p=C.call(w,E)}return p}function bn(p){return p=p[Be],p instanceof fe?p:null}var ye="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ue(p){return typeof p=="function"?p:(p[ye]||(p[ye]=function(E){return p.handleEvent(E)}),p[ye])}function Ee(){P.call(this),this.i=new fe(this),this.M=this,this.G=null}T(Ee,P),Ee.prototype[Xe]=!0,Ee.prototype.removeEventListener=function(p,E,C,w){Jt(this,p,E,C,w)};function qe(p,E){var C,w=p.G;if(w)for(C=[];w;w=w.G)C.push(w);if(p=p.M,w=E.type||E,typeof E=="string")E=new V(E,p);else if(E instanceof V)E.target=E.target||p;else{var H=E;E=new V(w,p),ue(E,H)}H=!0;let Q,ce;if(C)for(ce=C.length-1;ce>=0;ce--)Q=E.g=C[ce],H=Mt(Q,w,!0,E)&&H;if(Q=E.g=p,H=Mt(Q,w,!0,E)&&H,H=Mt(Q,w,!1,E)&&H,C)for(ce=0;ce<C.length;ce++)Q=E.g=C[ce],H=Mt(Q,w,!1,E)&&H}Ee.prototype.N=function(){if(Ee.Z.N.call(this),this.i){var p=this.i;for(const E in p.g){const C=p.g[E];for(let w=0;w<C.length;w++)pe(C[w]);delete p.g[E],p.h--}}this.G=null},Ee.prototype.J=function(p,E,C,w){return this.i.add(String(p),E,!1,C,w)},Ee.prototype.K=function(p,E,C,w){return this.i.add(String(p),E,!0,C,w)};function Mt(p,E,C,w){if(E=p.i.g[String(E)],!E)return!0;E=E.concat();let H=!0;for(let Q=0;Q<E.length;++Q){const ce=E[Q];if(ce&&!ce.da&&ce.capture==C){const Le=ce.listener,It=ce.ha||ce.src;ce.fa&&Se(p.i,ce),H=Le.call(It,w)!==!1&&H}}return H&&!w.defaultPrevented}function Kt(p,E){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=m(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:u.setTimeout(p,E||0)}function ni(p){p.g=Kt(()=>{p.g=null,p.i&&(p.i=!1,ni(p))},p.l);const E=p.h;p.h=null,p.m.apply(null,E)}class yt extends P{constructor(E,C){super(),this.m=E,this.l=C,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:ni(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ii(p){P.call(this),this.h=p,this.g={}}T(ii,P);var jt=[];function Io(p){Ne(p.g,function(E,C){this.g.hasOwnProperty(C)&&Si(E)},p),p.g={}}ii.prototype.N=function(){ii.Z.N.call(this),Io(this)},ii.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oi=u.JSON.stringify,lr=u.JSON.parse,_s=class{stringify(p){return u.JSON.stringify(p,void 0)}parse(p){return u.JSON.parse(p,void 0)}};function vs(){}function Ts(){}var Tn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Dt(){V.call(this,"d")}T(Dt,V);function St(){V.call(this,"c")}T(St,V);var Ge={},un=null;function Ci(){return un=un||new Ee}Ge.Ia="serverreachability";function tu(p){V.call(this,Ge.Ia,p)}T(tu,V);function Ii(p){const E=Ci();qe(E,new tu(E))}Ge.STAT_EVENT="statevent";function Es(p,E){V.call(this,Ge.STAT_EVENT,p),this.stat=E}T(Es,V);function xt(p){const E=Ci();qe(E,new Es(E,p))}Ge.Ja="timingevent";function Ri(p,E){V.call(this,Ge.Ja,p),this.size=E}T(Ri,V);function wi(p,E){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){p()},E)}function si(){this.g=!0}si.prototype.ua=function(){this.g=!1};function Df(p,E,C,w,H,Q){p.info(function(){if(p.g)if(Q){var ce="",Le=Q.split("&");for(let nt=0;nt<Le.length;nt++){var It=Le[nt].split("=");if(It.length>1){const _t=It[0];It=It[1];const Hn=_t.split("_");ce=Hn.length>=2&&Hn[1]=="type"?ce+(_t+"="+It+"&"):ce+(_t+"=redacted&")}}}else ce=null;else ce=Q;return"XMLHTTP REQ ("+w+") [attempt "+H+"]: "+E+`
`+C+`
`+ce})}function nu(p,E,C,w,H,Q,ce){p.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+H+"]: "+E+`
`+C+`
`+Q+" "+ce})}function Ni(p,E,C,w){p.info(function(){return"XMLHTTP TEXT ("+E+"): "+xf(p,C)+(w?" "+w:"")})}function Ss(p,E){p.info(function(){return"TIMEOUT: "+E})}si.prototype.info=function(){};function xf(p,E){if(!p.g)return E;if(!E)return null;try{const Q=JSON.parse(E);if(Q){for(p=0;p<Q.length;p++)if(Array.isArray(Q[p])){var C=Q[p];if(!(C.length<2)){var w=C[1];if(Array.isArray(w)&&!(w.length<1)){var H=w[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ce=1;ce<w.length;ce++)w[ce]=""}}}}return oi(Q)}catch{return E}}var As={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Aa={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ca;function Cs(){}T(Cs,vs),Cs.prototype.g=function(){return new XMLHttpRequest},Ca=new Cs;function Zi(p){return encodeURIComponent(String(p))}function iu(p){var E=1;p=p.split(":");const C=[];for(;E>0&&p.length;)C.push(p.shift()),E--;return p.length&&C.push(p.join(":")),C}function ri(p,E,C,w){this.j=p,this.i=E,this.l=C,this.S=w||1,this.V=new ii(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ai}function ai(){this.i=null,this.g="",this.h=!1}var Vt={},Qt={};function bi(p,E,C){p.M=1,p.A=Is(Ut(E)),p.u=C,p.R=!0,ur(p,null)}function ur(p,E){p.F=Date.now(),Mi(p),p.B=Ut(p.A);var C=p.B,w=p.S;Array.isArray(w)||(w=[String(w)]),hr(C.i,"t",w),p.C=0,C=p.j.L,p.h=new ai,p.g=_u(p.j,C?E:null,!p.u),p.P>0&&(p.O=new yt(m(p.Y,p,p.g),p.P)),E=p.V,C=p.g,w=p.ba;var H="readystatechange";Array.isArray(H)||(H&&(jt[0]=H.toString()),H=jt);for(let Q=0;Q<H.length;Q++){const ce=Ie(C,H[Q],w||E.handleEvent,!1,E.h||E);if(!ce)break;E.g[ce.key]=ce}E=p.J?L(p.J):{},p.u?(p.v||(p.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,E)):(p.v="GET",p.g.ea(p.B,p.v,null,E)),Ii(),Df(p.i,p.v,p.B,p.l,p.S,p.u)}ri.prototype.ba=function(p){p=p.target;const E=this.O;E&&ci(p)==3?E.j():this.Y(p)},ri.prototype.Y=function(p){try{if(p==this.g)e:{const Le=ci(this.g),It=this.g.ya(),nt=this.g.ca();if(!(Le<3)&&(Le!=3||this.g&&(this.h.h||this.g.la()||en(this.g)))){this.K||Le!=4||It==7||(It==8||nt<=0?Ii(3):Ii(2)),Di(this);var E=this.g.ca();this.X=E;var C=Vf(this);if(this.o=E==200,nu(this.i,this.v,this.B,this.l,this.S,Le,E),this.o){if(this.U&&!this.L){t:{if(this.g){var w,H=this.g;if((w=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(w)){var Q=w;break t}}Q=null}if(p=Q)Ni(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xi(this,p);else{this.o=!1,this.m=3,xt(12),Mn(this),Bn(this);break e}}if(this.R){p=!0;let _t;for(;!this.K&&this.C<C.length;)if(_t=su(this,C),_t==Qt){Le==4&&(this.m=4,xt(14),p=!1),Ni(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==Vt){this.m=4,xt(15),Ni(this.i,this.l,C,"[Invalid Chunk]"),p=!1;break}else Ni(this.i,this.l,_t,null),xi(this,_t);if(ou(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Le!=4||C.length!=0||this.h.h||(this.m=1,xt(16),p=!1),this.o=this.o&&p,!p)Ni(this.i,this.l,C,"[Invalid Chunked Response]"),Mn(this),Bn(this);else if(C.length>0&&!this.W){this.W=!0;var ce=this.j;ce.g==this&&ce.aa&&!ce.P&&(ce.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),qa(ce),ce.P=!0,xt(11))}}else Ni(this.i,this.l,C,null),xi(this,C);Le==4&&Mn(this),this.o&&!this.K&&(Le==4?pu(this.j,this):(this.o=!1,Mi(this)))}else eo(this.g),E==400&&C.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),Mn(this),Bn(this)}}}catch{}finally{}};function Vf(p){if(!ou(p))return p.g.la();const E=en(p.g);if(E==="")return"";let C="";const w=E.length,H=ci(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return Mn(p),Bn(p),"";p.h.i=new u.TextDecoder}for(let Q=0;Q<w;Q++)p.h.h=!0,C+=p.h.i.decode(E[Q],{stream:!(H&&Q==w-1)});return E.length=0,p.h.g+=C,p.C=0,p.h.g}function ou(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function su(p,E){var C=p.C,w=E.indexOf(`
`,C);return w==-1?Qt:(C=Number(E.substring(C,w)),isNaN(C)?Vt:(w+=1,w+C>E.length?Qt:(E=E.slice(w,w+C),p.C=w+C,E)))}ri.prototype.cancel=function(){this.K=!0,Mn(this)};function Mi(p){p.T=Date.now()+p.H,cr(p,p.H)}function cr(p,E){if(p.D!=null)throw Error("WatchDog timer not null");p.D=wi(m(p.aa,p),E)}function Di(p){p.D&&(u.clearTimeout(p.D),p.D=null)}ri.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(Ss(this.i,this.B),this.M!=2&&(Ii(),xt(17)),Mn(this),this.m=2,Bn(this)):cr(this,this.T-p)};function Bn(p){p.j.I==0||p.K||pu(p.j,p)}function Mn(p){Di(p);var E=p.O;E&&typeof E.dispose=="function"&&E.dispose(),p.O=null,Io(p.V),p.g&&(E=p.g,p.g=null,E.abort(),E.dispose())}function xi(p,E){try{var C=p.j;if(C.I!=0&&(C.g==p||Pi(C.h,p))){if(!p.L&&Pi(C.h,p)&&C.I==3){try{var w=C.Ba.g.parse(E)}catch{w=null}if(Array.isArray(w)&&w.length==3){var H=w;if(H[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<p.F)_r(C),Vo(C);else break e;xs(C),xt(18)}}else C.xa=H[1],0<C.xa-C.K&&H[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=wi(m(C.Va,C),6e3));Vi(C.h)<=1&&C.ta&&(C.ta=void 0)}else Bi(C,11)}else if((p.L||C.g==p)&&_r(C),!D(E))for(H=C.Ba.g.parse(E),E=0;E<H.length;E++){let nt=H[E];const _t=nt[0];if(!(_t<=C.K))if(C.K=_t,nt=nt[1],C.I==2)if(nt[0]=="c"){C.M=nt[1],C.ba=nt[2];const Hn=nt[3];Hn!=null&&(C.ka=Hn,C.j.info("VER="+C.ka));const Gi=nt[4];Gi!=null&&(C.za=Gi,C.j.info("SVER="+C.za));const fi=nt[5];fi!=null&&typeof fi=="number"&&fi>0&&(w=1.5*fi,C.O=w,C.j.info("backChannelRequestTimeoutMs_="+w)),w=C;const di=p.g;if(di){const Vs=di.g?di.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vs){var Q=w.h;Q.g||Vs.indexOf("spdy")==-1&&Vs.indexOf("quic")==-1&&Vs.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(wa(Q,Q.h),Q.h=null))}if(w.G){const vr=di.g?di.g.getResponseHeader("X-HTTP-Session-Id"):null;vr&&(w.wa=vr,st(w.J,w.G,vr))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-p.F,C.j.info("Handshake RTT: "+C.T+"ms")),w=C;var ce=p;if(w.na=yu(w,w.L?w.ba:null,w.W),ce.L){Na(w.h,ce);var Le=ce,It=w.O;It&&(Le.H=It),Le.D&&(Di(Le),Mi(Le)),w.g=ce}else du(w);C.i.length>0&&qi(C)}else nt[0]!="stop"&&nt[0]!="close"||Bi(C,7);else C.I==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?Bi(C,7):Oa(C):nt[0]!="noop"&&C.l&&C.l.qa(nt),C.A=0)}}Ii(4)}catch{}}var Pt=class{constructor(p,E){this.g=p,this.map=E}};function Ia(p){this.l=p||10,u.PerformanceNavigationTiming?(p=u.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ra(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Vi(p){return p.h?1:p.g?p.g.size:0}function Pi(p,E){return p.h?p.h==E:p.g?p.g.has(E):!1}function wa(p,E){p.g?p.g.add(E):p.h=E}function Na(p,E){p.h&&p.h==E?p.h=null:p.g&&p.g.has(E)&&p.g.delete(E)}Ia.prototype.cancel=function(){if(this.i=ba(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function ba(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let E=p.i;for(const C of p.g.values())E=E.concat(C.G);return E}return R(p.i)}var ru=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fr(p,E){if(p){p=p.split("&");for(let C=0;C<p.length;C++){const w=p[C].indexOf("=");let H,Q=null;w>=0?(H=p[C].substring(0,w),Q=p[C].substring(w+1)):H=p[C],E(H,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function Dn(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;p instanceof Dn?(this.l=p.l,Xt(this,p.j),this.o=p.o,this.g=p.g,Ro(this,p.u),this.h=p.h,Ma(this,cu(p.i)),this.m=p.m):p&&(E=String(p).match(ru))?(this.l=!1,Xt(this,E[1]||"",!0),this.o=Ui(E[2]||""),this.g=Ui(E[3]||"",!0),Ro(this,E[4]),this.h=Ui(E[5]||"",!0),Ma(this,E[6]||"",!0),this.m=Ui(E[7]||"")):(this.l=!1,this.i=new No(null,this.l))}Dn.prototype.toString=function(){const p=[];var E=this.j;E&&p.push(Rs(E,dr,!0),":");var C=this.g;return(C||E=="file")&&(p.push("//"),(E=this.o)&&p.push(Rs(E,dr,!0),"@"),p.push(Zi(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&p.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&p.push("/"),p.push(Rs(C,C.charAt(0)=="/"?Da:au,!0))),(C=this.i.toString())&&p.push("?",C),(C=this.m)&&p.push("#",Rs(C,lu)),p.join("")},Dn.prototype.resolve=function(p){const E=Ut(this);let C=!!p.j;C?Xt(E,p.j):C=!!p.o,C?E.o=p.o:C=!!p.g,C?E.g=p.g:C=p.u!=null;var w=p.h;if(C)Ro(E,p.u);else if(C=!!p.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var H=E.h.lastIndexOf("/");H!=-1&&(w=E.h.slice(0,H+1)+w)}if(H=w,H==".."||H==".")w="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){w=H.lastIndexOf("/",0)==0,H=H.split("/");const Q=[];for(let ce=0;ce<H.length;){const Le=H[ce++];Le=="."?w&&ce==H.length&&Q.push(""):Le==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),w&&ce==H.length&&Q.push("")):(Q.push(Le),w=!0)}w=Q.join("/")}else w=H}return C?E.h=w:C=p.i.toString()!=="",C?Ma(E,cu(p.i)):C=!!p.m,C&&(E.m=p.m),E};function Ut(p){return new Dn(p)}function Xt(p,E,C){p.j=C?Ui(E,!0):E,p.j&&(p.j=p.j.replace(/:$/,""))}function Ro(p,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);p.u=E}else p.u=null}function Ma(p,E,C){E instanceof No?(p.i=E,pr(p.i,p.l)):(C||(E=Rs(E,wo)),p.i=new No(E,p.l))}function st(p,E,C){p.i.set(E,C)}function Is(p){return st(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function Ui(p,E){return p?E?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Rs(p,E,C){return typeof p=="string"?(p=encodeURI(p).replace(E,En),C&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function En(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var dr=/[#\/\?@]/g,au=/[#\?:]/g,Da=/[#\?]/g,wo=/[#\?@]/g,lu=/#/g;function No(p,E){this.h=this.g=null,this.i=p||null,this.j=!!E}function Sn(p){p.g||(p.g=new Map,p.h=0,p.i&&fr(p.i,function(E,C){p.add(decodeURIComponent(E.replace(/\+/g," ")),C)}))}n=No.prototype,n.add=function(p,E){Sn(this),this.i=null,p=bo(this,p);let C=this.g.get(p);return C||this.g.set(p,C=[]),C.push(E),this.h+=1,this};function uu(p,E){Sn(p),E=bo(p,E),p.g.has(E)&&(p.i=null,p.h-=p.g.get(E).length,p.g.delete(E))}function xa(p,E){return Sn(p),E=bo(p,E),p.g.has(E)}n.forEach=function(p,E){Sn(this),this.g.forEach(function(C,w){C.forEach(function(H){p.call(E,H,w,this)},this)},this)};function Va(p,E){Sn(p);let C=[];if(typeof E=="string")xa(p,E)&&(C=C.concat(p.g.get(bo(p,E))));else for(p=Array.from(p.g.values()),E=0;E<p.length;E++)C=C.concat(p[E]);return C}n.set=function(p,E){return Sn(this),this.i=null,p=bo(this,p),xa(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[E]),this.h+=1,this},n.get=function(p,E){return p?(p=Va(this,p),p.length>0?String(p[0]):E):E};function hr(p,E,C){uu(p,E),C.length>0&&(p.i=null,p.g.set(bo(p,E),R(C)),p.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],E=Array.from(this.g.keys());for(let w=0;w<E.length;w++){var C=E[w];const H=Zi(C);C=Va(this,C);for(let Q=0;Q<C.length;Q++){let ce=H;C[Q]!==""&&(ce+="="+Zi(C[Q])),p.push(ce)}}return this.i=p.join("&")};function cu(p){const E=new No;return E.i=p.i,p.g&&(E.g=new Map(p.g),E.h=p.h),E}function bo(p,E){return E=String(E),p.j&&(E=E.toLowerCase()),E}function pr(p,E){E&&!p.j&&(Sn(p),p.i=null,p.g.forEach(function(C,w){const H=w.toLowerCase();w!=H&&(uu(this,w),hr(this,H,C))},p)),p.j=E}function li(p,E){const C=new si;if(u.Image){const w=new Image;w.onload=v(Gn,C,"TestLoadImage: loaded",!0,E,w),w.onerror=v(Gn,C,"TestLoadImage: error",!1,E,w),w.onabort=v(Gn,C,"TestLoadImage: abort",!1,E,w),w.ontimeout=v(Gn,C,"TestLoadImage: timeout",!1,E,w),u.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=p}else E(!1)}function Pa(p,E){const C=new si,w=new AbortController,H=setTimeout(()=>{w.abort(),Gn(C,"TestPingServer: timeout",!1,E)},1e4);fetch(p,{signal:w.signal}).then(Q=>{clearTimeout(H),Q.ok?Gn(C,"TestPingServer: ok",!0,E):Gn(C,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(H),Gn(C,"TestPingServer: error",!1,E)})}function Gn(p,E,C,w,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),w(C)}catch{}}function Mo(){this.g=new _s}function Li(p){this.i=p.Sb||null,this.h=p.ab||!1}T(Li,vs),Li.prototype.g=function(){return new ws(this.i,this.h)};function ws(p,E){Ee.call(this),this.H=p,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(ws,Ee),n=ws.prototype,n.open=function(p,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=E,this.readyState=1,ui(this)},n.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(E.body=p),(this.H||u).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Do(this)),this.readyState=0},n.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,ui(this)),this.g&&(this.readyState=3,ui(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;mr(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function mr(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}n.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var E=p.value?p.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!p.done}))&&(this.response=this.responseText+=E)}p.done?Do(this):ui(this),this.readyState==3&&mr(this)}},n.Oa=function(p){this.g&&(this.response=this.responseText=p,Do(this))},n.Na=function(p){this.g&&(this.response=p,Do(this))},n.ga=function(){this.g&&Do(this)};function Do(p){p.readyState=4,p.l=null,p.j=null,p.B=null,ui(p)}n.setRequestHeader=function(p,E){this.A.append(p,E)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],E=this.h.entries();for(var C=E.next();!C.done;)C=C.value,p.push(C[0]+": "+C[1]),C=E.next();return p.join(`\r
`)};function ui(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(ws.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Fn(p){let E="";return Ne(p,function(C,w){E+=w,E+=":",E+=C,E+=`\r
`}),E}function Ns(p,E,C){e:{for(w in C){var w=!1;break e}w=!0}w||(C=Fn(C),typeof p=="string"?C!=null&&Zi(C):st(p,E,C))}function lt(p){Ee.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(lt,Ee);var Oi=/^https?$/i,Ua=["POST","PUT"];n=lt.prototype,n.Fa=function(p){this.H=p},n.ea=function(p,E,C,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);E=E?E.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ca.g(),this.g.onreadystatechange=S(m(this.Ca,this));try{this.B=!0,this.g.open(E,String(p),!0),this.B=!1}catch(Q){bs(this,Q);return}if(p=C||"",C=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var H in w)C.set(H,w[H]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Q of w.keys())C.set(Q,w.get(Q));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(C.keys()).find(Q=>Q.toLowerCase()=="content-type"),H=u.FormData&&p instanceof u.FormData,!(Array.prototype.indexOf.call(Ua,E,void 0)>=0)||w||H||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ce]of C)this.g.setRequestHeader(Q,ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(Q){bs(this,Q)}};function bs(p,E){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=E,p.o=5,La(p),ji(p)}function La(p){p.A||(p.A=!0,qe(p,"complete"),qe(p,"error"))}n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,qe(this,"complete"),qe(this,"abort"),ji(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ji(this,!0)),lt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ms(this):this.Xa())},n.Xa=function(){Ms(this)};function Ms(p){if(p.h&&typeof l<"u"){if(p.v&&ci(p)==4)setTimeout(p.Ca.bind(p),0);else if(qe(p,"readystatechange"),ci(p)==4){p.h=!1;try{const Q=p.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var C;if(!(C=E)){var w;if(w=Q===0){let ce=String(p.D).match(ru)[1]||null;!ce&&u.self&&u.self.location&&(ce=u.self.location.protocol.slice(0,-1)),w=!Oi.test(ce?ce.toLowerCase():"")}C=w}if(C)qe(p,"complete"),qe(p,"success");else{p.o=6;try{var H=ci(p)>2?p.g.statusText:""}catch{H=""}p.l=H+" ["+p.ca()+"]",La(p)}}finally{ji(p)}}}}function ji(p,E){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const C=p.g;p.g=null,E||qe(p,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ci(p){return p.g?p.g.readyState:0}n.ca=function(){try{return ci(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(p){if(this.g){var E=this.g.responseText;return p&&E.indexOf(p)==0&&(E=E.substring(p.length)),lr(E)}};function en(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function eo(p){const E={};p=(p.g&&ci(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<p.length;w++){if(D(p[w]))continue;var C=iu(p[w]);const H=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const Q=E[H]||[];E[H]=Q,Q.push(C)}be(E,function(w){return w.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ki(p,E,C){return C&&C.internalChannelParams&&C.internalChannelParams[p]||E}function xo(p){this.za=0,this.i=[],this.j=new si,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ki("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ki("baseRetryDelayMs",5e3,p),this.Za=ki("retryDelaySeedMs",1e4,p),this.Ta=ki("forwardChannelMaxRetries",2,p),this.va=ki("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new Ia(p&&p.concurrentRequestLimit),this.Ba=new Mo,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=xo.prototype,n.ka=8,n.I=1,n.connect=function(p,E,C,w){xt(0),this.W=p,this.H=E||{},C&&w!==void 0&&(this.H.OSID=C,this.H.OAID=w),this.F=this.X,this.J=yu(this,null,this.W),qi(this)};function Oa(p){if(gr(p),p.I==3){var E=p.V++,C=Ut(p.J);if(st(C,"SID",p.M),st(C,"RID",E),st(C,"TYPE","terminate"),Ds(p,C),E=new ri(p,p.j,E),E.M=2,E.A=Is(Ut(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(E.A.toString(),"")}catch{}!C&&u.Image&&(new Image().src=E.A,C=!0),C||(E.g=_u(E.j,null),E.g.ea(E.A)),E.F=Date.now(),Mi(E)}gu(p)}function Vo(p){p.g&&(qa(p),p.g.cancel(),p.g=null)}function gr(p){Vo(p),p.v&&(u.clearTimeout(p.v),p.v=null),_r(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&u.clearTimeout(p.m),p.m=null)}function qi(p){if(!Ra(p.h)&&!p.m){p.m=!0;var E=p.Ea;W||b(),F||(W(),F=!0),M.add(E,p),p.D=0}}function yr(p,E){return Vi(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=E.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=wi(m(p.Ea,p,E),mu(p,p.D)),p.D++,!0)}n.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const H=new ri(this,this.j,p);let Q=this.o;if(this.U&&(Q?(Q=L(Q),ue(Q,this.U)):Q=this.U),this.u!==null||this.R||(H.J=Q,Q=null),this.S)e:{for(var E=0,C=0;C<this.i.length;C++){t:{var w=this.i[C];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(E+=w,E>4096){E=C;break e}if(E===4096||C===this.i.length-1){E=C+1;break e}}E=1e3}else E=1e3;E=fu(this,H,E),C=Ut(this.J),st(C,"RID",p),st(C,"CVER",22),this.G&&st(C,"X-HTTP-Session-Id",this.G),Ds(this,C),Q&&(this.R?E="headers="+Zi(Fn(Q))+"&"+E:this.u&&Ns(C,this.u,Q)),wa(this.h,H),this.Ra&&st(C,"TYPE","init"),this.S?(st(C,"$req",E),st(C,"SID","null"),H.U=!0,bi(H,C,null)):bi(H,C,E),this.I=2}}else this.I==3&&(p?ka(this,p):this.i.length==0||Ra(this.h)||ka(this))};function ka(p,E){var C;E?C=E.l:C=p.V++;const w=Ut(p.J);st(w,"SID",p.M),st(w,"RID",C),st(w,"AID",p.K),Ds(p,w),p.u&&p.o&&Ns(w,p.u,p.o),C=new ri(p,p.j,C,p.D+1),p.u===null&&(C.J=p.o),E&&(p.i=E.G.concat(p.i)),E=fu(p,C,1e3),C.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),wa(p.h,C),bi(C,w,E)}function Ds(p,E){p.H&&Ne(p.H,function(C,w){st(E,w,C)}),p.l&&Ne({},function(C,w){st(E,w,C)})}function fu(p,E,C){C=Math.min(p.i.length,C);const w=p.l?m(p.l.Ka,p.l,p):null;e:{var H=p.i;let Le=-1;for(;;){const It=["count="+C];Le==-1?C>0?(Le=H[0].g,It.push("ofs="+Le)):Le=0:It.push("ofs="+Le);let nt=!0;for(let _t=0;_t<C;_t++){var Q=H[_t].g;const Hn=H[_t].map;if(Q-=Le,Q<0)Le=Math.max(0,H[_t].g-100),nt=!1;else try{Q="req"+Q+"_"||"";try{var ce=Hn instanceof Map?Hn:Object.entries(Hn);for(const[Gi,fi]of ce){let di=fi;d(fi)&&(di=oi(fi)),It.push(Q+Gi+"="+encodeURIComponent(di))}}catch(Gi){throw It.push(Q+"type="+encodeURIComponent("_badmap")),Gi}}catch{w&&w(Hn)}}if(nt){ce=It.join("&");break e}}ce=void 0}return p=p.i.splice(0,C),E.G=p,ce}function du(p){if(!p.g&&!p.v){p.Y=1;var E=p.Da;W||b(),F||(W(),F=!0),M.add(E,p),p.A=0}}function xs(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=wi(m(p.Da,p),mu(p,p.A)),p.A++,!0)}n.Da=function(){if(this.v=null,hu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=wi(m(this.Wa,this),p)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),Vo(this),hu(this))};function qa(p){p.B!=null&&(u.clearTimeout(p.B),p.B=null)}function hu(p){p.g=new ri(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var E=Ut(p.na);st(E,"RID","rpc"),st(E,"SID",p.M),st(E,"AID",p.K),st(E,"CI",p.F?"0":"1"),!p.F&&p.ia&&st(E,"TO",p.ia),st(E,"TYPE","xmlhttp"),Ds(p,E),p.u&&p.o&&Ns(E,p.u,p.o),p.O&&(p.g.H=p.O);var C=p.g;p=p.ba,C.M=1,C.A=Is(Ut(E)),C.u=null,C.R=!0,ur(C,p)}n.Va=function(){this.C!=null&&(this.C=null,Vo(this),xs(this),xt(19))};function _r(p){p.C!=null&&(u.clearTimeout(p.C),p.C=null)}function pu(p,E){var C=null;if(p.g==E){_r(p),qa(p),p.g=null;var w=2}else if(Pi(p.h,E))C=E.G,Na(p.h,E),w=1;else return;if(p.I!=0){if(E.o)if(w==1){C=E.u?E.u.length:0,E=Date.now()-E.F;var H=p.D;w=Ci(),qe(w,new Ri(w,C)),qi(p)}else du(p);else if(H=E.m,H==3||H==0&&E.X>0||!(w==1&&yr(p,E)||w==2&&xs(p)))switch(C&&C.length>0&&(E=p.h,E.i=E.i.concat(C)),H){case 1:Bi(p,5);break;case 4:Bi(p,10);break;case 3:Bi(p,6);break;default:Bi(p,2)}}}function mu(p,E){let C=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(C*=2),C*E}function Bi(p,E){if(p.j.info("Error code "+E),E==2){var C=m(p.bb,p),w=p.Ua;const H=!w;w=new Dn(w||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Xt(w,"https"),Is(w),H?li(w.toString(),C):Pa(w.toString(),C)}else xt(2);p.I=0,p.l&&p.l.pa(E),gu(p),gr(p)}n.bb=function(p){p?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function gu(p){if(p.I=0,p.ja=[],p.l){const E=ba(p.h);(E.length!=0||p.i.length!=0)&&(x(p.ja,E),x(p.ja,p.i),p.h.i.length=0,R(p.i),p.i.length=0),p.l.oa()}}function yu(p,E,C){var w=C instanceof Dn?Ut(C):new Dn(C);if(w.g!="")E&&(w.g=E+"."+w.g),Ro(w,w.u);else{var H=u.location;w=H.protocol,E=E?E+"."+H.hostname:H.hostname,H=+H.port;const Q=new Dn(null);w&&Xt(Q,w),E&&(Q.g=E),H&&Ro(Q,H),C&&(Q.h=C),w=Q}return C=p.G,E=p.wa,C&&E&&st(w,C,E),st(w,"VER",p.ka),Ds(p,w),w}function _u(p,E,C){if(E&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=p.Aa&&!p.ma?new lt(new Li({ab:C})):new lt(p.ma),E.Fa(p.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function vu(){}n=vu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Po(){}Po.prototype.g=function(p,E){return new mn(p,E)};function mn(p,E){Ee.call(this),this.g=new xo(E),this.l=p,this.h=E&&E.messageUrlParams||null,p=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(p?p["X-WebChannel-Content-Type"]=E.messageContentType:p={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(p?p["X-WebChannel-Client-Profile"]=E.sa:p={"X-WebChannel-Client-Profile":E.sa}),this.g.U=p,(p=E&&E.Qb)&&!D(p)&&(this.g.u=p),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!D(E)&&(this.g.G=E,p=this.h,p!==null&&E in p&&(p=this.h,E in p&&delete p[E])),this.j=new to(this)}T(mn,Ee),mn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Oa(this.g)},mn.prototype.o=function(p){var E=this.g;if(typeof p=="string"){var C={};C.__data__=p,p=C}else this.v&&(C={},C.__data__=oi(p),p=C);E.i.push(new Pt(E.Ya++,p)),E.I==3&&qi(E)},mn.prototype.N=function(){this.g.l=null,delete this.j,Oa(this.g),delete this.g,mn.Z.N.call(this)};function Tu(p){Dt.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var E=p.__sm__;if(E){e:{for(const C in E){p=C;break e}p=void 0}(this.i=p)&&(p=this.i,E=E!==null&&p in E?E[p]:void 0),this.data=E}else this.data=p}T(Tu,Dt);function Eu(){St.call(this),this.status=1}T(Eu,St);function to(p){this.g=p}T(to,vu),to.prototype.ra=function(){qe(this.g,"a")},to.prototype.qa=function(p){qe(this.g,new Tu(p))},to.prototype.pa=function(p){qe(this.g,new Eu)},to.prototype.oa=function(){qe(this.g,"b")},Po.prototype.createWebChannel=Po.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,nE=function(){return new Po},tE=function(){return Ci()},eE=Ge,$h={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},As.NO_ERROR=0,As.TIMEOUT=8,As.HTTP_ERROR=6,Lc=As,Aa.COMPLETE="complete",jT=Aa,Ts.EventType=Tn,Tn.OPEN="a",Tn.CLOSE="b",Tn.ERROR="c",Tn.MESSAGE="d",Ee.prototype.listen=Ee.prototype.J,wl=Ts,lt.prototype.listenOnce=lt.prototype.K,lt.prototype.getLastError=lt.prototype.Ha,lt.prototype.getLastErrorCode=lt.prototype.ya,lt.prototype.getStatus=lt.prototype.ca,lt.prototype.getResponseJson=lt.prototype.La,lt.prototype.getResponseText=lt.prototype.la,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Fa,ZT=lt}).apply(typeof Ic<"u"?Ic:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ma="12.9.0";function nw(n){ma=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new YT("@firebase/firestore");function Xr(){return js.logLevel}function me(n,...e){if(js.logLevel<=Ze.DEBUG){const t=e.map(Vp);js.debug(`Firestore (${ma}): ${n}`,...t)}}function To(n,...e){if(js.logLevel<=Ze.ERROR){const t=e.map(Vp);js.error(`Firestore (${ma}): ${n}`,...t)}}function er(n,...e){if(js.logLevel<=Ze.WARN){const t=e.map(Vp);js.warn(`Firestore (${ma}): ${n}`,...t)}}function Vp(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(n,e,t){let o="Unexpected state";typeof e=="string"?o=e:t=e,iE(n,o,t)}function iE(n,e,t){let o=`FIRESTORE (${ma}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{o+=" CONTEXT: "+JSON.stringify(t)}catch{o+=" CONTEXT: "+t}throw To(o),new Error(o)}function ot(n,e,t,o){let r="Unexpected state";typeof t=="string"?r=t:o=t,n||iE(e,r,o)}function Pe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends pa{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(dn.UNAUTHENTICATED)))}shutdown(){}}class ow{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class sw{constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ot(this.o===void 0,42304);let o=this.i;const r=g=>this.i!==o?(o=this.i,t(g)):Promise.resolve();let l=new _o;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new _o,e.enqueueRetryable((()=>r(this.currentUser)))};const u=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await r(this.currentUser)}))},d=g=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>d(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new _o)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((o=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(ot(typeof o.accessToken=="string",31837,{l:o}),new oE(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ot(e===null||typeof e=="string",2055,{h:e}),new dn(e)}}class rw{constructor(e,t,o){this.P=e,this.T=t,this.I=o,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class aw{constructor(e,t,o){this.P=e,this.T=t,this.I=o}getToken(){return Promise.resolve(new rw(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(dn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class uv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lw{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qR(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ot(this.o===void 0,3512);const o=l=>{l.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,me("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>o(l)))};const r=l=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>r(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?r(l):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new uv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ot(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new uv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let o=0;o<n;o++)t[o]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const r=uw(40);for(let l=0;l<r.length;++l)o.length<20&&r[l]<t&&(o+=e.charAt(r[l]%62))}return o}}function Je(n,e){return n<e?-1:n>e?1:0}function Wh(n,e){const t=Math.min(n.length,e.length);for(let o=0;o<t;o++){const r=n.charAt(o),l=e.charAt(o);if(r!==l)return Oh(r)===Oh(l)?Je(r,l):Oh(r)?1:-1}return Je(n.length,e.length)}const cw=55296,fw=57343;function Oh(n){const e=n.charCodeAt(0);return e>=cw&&e<=fw}function ua(n,e,t){return n.length===e.length&&n.every(((o,r)=>t(o,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="__name__";class Ji{constructor(e,t,o){t===void 0?t=0:t>e.length&&Re(637,{offset:t,range:e.length}),o===void 0?o=e.length-t:o>e.length-t&&Re(1746,{length:o,range:e.length-t}),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return Ji.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ji?e.forEach((o=>{t.push(o)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let r=0;r<o;r++){const l=Ji.compareSegments(e.get(r),t.get(r));if(l!==0)return l}return Je(e.length,t.length)}static compareSegments(e,t){const o=Ji.isNumericId(e),r=Ji.isNumericId(t);return o&&!r?-1:!o&&r?1:o&&r?Ji.extractNumericId(e).compare(Ji.extractNumericId(t)):Wh(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ls.fromString(e.substring(4,e.length-2))}}class ht extends Ji{construct(e,t,o){return new ht(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new he(oe.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter((r=>r.length>0)))}return new ht(t)}static emptyPath(){return new ht([])}}const dw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class an extends Ji{construct(e,t,o){return new an(e,t,o)}static isValidIdentifier(e){return dw.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),an.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cv}static keyField(){return new an([cv])}static fromServerFormat(e){const t=[];let o="",r=0;const l=()=>{if(o.length===0)throw new he(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let u=!1;for(;r<e.length;){const d=e[r];if(d==="\\"){if(r+1===e.length)throw new he(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[r+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new he(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=g,r+=2}else d==="`"?(u=!u,r++):d!=="."||u?(o+=d,r++):(l(),r++)}if(l(),u)throw new he(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new an(t)}static emptyPath(){return new an([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(ht.fromString(e))}static fromName(e){return new Te(ht.fromString(e).popFirst(5))}static empty(){return new Te(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new ht(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(n,e,t){if(!t)throw new he(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function hw(n,e,t,o){if(e===!0&&o===!0)throw new he(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function fv(n){if(!Te.isDocumentKey(n))throw new he(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function dv(n){if(Te.isDocumentKey(n))throw new he(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function rE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ff(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Re(12329,{type:typeof n})}function cs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ff(n);throw new he(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ql(n,e){if(!rE(n))throw new he(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const o in e)if(e[o]){const r=e[o].typeString,l="value"in e[o]?{value:e[o].value}:void 0;if(!(o in n)){t=`JSON missing required field: '${o}'`;break}const u=n[o];if(r&&typeof u!==r){t=`JSON field '${o}' must be a ${r}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${o}' field to equal '${l.value}'`;break}}if(t)throw new he(oe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv=-62135596800,pv=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor((e-1e3*t)*pv);return new gt(t,o)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<hv)throw new he(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pv}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ql(e,gt._jsonSchema))return new gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-hv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:Ft("string",gt._jsonSchemaVersion),seconds:Ft("number"),nanoseconds:Ft("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new gt(0,0))}static max(){return new xe(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql=-1;function pw(n,e){const t=n.toTimestamp().seconds,o=n.toTimestamp().nanoseconds+1,r=xe.fromTimestamp(o===1e9?new gt(t+1,0):new gt(t,o));return new fs(r,Te.empty(),e)}function mw(n){return new fs(n.readTime,n.key,ql)}class fs{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new fs(xe.min(),Te.empty(),ql)}static max(){return new fs(xe.max(),Te.empty(),ql)}}function gw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(n.documentKey,e.documentKey),t!==0?t:Je(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _w{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ga(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==yw)throw n;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re(((o,r)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(o,r)},this.catchCallback=l=>{this.wrapFailure(t,l).next(o,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):re.reject(t)}static resolve(e){return new re(((t,o)=>{t(e)}))}static reject(e){return new re(((t,o)=>{o(e)}))}static waitFor(e){return new re(((t,o)=>{let r=0,l=0,u=!1;e.forEach((d=>{++r,d.next((()=>{++l,u&&l===r&&t()}),(g=>o(g)))})),u=!0,l===r&&t()}))}static or(e){let t=re.resolve(!1);for(const o of e)t=t.next((r=>r?re.resolve(r):o()));return t}static forEach(e,t){const o=[];return e.forEach(((r,l)=>{o.push(t.call(this,r,l))})),this.waitFor(o)}static mapArray(e,t){return new re(((o,r)=>{const l=e.length,u=new Array(l);let d=0;for(let g=0;g<l;g++){const m=g;t(e[m]).next((v=>{u[m]=v,++d,d===l&&o(u)}),(v=>r(v)))}}))}static doWhile(e,t){return new re(((o,r)=>{const l=()=>{e()===!0?t().next((()=>{l()}),r):o()};l()}))}}function vw(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ya(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>t.writeSequenceNumber(o))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}df.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up=-1;function hf(n){return n==null}function Qc(n){return n===0&&1/n==-1/0}function Tw(n){return typeof n=="number"&&Number.isInteger(n)&&!Qc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="";function Ew(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=mv(e)),e=Sw(n.get(t),e);return mv(e)}function Sw(n,e){let t=e;const o=n.length;for(let r=0;r<o;r++){const l=n.charAt(r);switch(l){case"\0":t+="";break;case aE:t+="";break;default:t+=l}}return t}function mv(n){return n+aE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function nr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function lE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,t){this.comparator=e,this.root=t||rn.EMPTY}insert(e,t){return new Et(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(o===0)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const r=this.comparator(e,o.key);if(r===0)return t+o.left.size;r<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,o)=>(e(t,o),!1)))}toString(){const e=[];return this.inorderTraversal(((t,o)=>(e.push(`${t}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rc(this.root,e,this.comparator,!0)}}class Rc{constructor(e,t,o,r){this.isReverse=r,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?o(e.key,t):1,t&&r&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rn{constructor(e,t,o,r,l){this.key=e,this.value=t,this.color=o??rn.RED,this.left=r??rn.EMPTY,this.right=l??rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,r,l){return new rn(e??this.key,t??this.value,o??this.color,r??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let r=this;const l=o(e,r.key);return r=l<0?r.copy(null,null,null,r.left.insert(e,t,o),null):l===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,o)),r.fixUp()}removeMin(){if(this.left.isEmpty())return rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return rn.EMPTY;o=r.right.min(),r=r.copy(o.key,o.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Re(27949);return e+(this.isRed()?0:1)}}rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw Re(57766)}get value(){throw Re(16141)}get color(){throw Re(16727)}get left(){throw Re(29726)}get right(){throw Re(36894)}copy(e,t,o,r,l){return this}insert(e,t,o){return new rn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,o)=>(e(t),!1)))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const r=o.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let o;for(o=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new yv(this.data.getIterator())}getIteratorFrom(e){return new yv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((o=>{t=t.add(o)})),t}isEqual(e){if(!(e instanceof Yt)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=o.getNext().key;if(this.comparator(r,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Yt(this.comparator);return t.data=e,t}}class yv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this.fields=e,e.sort(an.comparator)}static empty(){return new gi([])}unionWith(e){let t=new Yt(an.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new gi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ua(this.fields,e.fields,((t,o)=>t.isEqual(o)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new uE("Invalid base64 string: "+l):l}})(e);return new ln(t)}static fromUint8Array(e){const t=(function(r){let l="";for(let u=0;u<r.length;++u)l+=String.fromCharCode(r[u]);return l})(e);return new ln(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const o=new Uint8Array(t.length);for(let r=0;r<t.length;r++)o[r]=t.charCodeAt(r);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const Aw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ds(n){if(ot(!!n,39018),typeof n=="string"){let e=0;const t=Aw.exec(n);if(ot(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const o=new Date(n);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Nt(n.seconds),nanos:Nt(n.nanos)}}function Nt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function hs(n){return typeof n=="string"?ln.fromBase64String(n):ln.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="server_timestamp",fE="__type__",dE="__previous_value__",hE="__local_write_time__";function Lp(n){var t,o;return((o=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[fE])==null?void 0:o.stringValue)===cE}function pf(n){const e=n.mapValue.fields[dE];return Lp(e)?pf(e):e}function Bl(n){const e=ds(n.mapValue.fields[hE].timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e,t,o,r,l,u,d,g,m,v,T){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=r,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=m,this.isUsingEmulator=v,this.apiKey=T}}const Xc="(default)";class Gl{constructor(e,t){this.projectId=e,this.database=t||Xc}static empty(){return new Gl("","")}get isDefaultDatabase(){return this.database===Xc}isEqual(e){return e instanceof Gl&&e.projectId===this.projectId&&e.database===this.database}}function Iw(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new he(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gl(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="__type__",Rw="__max__",wc={mapValue:{}},mE="__vector__",$c="value";function ps(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Lp(n)?4:Nw(n)?9007199254740991:ww(n)?10:11:Re(28295,{value:n})}function Wi(n,e){if(n===e)return!0;const t=ps(n);if(t!==ps(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Bl(n).isEqual(Bl(e));case 3:return(function(r,l){if(typeof r.timestampValue=="string"&&typeof l.timestampValue=="string"&&r.timestampValue.length===l.timestampValue.length)return r.timestampValue===l.timestampValue;const u=ds(r.timestampValue),d=ds(l.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,l){return hs(r.bytesValue).isEqual(hs(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,l){return Nt(r.geoPointValue.latitude)===Nt(l.geoPointValue.latitude)&&Nt(r.geoPointValue.longitude)===Nt(l.geoPointValue.longitude)})(n,e);case 2:return(function(r,l){if("integerValue"in r&&"integerValue"in l)return Nt(r.integerValue)===Nt(l.integerValue);if("doubleValue"in r&&"doubleValue"in l){const u=Nt(r.doubleValue),d=Nt(l.doubleValue);return u===d?Qc(u)===Qc(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return ua(n.arrayValue.values||[],e.arrayValue.values||[],Wi);case 10:case 11:return(function(r,l){const u=r.mapValue.fields||{},d=l.mapValue.fields||{};if(gv(u)!==gv(d))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(d[g]===void 0||!Wi(u[g],d[g])))return!1;return!0})(n,e);default:return Re(52216,{left:n})}}function Fl(n,e){return(n.values||[]).find((t=>Wi(t,e)))!==void 0}function ca(n,e){if(n===e)return 0;const t=ps(n),o=ps(e);if(t!==o)return Je(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return Je(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const d=Nt(l.integerValue||l.doubleValue),g=Nt(u.integerValue||u.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1})(n,e);case 3:return _v(n.timestampValue,e.timestampValue);case 4:return _v(Bl(n),Bl(e));case 5:return Wh(n.stringValue,e.stringValue);case 6:return(function(l,u){const d=hs(l),g=hs(u);return d.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const d=l.split("/"),g=u.split("/");for(let m=0;m<d.length&&m<g.length;m++){const v=Je(d[m],g[m]);if(v!==0)return v}return Je(d.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const d=Je(Nt(l.latitude),Nt(u.latitude));return d!==0?d:Je(Nt(l.longitude),Nt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return vv(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var S,R,x,O;const d=l.fields||{},g=u.fields||{},m=(S=d[$c])==null?void 0:S.arrayValue,v=(R=g[$c])==null?void 0:R.arrayValue,T=Je(((x=m==null?void 0:m.values)==null?void 0:x.length)||0,((O=v==null?void 0:v.values)==null?void 0:O.length)||0);return T!==0?T:vv(m,v)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===wc.mapValue&&u===wc.mapValue)return 0;if(l===wc.mapValue)return 1;if(u===wc.mapValue)return-1;const d=l.fields||{},g=Object.keys(d),m=u.fields||{},v=Object.keys(m);g.sort(),v.sort();for(let T=0;T<g.length&&T<v.length;++T){const S=Wh(g[T],v[T]);if(S!==0)return S;const R=ca(d[g[T]],m[v[T]]);if(R!==0)return R}return Je(g.length,v.length)})(n.mapValue,e.mapValue);default:throw Re(23264,{he:t})}}function _v(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Je(n,e);const t=ds(n),o=ds(e),r=Je(t.seconds,o.seconds);return r!==0?r:Je(t.nanos,o.nanos)}function vv(n,e){const t=n.values||[],o=e.values||[];for(let r=0;r<t.length&&r<o.length;++r){const l=ca(t[r],o[r]);if(l)return l}return Je(t.length,o.length)}function fa(n){return Zh(n)}function Zh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const o=ds(t);return`time(${o.seconds},${o.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return hs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Te.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let o="[",r=!0;for(const l of t.values||[])r?r=!1:o+=",",o+=Zh(l);return o+"]"})(n.arrayValue):"mapValue"in n?(function(t){const o=Object.keys(t.fields||{}).sort();let r="{",l=!0;for(const u of o)l?l=!1:r+=",",r+=`${u}:${Zh(t.fields[u])}`;return r+"}"})(n.mapValue):Re(61005,{value:n})}function Oc(n){switch(ps(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pf(n);return e?16+Oc(e):16;case 5:return 2*n.stringValue.length;case 6:return hs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((r,l)=>r+Oc(l)),0)})(n.arrayValue);case 10:case 11:return(function(o){let r=0;return nr(o.fields,((l,u)=>{r+=l.length+Oc(u)})),r})(n.mapValue);default:throw Re(13486,{value:n})}}function Tv(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function jh(n){return!!n&&"integerValue"in n}function Op(n){return!!n&&"arrayValue"in n}function Ev(n){return!!n&&"nullValue"in n}function Sv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function kc(n){return!!n&&"mapValue"in n}function ww(n){var t,o;return((o=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[pE])==null?void 0:o.stringValue)===mE}function Vl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return nr(n.mapValue.fields,((t,o)=>e.mapValue.fields[t]=Vl(o))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vl(n.arrayValue.values[t]);return e}return{...n}}function Nw(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Rw}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.value=e}static empty(){return new Zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!kc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vl(t)}setAll(e){let t=an.emptyPath(),o={},r=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const g=this.getFieldsMap(t);this.applyChanges(g,o,r),o={},r=[],t=d.popLast()}u?o[d.lastSegment()]=Vl(u):r.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,o,r)}delete(e){const t=this.field(e.popLast());kc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let r=t.mapValue.fields[e.get(o)];kc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,o){nr(t,((r,l)=>e[r]=l));for(const r of o)delete e[r]}clone(){return new Zn(Vl(this.value))}}function gE(n){const e=[];return nr(n.fields,((t,o)=>{const r=new an([t]);if(kc(o)){const l=gE(o.mapValue).fields;if(l.length===0)e.push(r);else for(const u of l)e.push(r.child(u))}else e.push(r)})),new gi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,t,o,r,l,u,d){this.key=e,this.documentType=t,this.version=o,this.readTime=r,this.createTime=l,this.data=u,this.documentState=d}static newInvalidDocument(e){return new hn(e,0,xe.min(),xe.min(),xe.min(),Zn.empty(),0)}static newFoundDocument(e,t,o,r){return new hn(e,1,t,xe.min(),o,r,0)}static newNoDocument(e,t){return new hn(e,2,t,xe.min(),xe.min(),Zn.empty(),0)}static newUnknownDocument(e,t){return new hn(e,3,t,xe.min(),xe.min(),Zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,t){this.position=e,this.inclusive=t}}function Av(n,e,t){let o=0;for(let r=0;r<n.position.length;r++){const l=e[r],u=n.position[r];if(l.field.isKeyField()?o=Te.comparator(Te.fromName(u.referenceValue),t.key):o=ca(u,t.data.field(l.field)),l.dir==="desc"&&(o*=-1),o!==0)break}return o}function Cv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Wi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,t="asc"){this.field=e,this.dir=t}}function bw(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{}class Gt extends yE{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,o):new Dw(e,t,o):t==="array-contains"?new Pw(e,o):t==="in"?new Uw(e,o):t==="not-in"?new Lw(e,o):t==="array-contains-any"?new Ow(e,o):new Gt(e,t,o)}static createKeyFieldInFilter(e,t,o){return t==="in"?new xw(e,o):new Vw(e,o)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ca(t,this.value)):t!==null&&ps(this.value)===ps(t)&&this.matchesComparison(ca(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ti extends yE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ti(e,t)}matches(e){return _E(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function _E(n){return n.op==="and"}function vE(n){return Mw(n)&&_E(n)}function Mw(n){for(const e of n.filters)if(e instanceof Ti)return!1;return!0}function ep(n){if(n instanceof Gt)return n.field.canonicalString()+n.op.toString()+fa(n.value);if(vE(n))return n.filters.map((e=>ep(e))).join(",");{const e=n.filters.map((t=>ep(t))).join(",");return`${n.op}(${e})`}}function TE(n,e){return n instanceof Gt?(function(o,r){return r instanceof Gt&&o.op===r.op&&o.field.isEqual(r.field)&&Wi(o.value,r.value)})(n,e):n instanceof Ti?(function(o,r){return r instanceof Ti&&o.op===r.op&&o.filters.length===r.filters.length?o.filters.reduce(((l,u,d)=>l&&TE(u,r.filters[d])),!0):!1})(n,e):void Re(19439)}function EE(n){return n instanceof Gt?(function(t){return`${t.field.canonicalString()} ${t.op} ${fa(t.value)}`})(n):n instanceof Ti?(function(t){return t.op.toString()+" {"+t.getFilters().map(EE).join(" ,")+"}"})(n):"Filter"}class Dw extends Gt{constructor(e,t,o){super(e,t,o),this.key=Te.fromName(o.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class xw extends Gt{constructor(e,t){super(e,"in",t),this.keys=SE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Vw extends Gt{constructor(e,t){super(e,"not-in",t),this.keys=SE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function SE(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((o=>Te.fromName(o.referenceValue)))}class Pw extends Gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Op(t)&&Fl(t.arrayValue,this.value)}}class Uw extends Gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Fl(this.value.arrayValue,t)}}class Lw extends Gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Fl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Fl(this.value.arrayValue,t)}}class Ow extends Gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Op(t)||!t.arrayValue.values)&&t.arrayValue.values.some((o=>Fl(this.value.arrayValue,o)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e,t=null,o=[],r=[],l=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=r,this.limit=l,this.startAt=u,this.endAt=d,this.Te=null}}function Iv(n,e=null,t=[],o=[],r=null,l=null,u=null){return new kw(n,e,t,o,r,l,u)}function kp(n){const e=Pe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((o=>ep(o))).join(","),t+="|ob:",t+=e.orderBy.map((o=>(function(l){return l.field.canonicalString()+l.dir})(o))).join(","),hf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((o=>fa(o))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((o=>fa(o))).join(",")),e.Te=t}return e.Te}function qp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!bw(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!TE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Cv(n.startAt,e.startAt)&&Cv(n.endAt,e.endAt)}function tp(n){return Te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,t=null,o=[],r=[],l=null,u="F",d=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=r,this.limit=l,this.limitType=u,this.startAt=d,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function qw(n,e,t,o,r,l,u,d){return new _a(n,e,t,o,r,l,u,d)}function Bp(n){return new _a(n)}function Rv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Bw(n){return Te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function AE(n){return n.collectionGroup!==null}function Pl(n){const e=Pe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Yt(an.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Hl(l,o))})),t.has(an.keyField().canonicalString())||e.Ie.push(new Hl(an.keyField(),o))}return e.Ie}function Ki(n){const e=Pe(n);return e.Ee||(e.Ee=Gw(e,Pl(n))),e.Ee}function Gw(n,e){if(n.limitType==="F")return Iv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const l=r.dir==="desc"?"asc":"desc";return new Hl(r.field,l)}));const t=n.endAt?new Wc(n.endAt.position,n.endAt.inclusive):null,o=n.startAt?new Wc(n.startAt.position,n.startAt.inclusive):null;return Iv(n.path,n.collectionGroup,e,n.filters,n.limit,t,o)}}function np(n,e){const t=n.filters.concat([e]);return new _a(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Fw(n,e){const t=n.explicitOrderBy.concat([e]);return new _a(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function ip(n,e,t){return new _a(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function mf(n,e){return qp(Ki(n),Ki(e))&&n.limitType===e.limitType}function CE(n){return`${kp(Ki(n))}|lt:${n.limitType}`}function $r(n){return`Query(target=${(function(t){let o=t.path.canonicalString();return t.collectionGroup!==null&&(o+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(o+=`, filters: [${t.filters.map((r=>EE(r))).join(", ")}]`),hf(t.limit)||(o+=", limit: "+t.limit),t.orderBy.length>0&&(o+=`, orderBy: [${t.orderBy.map((r=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(r))).join(", ")}]`),t.startAt&&(o+=", startAt: ",o+=t.startAt.inclusive?"b:":"a:",o+=t.startAt.position.map((r=>fa(r))).join(",")),t.endAt&&(o+=", endAt: ",o+=t.endAt.inclusive?"a:":"b:",o+=t.endAt.position.map((r=>fa(r))).join(",")),`Target(${o})`})(Ki(n))}; limitType=${n.limitType})`}function gf(n,e){return e.isFoundDocument()&&(function(o,r){const l=r.key.path;return o.collectionGroup!==null?r.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(l):Te.isDocumentKey(o.path)?o.path.isEqual(l):o.path.isImmediateParentOf(l)})(n,e)&&(function(o,r){for(const l of Pl(o))if(!l.field.isKeyField()&&r.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(o,r){for(const l of o.filters)if(!l.matches(r))return!1;return!0})(n,e)&&(function(o,r){return!(o.startAt&&!(function(u,d,g){const m=Av(u,d,g);return u.inclusive?m<=0:m<0})(o.startAt,Pl(o),r)||o.endAt&&!(function(u,d,g){const m=Av(u,d,g);return u.inclusive?m>=0:m>0})(o.endAt,Pl(o),r))})(n,e)}function Hw(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function IE(n){return(e,t)=>{let o=!1;for(const r of Pl(n)){const l=zw(r,e,t);if(l!==0)return l;o=o||r.field.isKeyField()}return 0}}function zw(n,e,t){const o=n.field.isKeyField()?Te.comparator(e.key,t.key):(function(l,u,d){const g=u.data.field(l),m=d.data.field(l);return g!==null&&m!==null?ca(g,m):Re(42886)})(n.field,e,t);switch(n.dir){case"asc":return o;case"desc":return-1*o;default:return Re(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o!==void 0){for(const[r,l]of o)if(this.equalsFn(r,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const o=this.mapKeyFn(e),r=this.inner[o];if(r===void 0)return this.inner[o]=[[e,t]],void this.innerSize++;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return void(r[l]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o===void 0)return!1;for(let r=0;r<o.length;r++)if(this.equalsFn(o[r][0],e))return o.length===1?delete this.inner[t]:o.splice(r,1),this.innerSize--,!0;return!1}forEach(e){nr(this.inner,((t,o)=>{for(const[r,l]of o)e(r,l)}))}isEmpty(){return lE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw=new Et(Te.comparator);function Eo(){return Yw}const RE=new Et(Te.comparator);function Nl(...n){let e=RE;for(const t of n)e=e.insert(t.key,t);return e}function wE(n){let e=RE;return n.forEach(((t,o)=>e=e.insert(t,o.overlayedDocument))),e}function Ws(){return Ul()}function NE(){return Ul()}function Ul(){return new ir((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Jw=new Et(Te.comparator),Kw=new Yt(Te.comparator);function Ke(...n){let e=Kw;for(const t of n)e=e.add(t);return e}const Qw=new Yt(Je);function Xw(){return Qw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qc(e)?"-0":e}}function bE(n){return{integerValue:""+n}}function $w(n,e){return Tw(e)?bE(e):Gp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(){this._=void 0}}function Ww(n,e,t){return n instanceof Zc?(function(r,l){const u={fields:{[fE]:{stringValue:cE},[hE]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return l&&Lp(l)&&(l=pf(l)),l&&(u.fields[dE]=l),{mapValue:u}})(t,e):n instanceof zl?DE(n,e):n instanceof Yl?xE(n,e):(function(r,l){const u=ME(r,l),d=wv(u)+wv(r.Ae);return jh(u)&&jh(r.Ae)?bE(d):Gp(r.serializer,d)})(n,e)}function Zw(n,e,t){return n instanceof zl?DE(n,e):n instanceof Yl?xE(n,e):t}function ME(n,e){return n instanceof jc?(function(o){return jh(o)||(function(l){return!!l&&"doubleValue"in l})(o)})(e)?e:{integerValue:0}:null}class Zc extends yf{}class zl extends yf{constructor(e){super(),this.elements=e}}function DE(n,e){const t=VE(e);for(const o of n.elements)t.some((r=>Wi(r,o)))||t.push(o);return{arrayValue:{values:t}}}class Yl extends yf{constructor(e){super(),this.elements=e}}function xE(n,e){let t=VE(e);for(const o of n.elements)t=t.filter((r=>!Wi(r,o)));return{arrayValue:{values:t}}}class jc extends yf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function wv(n){return Nt(n.integerValue||n.doubleValue)}function VE(n){return Op(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function jw(n,e){return n.field.isEqual(e.field)&&(function(o,r){return o instanceof zl&&r instanceof zl||o instanceof Yl&&r instanceof Yl?ua(o.elements,r.elements,Wi):o instanceof jc&&r instanceof jc?Wi(o.Ae,r.Ae):o instanceof Zc&&r instanceof Zc})(n.transform,e.transform)}class e1{constructor(e,t){this.version=e,this.transformResults=t}}class Qi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qi}static exists(e){return new Qi(void 0,e)}static updateTime(e){return new Qi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class _f{}function PE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new LE(n.key,Qi.none()):new Xl(n.key,n.data,Qi.none());{const t=n.data,o=Zn.empty();let r=new Yt(an.comparator);for(let l of e.fields)if(!r.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?o.delete(l):o.set(l,u),r=r.add(l)}return new or(n.key,o,new gi(r.toArray()),Qi.none())}}function t1(n,e,t){n instanceof Xl?(function(r,l,u){const d=r.value.clone(),g=bv(r.fieldTransforms,l,u.transformResults);d.setAll(g),l.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof or?(function(r,l,u){if(!qc(r.precondition,l))return void l.convertToUnknownDocument(u.version);const d=bv(r.fieldTransforms,l,u.transformResults),g=l.data;g.setAll(UE(r)),g.setAll(d),l.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(n,e,t):(function(r,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Ll(n,e,t,o){return n instanceof Xl?(function(l,u,d,g){if(!qc(l.precondition,u))return d;const m=l.value.clone(),v=Mv(l.fieldTransforms,g,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,o):n instanceof or?(function(l,u,d,g){if(!qc(l.precondition,u))return d;const m=Mv(l.fieldTransforms,g,u),v=u.data;return v.setAll(UE(l)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(n,e,t,o):(function(l,u,d){return qc(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function n1(n,e){let t=null;for(const o of n.fieldTransforms){const r=e.data.field(o.field),l=ME(o.transform,r||null);l!=null&&(t===null&&(t=Zn.empty()),t.set(o.field,l))}return t||null}function Nv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(o,r){return o===void 0&&r===void 0||!(!o||!r)&&ua(o,r,((l,u)=>jw(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Xl extends _f{constructor(e,t,o,r=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class or extends _f{constructor(e,t,o,r,l=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=r,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function UE(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const o=n.data.field(t);e.set(t,o)}})),e}function bv(n,e,t){const o=new Map;ot(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let r=0;r<t.length;r++){const l=n[r],u=l.transform,d=e.data.field(l.field);o.set(l.field,Zw(u,d,t[r]))}return o}function Mv(n,e,t){const o=new Map;for(const r of n){const l=r.transform,u=t.data.field(r.field);o.set(r.field,Ww(l,u,e))}return o}class LE extends _f{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class i1 extends _f{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,t,o,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=r}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const l=this.mutations[r];l.key.isEqual(e.key)&&t1(l,e,o[r])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=Ll(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=Ll(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=NE();return this.mutations.forEach((r=>{const l=e.get(r.key),u=l.overlayedDocument;let d=this.applyToLocalView(u,l.mutatedFields);d=t.has(r.key)?null:d;const g=PE(u,d);g!==null&&o.set(r.key,g),u.isValidDocument()||u.convertToNoDocument(xe.min())})),o}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ke())}isEqual(e){return this.batchId===e.batchId&&ua(this.mutations,e.mutations,((t,o)=>Nv(t,o)))&&ua(this.baseMutations,e.baseMutations,((t,o)=>Nv(t,o)))}}class Fp{constructor(e,t,o,r){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=r}static from(e,t,o){ot(e.mutations.length===o.length,58842,{me:e.mutations.length,fe:o.length});let r=(function(){return Jw})();const l=e.mutations;for(let u=0;u<l.length;u++)r=r.insert(l[u].key,o[u].version);return new Fp(e,t,o,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,We;function a1(n){switch(n){case oe.OK:return Re(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Re(15467,{code:n})}}function OE(n){if(n===void 0)return To("GRPC error has no .code"),oe.UNKNOWN;switch(n){case Bt.OK:return oe.OK;case Bt.CANCELLED:return oe.CANCELLED;case Bt.UNKNOWN:return oe.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return oe.INTERNAL;case Bt.UNAVAILABLE:return oe.UNAVAILABLE;case Bt.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Bt.NOT_FOUND:return oe.NOT_FOUND;case Bt.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Bt.ABORTED:return oe.ABORTED;case Bt.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Bt.DATA_LOSS:return oe.DATA_LOSS;default:return Re(39323,{code:n})}}(We=Bt||(Bt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1=new ls([4294967295,4294967295],0);function Dv(n){const e=l1().encode(n),t=new WT;return t.update(e),new Uint8Array(t.digest())}function xv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),o=e.getUint32(4,!0),r=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ls([t,o],0),new ls([r,l],0)]}class Hp{constructor(e,t,o){if(this.bitmap=e,this.padding=t,this.hashCount=o,t<0||t>=8)throw new bl(`Invalid padding: ${t}`);if(o<0)throw new bl(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new bl(`Invalid hash count: ${o}`);if(e.length===0&&t!==0)throw new bl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ls.fromNumber(this.ge)}ye(e,t,o){let r=e.add(t.multiply(ls.fromNumber(o)));return r.compare(u1)===1&&(r=new ls([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Dv(e),[o,r]=xv(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(o,r,l);if(!this.we(u))return!1}return!0}static create(e,t,o){const r=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new Hp(l,r,t);return o.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=Dv(e),[o,r]=xv(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(o,r,l);this.be(u)}}be(e){const t=Math.floor(e/8),o=e%8;this.bitmap[t]|=1<<o}}class bl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t,o,r,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=r,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const r=new Map;return r.set(e,$l.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new vf(xe.min(),r,new Et(Je),Eo(),Ke())}}class $l{constructor(e,t,o,r,l){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=r,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new $l(o,t,Ke(),Ke(),Ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,t,o,r){this.Se=e,this.removedTargetIds=t,this.key=o,this.De=r}}class kE{constructor(e,t){this.targetId=e,this.Ce=t}}class qE{constructor(e,t,o=ln.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=r}}class Vv{constructor(){this.ve=0,this.Fe=Pv(),this.Me=ln.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ke(),t=Ke(),o=Ke();return this.Fe.forEach(((r,l)=>{switch(l){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:o=o.add(r);break;default:Re(38017,{changeType:l})}})),new $l(this.Me,this.xe,e,t,o)}Ke(){this.Oe=!1,this.Fe=Pv()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ot(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class c1{constructor(e){this.Ge=e,this.ze=new Map,this.je=Eo(),this.He=Nc(),this.Je=Nc(),this.Ze=new Et(Je)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const o=this.nt(t);switch(e.state){case 0:this.rt(t)&&o.Le(e.resumeToken);break;case 1:o.We(),o.Ne||o.Ke(),o.Le(e.resumeToken);break;case 2:o.We(),o.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(o.Qe(),o.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),o.Le(e.resumeToken));break;default:Re(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((o,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,o=e.Ce.count,r=this.ot(t);if(r){const l=r.target;if(tp(l))if(o===0){const u=new Te(l.path);this.et(t,u,hn.newNoDocument(u,xe.min()))}else ot(o===1,20013,{expectedCount:o});else{const u=this._t(t);if(u!==o){const d=this.ut(e),g=d?this.ct(d,e,u):1;if(g!==0){this.it(t);const m=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:o="",padding:r=0},hashCount:l=0}=t;let u,d;try{u=hs(o).toUint8Array()}catch(g){if(g instanceof uE)return er("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new Hp(u,r,l)}catch(g){return er(g instanceof bl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.ge===0?null:d}ct(e,t,o){return t.Ce.count===o-this.Pt(e,t.targetId)?0:2}Pt(e,t){const o=this.Ge.getRemoteKeysForTarget(t);let r=0;return o.forEach((l=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const d=this.ot(u);if(d){if(l.current&&tp(d.target)){const g=new Te(d.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,hn.newNoDocument(g,e))}l.Be&&(t.set(u,l.ke()),l.Ke())}}));let o=Ke();this.Je.forEach(((l,u)=>{let d=!0;u.forEachWhile((g=>{const m=this.ot(g);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(o=o.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const r=new vf(e,t,this.Ze,this.je,o);return this.je=Eo(),this.He=Nc(),this.Je=Nc(),this.Ze=new Et(Je),r}Ye(e,t){if(!this.rt(e))return;const o=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,o),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,o){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),o&&(this.je=this.je.insert(t,o))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Vv,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Yt(Je),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Yt(Je),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Vv),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Nc(){return new Et(Te.comparator)}function Pv(){return new Et(Te.comparator)}const f1={asc:"ASCENDING",desc:"DESCENDING"},d1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},h1={and:"AND",or:"OR"};class p1{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function op(n,e){return n.useProto3Json||hf(e)?e:{value:e}}function ef(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function m1(n,e){return ef(n,e.toTimestamp())}function Xi(n){return ot(!!n,49232),xe.fromTimestamp((function(t){const o=ds(t);return new gt(o.seconds,o.nanos)})(n))}function zp(n,e){return sp(n,e).canonicalString()}function sp(n,e){const t=(function(r){return new ht(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function GE(n){const e=ht.fromString(n);return ot(JE(e),10190,{key:e.toString()}),e}function rp(n,e){return zp(n.databaseId,e.path)}function kh(n,e){const t=GE(e);if(t.get(1)!==n.databaseId.projectId)throw new he(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Te(HE(t))}function FE(n,e){return zp(n.databaseId,e)}function g1(n){const e=GE(n);return e.length===4?ht.emptyPath():HE(e)}function ap(n){return new ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function HE(n){return ot(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Uv(n,e,t){return{name:rp(n,e),fields:t.value.mapValue.fields}}function y1(n,e){let t;if("targetChange"in e){e.targetChange;const o=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Re(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],l=(function(m,v){return m.useProto3Json?(ot(v===void 0||typeof v=="string",58123),ln.fromBase64String(v||"")):(ot(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),ln.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(m){const v=m.code===void 0?oe.UNKNOWN:OE(m.code);return new he(v,m.message||"")})(u);t=new qE(o,r,l,d||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const r=kh(n,o.document.name),l=Xi(o.document.updateTime),u=o.document.createTime?Xi(o.document.createTime):xe.min(),d=new Zn({mapValue:{fields:o.document.fields}}),g=hn.newFoundDocument(r,l,u,d),m=o.targetIds||[],v=o.removedTargetIds||[];t=new Bc(m,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const r=kh(n,o.document),l=o.readTime?Xi(o.readTime):xe.min(),u=hn.newNoDocument(r,l),d=o.removedTargetIds||[];t=new Bc([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const r=kh(n,o.document),l=o.removedTargetIds||[];t=new Bc([],l,r,null)}else{if(!("filter"in e))return Re(11601,{Vt:e});{e.filter;const o=e.filter;o.targetId;const{count:r=0,unchangedNames:l}=o,u=new r1(r,l),d=o.targetId;t=new kE(d,u)}}return t}function _1(n,e){let t;if(e instanceof Xl)t={update:Uv(n,e.key,e.value)};else if(e instanceof LE)t={delete:rp(n,e.key)};else if(e instanceof or)t={update:Uv(n,e.key,e.data),updateMask:w1(e.fieldMask)};else{if(!(e instanceof i1))return Re(16599,{dt:e.type});t={verify:rp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((o=>(function(l,u){const d=u.transform;if(d instanceof Zc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof zl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Yl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof jc)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw Re(20930,{transform:u.transform})})(0,o)))),e.precondition.isNone||(t.currentDocument=(function(r,l){return l.updateTime!==void 0?{updateTime:m1(r,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Re(27497)})(n,e.precondition)),t}function v1(n,e){return n&&n.length>0?(ot(e!==void 0,14353),n.map((t=>(function(r,l){let u=r.updateTime?Xi(r.updateTime):Xi(l);return u.isEqual(xe.min())&&(u=Xi(l)),new e1(u,r.transformResults||[])})(t,e)))):[]}function T1(n,e){return{documents:[FE(n,e.path)]}}function E1(n,e){const t={structuredQuery:{}},o=e.path;let r;e.collectionGroup!==null?(r=o,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=o.popLast(),t.structuredQuery.from=[{collectionId:o.lastSegment()}]),t.parent=FE(n,r);const l=(function(m){if(m.length!==0)return YE(Ti.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(m){if(m.length!==0)return m.map((v=>(function(S){return{field:Wr(S.field),direction:C1(S.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=op(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:r}}function S1(n){let e=g1(n.parent);const t=n.structuredQuery,o=t.from?t.from.length:0;let r=null;if(o>0){ot(o===1,65062);const v=t.from[0];v.allDescendants?r=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(T){const S=zE(T);return S instanceof Ti&&vE(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(T){return T.map((S=>(function(x){return new Hl(Zr(x.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let S;return S=typeof T=="object"?T.value:T,hf(S)?null:S})(t.limit));let g=null;t.startAt&&(g=(function(T){const S=!!T.before,R=T.values||[];return new Wc(R,S)})(t.startAt));let m=null;return t.endAt&&(m=(function(T){const S=!T.before,R=T.values||[];return new Wc(R,S)})(t.endAt)),qw(e,r,u,l,d,"F",g,m)}function A1(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function zE(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const o=Zr(t.unaryFilter.field);return Gt.create(o,"==",{doubleValue:NaN});case"IS_NULL":const r=Zr(t.unaryFilter.field);return Gt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Zr(t.unaryFilter.field);return Gt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Zr(t.unaryFilter.field);return Gt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Re(61313);default:return Re(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Gt.create(Zr(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Re(58110);default:return Re(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ti.create(t.compositeFilter.filters.map((o=>zE(o))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Re(1026)}})(t.compositeFilter.op))})(n):Re(30097,{filter:n})}function C1(n){return f1[n]}function I1(n){return d1[n]}function R1(n){return h1[n]}function Wr(n){return{fieldPath:n.canonicalString()}}function Zr(n){return an.fromServerFormat(n.fieldPath)}function YE(n){return n instanceof Gt?(function(t){if(t.op==="=="){if(Sv(t.value))return{unaryFilter:{field:Wr(t.field),op:"IS_NAN"}};if(Ev(t.value))return{unaryFilter:{field:Wr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Sv(t.value))return{unaryFilter:{field:Wr(t.field),op:"IS_NOT_NAN"}};if(Ev(t.value))return{unaryFilter:{field:Wr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wr(t.field),op:I1(t.op),value:t.value}}})(n):n instanceof Ti?(function(t){const o=t.getFilters().map((r=>YE(r)));return o.length===1?o[0]:{compositeFilter:{op:R1(t.op),filters:o}}})(n):Re(54877,{filter:n})}function w1(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function JE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function KE(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,t,o,r,l=xe.min(),u=xe.min(),d=ln.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=r,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(e){return new is(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e){this.yt=e}}function b1(n){const e=S1({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ip(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(){this.Sn=new D1}addToCollectionParentIndex(e,t){return this.Sn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(fs.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(fs.min())}updateCollectionGroup(e,t,o){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class D1{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),r=this.index[t]||new Yt(ht.comparator),l=!r.has(o);return this.index[t]=r.add(o),l}has(e){const t=e.lastSegment(),o=e.popLast(),r=this.index[t];return r&&r.has(o)}getEntries(e){return(this.index[e]||new Yt(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},QE=41943040;class Nn{static withCacheSize(e){return new Nn(e,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn.DEFAULT_COLLECTION_PERCENTILE=10,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nn.DEFAULT=new Nn(QE,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nn.DISABLED=new Nn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new da(0)}static ar(){return new da(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="LruGarbageCollector",x1=1048576;function kv([n,e],[t,o]){const r=Je(n,t);return r===0?Je(e,o):r}class V1{constructor(e){this.Pr=e,this.buffer=new Yt(kv),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();kv(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class P1{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){me(Ov,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ya(t)?me(Ov,"Ignoring IndexedDB error during garbage collection: ",t):await ga(t)}await this.Ar(3e5)}))}}class U1{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((o=>Math.floor(t/100*o)))}nthSequenceNumber(e,t){if(t===0)return re.resolve(df.ce);const o=new V1(t);return this.Vr.forEachTarget(e,(r=>o.Er(r.sequenceNumber))).next((()=>this.Vr.mr(e,(r=>o.Er(r))))).next((()=>o.maxValue))}removeTargets(e,t,o){return this.Vr.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(Lv)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lv):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let o,r,l,u,d,g,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,u=Date.now(),this.nthSequenceNumber(e,r)))).next((T=>(o=T,d=Date.now(),this.removeTargets(e,o,t)))).next((T=>(l=T,g=Date.now(),this.removeOrphanedDocuments(e,o)))).next((T=>(m=Date.now(),Xr()<=Ze.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${r} in `+(d-u)+`ms
	Removed ${l} targets in `+(g-d)+`ms
	Removed ${T} documents in `+(m-g)+`ms
Total Duration: ${m-v}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:l,documentsRemoved:T}))))}}function L1(n,e){return new U1(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(){this.changes=new ir((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return o!==void 0?re.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,t,o,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=r}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(o=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(o!==null&&Ll(o.mutation,r,gi.empty(),gt.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((o=>this.getLocalViewOfDocuments(e,o,Ke()).next((()=>o))))}getLocalViewOfDocuments(e,t,o=Ke()){const r=Ws();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,o).next((l=>{let u=Nl();return l.forEach(((d,g)=>{u=u.insert(d,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const o=Ws();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,Ke())))}populateOverlays(e,t,o){const r=[];return o.forEach((l=>{t.has(l)||r.push(l)})),this.documentOverlayCache.getOverlays(e,r).next((l=>{l.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,o,r){let l=Eo();const u=Ul(),d=(function(){return Ul()})();return t.forEach(((g,m)=>{const v=o.get(m.key);r.has(m.key)&&(v===void 0||v.mutation instanceof or)?l=l.insert(m.key,m):v!==void 0?(u.set(m.key,v.mutation.getFieldMask()),Ll(v.mutation,m,v.mutation.getFieldMask(),gt.now())):u.set(m.key,gi.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((m,v)=>u.set(m,v))),t.forEach(((m,v)=>d.set(m,new k1(v,u.get(m)??null)))),d)))}recalculateAndSaveOverlays(e,t){const o=Ul();let r=new Et(((u,d)=>u-d)),l=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((g=>{const m=t.get(g);if(m===null)return;let v=o.get(g)||gi.empty();v=d.applyToLocalView(m,v),o.set(g,v);const T=(r.get(d.batchId)||Ke()).add(g);r=r.insert(d.batchId,T)}))})).next((()=>{const u=[],d=r.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),m=g.key,v=g.value,T=NE();v.forEach((S=>{if(!l.has(S)){const R=PE(t.get(S),o.get(S));R!==null&&T.set(S,R),l=l.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,T))}return re.waitFor(u)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,t,o,r){return Bw(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):AE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o,r):this.getDocumentsMatchingCollectionQuery(e,t,o,r)}getNextDocuments(e,t,o,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,r).next((l=>{const u=r-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,r-l.size):re.resolve(Ws());let d=ql,g=l;return u.next((m=>re.forEach(m,((v,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(v)?re.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{g=g.insert(v,S)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,g,m,Ke()))).next((v=>({batchId:d,changes:wE(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next((o=>{let r=Nl();return o.isFoundDocument()&&(r=r.insert(o.key,o)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,o,r){const l=t.collectionGroup;let u=Nl();return this.indexManager.getCollectionParents(e,l).next((d=>re.forEach(d,(g=>{const m=(function(T,S){return new _a(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,o,r).next((v=>{v.forEach(((T,S)=>{u=u.insert(T,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,o,r){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,o,l,r)))).next((u=>{l.forEach(((g,m)=>{const v=m.getKey();u.get(v)===null&&(u=u.insert(v,hn.newInvalidDocument(v)))}));let d=Nl();return u.forEach(((g,m)=>{const v=l.get(g);v!==void 0&&Ll(v.mutation,m,gi.empty(),gt.now()),gf(t,m)&&(d=d.insert(g,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return re.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Xi(r.createTime)}})(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(r){return{name:r.name,query:b1(r.bundledQuery),readTime:Xi(r.readTime)}})(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(){this.overlays=new Et(Te.comparator),this.Lr=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const o=Ws();return re.forEach(t,(r=>this.getOverlay(e,r).next((l=>{l!==null&&o.set(r,l)})))).next((()=>o))}saveOverlays(e,t,o){return o.forEach(((r,l)=>{this.bt(e,t,l)})),re.resolve()}removeOverlaysForBatchId(e,t,o){const r=this.Lr.get(o);return r!==void 0&&(r.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(o)),re.resolve()}getOverlaysForCollection(e,t,o){const r=Ws(),l=t.length+1,u=new Te(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const g=d.getNext().value,m=g.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&g.largestBatchId>o&&r.set(g.getKey(),g)}return re.resolve(r)}getOverlaysForCollectionGroup(e,t,o,r){let l=new Et(((m,v)=>m-v));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>o){let v=l.get(m.largestBatchId);v===null&&(v=Ws(),l=l.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=Ws(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((m,v)=>d.set(m,v))),!(d.size()>=r)););return re.resolve(d)}bt(e,t,o){const r=this.overlays.get(o.key);if(r!==null){const u=this.Lr.get(r.largestBatchId).delete(o.key);this.Lr.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(o.key,new s1(t,o));let l=this.Lr.get(t);l===void 0&&(l=Ke(),this.Lr.set(t,l)),this.Lr.set(t,l.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(){this.kr=new Yt(Wt.Kr),this.qr=new Yt(Wt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const o=new Wt(e,t);this.kr=this.kr.add(o),this.qr=this.qr.add(o)}$r(e,t){e.forEach((o=>this.addReference(o,t)))}removeReference(e,t){this.Wr(new Wt(e,t))}Qr(e,t){e.forEach((o=>this.removeReference(o,t)))}Gr(e){const t=new Te(new ht([])),o=new Wt(t,e),r=new Wt(t,e+1),l=[];return this.qr.forEachInRange([o,r],(u=>{this.Wr(u),l.push(u.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Te(new ht([])),o=new Wt(t,e),r=new Wt(t,e+1);let l=Ke();return this.qr.forEachInRange([o,r],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new Wt(e,0),o=this.kr.firstAfterOrEqual(t);return o!==null&&e.isEqual(o.key)}}class Wt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Te.comparator(e.key,t.key)||Je(e.Hr,t.Hr)}static Ur(e,t){return Je(e.Hr,t.Hr)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Yt(Wt.Kr)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,o,r){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new o1(l,t,o,r);this.mutationQueue.push(u);for(const d of r)this.Jr=this.Jr.add(new Wt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return re.resolve(u)}lookupMutationBatch(e,t){return re.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const o=t+1,r=this.Xr(o),l=r<0?0:r;return re.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?Up:this.Yn-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new Wt(t,0),r=new Wt(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([o,r],(u=>{const d=this.Zr(u.Hr);l.push(d)})),re.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Yt(Je);return t.forEach((r=>{const l=new Wt(r,0),u=new Wt(r,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,u],(d=>{o=o.add(d.Hr)}))})),re.resolve(this.Yr(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,r=o.length+1;let l=o;Te.isDocumentKey(l)||(l=l.child(""));const u=new Wt(new Te(l),0);let d=new Yt(Je);return this.Jr.forEachWhile((g=>{const m=g.key.path;return!!o.isPrefixOf(m)&&(m.length===r&&(d=d.add(g.Hr)),!0)}),u),re.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((o=>{const r=this.Zr(o);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){ot(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Jr;return re.forEach(t.mutations,(r=>{const l=new Wt(r.key,t.batchId);return o=o.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Jr=o}))}nr(e){}containsKey(e,t){const o=new Wt(t,0),r=this.Jr.firstAfterOrEqual(o);return re.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e){this.ti=e,this.docs=(function(){return new Et(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,r=this.docs.get(o),l=r?r.size:0,u=this.ti(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return re.resolve(o?o.document.mutableCopy():hn.newInvalidDocument(t))}getEntries(e,t){let o=Eo();return t.forEach((r=>{const l=this.docs.get(r);o=o.insert(r,l?l.document.mutableCopy():hn.newInvalidDocument(r))})),re.resolve(o)}getDocumentsMatchingQuery(e,t,o,r){let l=Eo();const u=t.path,d=new Te(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:m,value:{document:v}}=g.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||gw(mw(v),o)<=0||(r.has(v.key)||gf(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return re.resolve(l)}getAllFromCollectionGroup(e,t,o,r){Re(9500)}ni(e,t){return re.forEach(this.docs,(o=>t(o)))}newChangeBuffer(e){return new Y1(this)}getSize(e){return re.resolve(this.size)}}class Y1 extends O1{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((o,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(o)})),re.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e){this.persistence=e,this.ri=new ir((t=>kp(t)),qp),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.ii=0,this.si=new Yp,this.targetCount=0,this.oi=da._r()}forEachTarget(e,t){return this.ri.forEach(((o,r)=>t(r))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.ii&&(this.ii=t),re.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new da(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.lr(t),re.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,o){let r=0;const l=[];return this.ri.forEach(((u,d)=>{d.sequenceNumber<=t&&o.get(d.targetId)===null&&(this.ri.delete(u),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)})),re.waitFor(l).next((()=>r))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const o=this.ri.get(t)||null;return re.resolve(o)}addMatchingKeys(e,t,o){return this.si.$r(t,o),re.resolve()}removeMatchingKeys(e,t,o){this.si.Qr(t,o);const r=this.persistence.referenceDelegate,l=[];return r&&t.forEach((u=>{l.push(r.markPotentiallyOrphaned(e,u))})),re.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),re.resolve()}getMatchingKeysForTargetId(e,t){const o=this.si.jr(t);return re.resolve(o)}containsKey(e,t){return re.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,t){this._i={},this.overlays={},this.ai=new df(0),this.ui=!1,this.ui=!0,this.ci=new F1,this.referenceDelegate=e(this),this.li=new J1(this),this.indexManager=new M1,this.remoteDocumentCache=(function(r){return new z1(r)})((o=>this.referenceDelegate.hi(o))),this.serializer=new N1(t),this.Pi=new B1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new G1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this._i[e.toKey()];return o||(o=new H1(t,this.referenceDelegate),this._i[e.toKey()]=o),o}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,o){me("MemoryPersistence","Starting transaction:",e);const r=new K1(this.ai.next());return this.referenceDelegate.Ti(),o(r).next((l=>this.referenceDelegate.Ii(r).next((()=>l)))).toPromise().then((l=>(r.raiseOnCommittedEvent(),l)))}Ei(e,t){return re.or(Object.values(this._i).map((o=>()=>o.containsKey(e,t))))}}class K1 extends _w{constructor(e){super(),this.currentSequenceNumber=e}}class Jp{constructor(e){this.persistence=e,this.Ri=new Yp,this.Ai=null}static Vi(e){return new Jp(e)}get di(){if(this.Ai)return this.Ai;throw Re(60996)}addReference(e,t,o){return this.Ri.addReference(o,t),this.di.delete(o.toString()),re.resolve()}removeReference(e,t,o){return this.Ri.removeReference(o,t),this.di.add(o.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),re.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((r=>this.di.add(r.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((l=>this.di.add(l.toString())))})).next((()=>o.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.di,(o=>{const r=Te.fromPath(o);return this.mi(e,r).next((l=>{l||t.removeEntry(r,xe.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((o=>{o?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return re.or([()=>re.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class tf{constructor(e,t){this.persistence=e,this.fi=new ir((o=>Ew(o.path)),((o,r)=>o.isEqual(r))),this.garbageCollector=L1(this,t)}static Vi(e,t){return new tf(e,t)}Ti(){}Ii(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>t.next((r=>o+r))))}pr(e){let t=0;return this.mr(e,(o=>{t++})).next((()=>t))}mr(e,t){return re.forEach(this.fi,((o,r)=>this.wr(e,o,r).next((l=>l?re.resolve():t(r)))))}removeTargets(e,t,o){return this.persistence.getTargetCache().removeTargets(e,t,o)}removeOrphanedDocuments(e,t){let o=0;const r=this.persistence.getRemoteDocumentCache(),l=r.newChangeBuffer();return r.ni(e,(u=>this.wr(e,u,t).next((d=>{d||(o++,l.removeEntry(u,xe.min()))})))).next((()=>l.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,t,o){return this.fi.set(o,e.currentSequenceNumber),re.resolve()}removeReference(e,t,o){return this.fi.set(o,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),re.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Oc(e.data.value)),t}wr(e,t,o){return re.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.fi.get(t);return re.resolve(r!==void 0&&r>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,t,o,r){this.targetId=e,this.fromCache=t,this.Ts=o,this.Is=r}static Es(e,t){let o=Ke(),r=Ke();for(const l of t.docChanges)switch(l.type){case 0:o=o.add(l.doc.key);break;case 1:r=r.add(l.doc.key)}return new Kp(e,t.fromCache,o,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return LI()?8:vw(PI())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,o,r){const l={result:null};return this.gs(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ps(e,t,r,o).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new Q1;return this.ys(e,t,u).next((d=>{if(l.result=d,this.As)return this.ws(e,t,u,d.size)}))})).next((()=>l.result))}ws(e,t,o,r){return o.documentReadCount<this.Vs?(Xr()<=Ze.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",$r(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),re.resolve()):(Xr()<=Ze.DEBUG&&me("QueryEngine","Query:",$r(t),"scans",o.documentReadCount,"local documents and returns",r,"documents as results."),o.documentReadCount>this.ds*r?(Xr()<=Ze.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",$r(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ki(t))):re.resolve())}gs(e,t){if(Rv(t))return re.resolve(null);let o=Ki(t);return this.indexManager.getIndexType(e,o).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=ip(t,null,"F"),o=Ki(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next((l=>{const u=Ke(...l);return this.fs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,o).next((g=>{const m=this.bs(t,d);return this.Ss(t,m,u,g.readTime)?this.gs(e,ip(t,null,"F")):this.Ds(e,m,t,g)}))))})))))}ps(e,t,o,r){return Rv(t)||r.isEqual(xe.min())?re.resolve(null):this.fs.getDocuments(e,o).next((l=>{const u=this.bs(t,l);return this.Ss(t,u,o,r)?re.resolve(null):(Xr()<=Ze.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),$r(t)),this.Ds(e,u,t,pw(r,ql)).next((d=>d)))}))}bs(e,t){let o=new Yt(IE(e));return t.forEach(((r,l)=>{gf(e,l)&&(o=o.add(l))})),o}Ss(e,t,o,r){if(e.limit===null)return!1;if(o.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(r)>0)}ys(e,t,o){return Xr()<=Ze.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",$r(t)),this.fs.getDocumentsMatchingQuery(e,t,fs.min(),o)}Ds(e,t,o,r){return this.fs.getDocumentsMatchingQuery(e,o,r).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="LocalStore",$1=3e8;class W1{constructor(e,t,o,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new Et(Je),this.Fs=new ir((l=>kp(l)),qp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(o)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new q1(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function Z1(n,e,t,o){return new W1(n,e,t,o)}async function $E(n,e){const t=Pe(n);return await t.persistence.runTransaction("Handle user change","readonly",(o=>{let r;return t.mutationQueue.getAllMutationBatches(o).next((l=>(r=l,t.Os(e),t.mutationQueue.getAllMutationBatches(o)))).next((l=>{const u=[],d=[];let g=Ke();for(const m of r){u.push(m.batchId);for(const v of m.mutations)g=g.add(v.key)}for(const m of l){d.push(m.batchId);for(const v of m.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(o,g).next((m=>({Ns:m,removedBatchIds:u,addedBatchIds:d})))}))}))}function j1(n,e){const t=Pe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const r=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,g,m,v){const T=m.batch,S=T.keys();let R=re.resolve();return S.forEach((x=>{R=R.next((()=>v.getEntry(g,x))).next((O=>{const k=m.docVersions.get(x);ot(k!==null,48541),O.version.compareTo(k)<0&&(T.applyToRemoteDocument(O,m),O.isValidDocument()&&(O.setReadTime(m.commitVersion),v.addEntry(O)))}))})),R.next((()=>d.mutationQueue.removeMutationBatch(g,T)))})(t,o,e,l).next((()=>l.apply(o))).next((()=>t.mutationQueue.performConsistencyCheck(o))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(o,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(d){let g=Ke();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(g=g.add(d.batch.mutations[m].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(o,r)))}))}function WE(n){const e=Pe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function eN(n,e){const t=Pe(n),o=e.snapshotVersion;let r=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});r=t.vs;const d=[];e.targetChanges.forEach(((v,T)=>{const S=r.get(T);if(!S)return;d.push(t.li.removeMatchingKeys(l,v.removedDocuments,T).next((()=>t.li.addMatchingKeys(l,v.addedDocuments,T))));let R=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?R=R.withResumeToken(ln.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,o)),r=r.insert(T,R),(function(O,k,K){return O.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=$1?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(S,R,v)&&d.push(t.li.updateTargetData(l,R))}));let g=Eo(),m=Ke();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(tN(l,u,e.documentUpdates).next((v=>{g=v.Bs,m=v.Ls}))),!o.isEqual(xe.min())){const v=t.li.getLastRemoteSnapshotVersion(l).next((T=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,o)));d.push(v)}return re.waitFor(d).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,m))).next((()=>g))})).then((l=>(t.vs=r,l)))}function tN(n,e,t){let o=Ke(),r=Ke();return t.forEach((l=>o=o.add(l))),e.getEntries(n,o).next((l=>{let u=Eo();return t.forEach(((d,g)=>{const m=l.get(d);g.isFoundDocument()!==m.isFoundDocument()&&(r=r.add(d)),g.isNoDocument()&&g.version.isEqual(xe.min())?(e.removeEntry(d,g.readTime),u=u.insert(d,g)):!m.isValidDocument()||g.version.compareTo(m.version)>0||g.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(g),u=u.insert(d,g)):me(Qp,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",g.version)})),{Bs:u,Ls:r}}))}function nN(n,e){const t=Pe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=Up),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function iN(n,e){const t=Pe(n);return t.persistence.runTransaction("Allocate target","readwrite",(o=>{let r;return t.li.getTargetData(o,e).next((l=>l?(r=l,re.resolve(r)):t.li.allocateTargetId(o).next((u=>(r=new is(e,u,"TargetPurposeListen",o.currentSequenceNumber),t.li.addTargetData(o,r).next((()=>r)))))))})).then((o=>{const r=t.vs.get(o.targetId);return(r===null||o.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.vs=t.vs.insert(o.targetId,o),t.Fs.set(e,o.targetId)),o}))}async function lp(n,e,t){const o=Pe(n),r=o.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await o.persistence.runTransaction("Release target",l,(u=>o.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!ya(u))throw u;me(Qp,`Failed to update sequence numbers for target ${e}: ${u}`)}o.vs=o.vs.remove(e),o.Fs.delete(r.target)}function qv(n,e,t){const o=Pe(n);let r=xe.min(),l=Ke();return o.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,m,v){const T=Pe(g),S=T.Fs.get(v);return S!==void 0?re.resolve(T.vs.get(S)):T.li.getTargetData(m,v)})(o,u,Ki(e)).next((d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,o.li.getMatchingKeysForTargetId(u,d.targetId).next((g=>{l=g}))})).next((()=>o.Cs.getDocumentsMatchingQuery(u,e,t?r:xe.min(),t?l:Ke()))).next((d=>(oN(o,Hw(e),d),{documents:d,ks:l})))))}function oN(n,e,t){let o=n.Ms.get(e)||xe.min();t.forEach(((r,l)=>{l.readTime.compareTo(o)>0&&(o=l.readTime)})),n.Ms.set(e,o)}class Bv{constructor(){this.activeTargetIds=Xw()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sN{constructor(){this.vo=new Bv,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,o){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Bv,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="ConnectivityMonitor";class Fv{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){me(Gv,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){me(Gv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bc=null;function up(){return bc===null?bc=(function(){return 268435456+Math.round(2147483648*Math.random())})():bc++,"0x"+bc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh="RestConnection",aN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class lN{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${o}/databases/${r}`,this.$o=this.databaseId.database===Xc?`project_id=${o}`:`project_id=${o}&database_id=${r}`}Wo(e,t,o,r,l){const u=up(),d=this.Qo(e,t.toUriEncodedString());me(qh,`Sending RPC '${e}' ${u}:`,d,o);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,r,l);const{host:m}=new URL(d),v=Dp(m);return this.zo(e,d,g,o,v).then((T=>(me(qh,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw er(qh,`RPC '${e}' ${u} failed with error: `,T,"url: ",d,"request:",o),T}))}jo(e,t,o,r,l,u){return this.Wo(e,t,o,r,l)}Go(e,t,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ma})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,l)=>e[l]=r)),o&&o.headers.forEach(((r,l)=>e[l]=r))}Qo(e,t){const o=aN[e];let r=`${this.qo}/v1/${t}:${o}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="WebChannelConnection",Cl=(n,e,t)=>{n.listen(e,(o=>{try{t(o)}catch(r){setTimeout((()=>{throw r}),0)}}))};class ia extends lN{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ia.c_){const e=tE();Cl(e,eE.STAT_EVENT,(t=>{t.stat===$h.PROXY?me(fn,"STAT_EVENT: detected buffering proxy"):t.stat===$h.NOPROXY&&me(fn,"STAT_EVENT: detected no buffering proxy")})),ia.c_=!0}}zo(e,t,o,r,l){const u=up();return new Promise(((d,g)=>{const m=new ZT;m.setWithCredentials(!0),m.listenOnce(jT.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Lc.NO_ERROR:const T=m.getResponseJson();me(fn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),d(T);break;case Lc.TIMEOUT:me(fn,`RPC '${e}' ${u} timed out`),g(new he(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Lc.HTTP_ERROR:const S=m.getStatus();if(me(fn,`RPC '${e}' ${u} failed with status:`,S,"response text:",m.getResponseText()),S>0){let R=m.getResponseJson();Array.isArray(R)&&(R=R[0]);const x=R==null?void 0:R.error;if(x&&x.status&&x.message){const O=(function(K){const ne=K.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(ne)>=0?ne:oe.UNKNOWN})(x.status);g(new he(O,x.message))}else g(new he(oe.UNKNOWN,"Server responded with status "+m.getStatus()))}else g(new he(oe.UNAVAILABLE,"Connection failed."));break;default:Re(9055,{l_:e,streamId:u,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{me(fn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(r);me(fn,`RPC '${e}' ${u} sending request:`,r),m.send(t,"POST",v,o,15)}))}T_(e,t,o){const r=up(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(d.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,o),d.encodeInitMessageHeaders=!0;const m=l.join("");me(fn,`Creating RPC '${e}' stream ${r}: ${m}`,d);const v=u.createWebChannel(m,d);this.I_(v);let T=!1,S=!1;const R=new uN({Ho:x=>{S?me(fn,`Not sending because RPC '${e}' stream ${r} is closed:`,x):(T||(me(fn,`Opening RPC '${e}' stream ${r} transport.`),v.open(),T=!0),me(fn,`RPC '${e}' stream ${r} sending:`,x),v.send(x))},Jo:()=>v.close()});return Cl(v,wl.EventType.OPEN,(()=>{S||(me(fn,`RPC '${e}' stream ${r} transport opened.`),R.i_())})),Cl(v,wl.EventType.CLOSE,(()=>{S||(S=!0,me(fn,`RPC '${e}' stream ${r} transport closed`),R.o_(),this.E_(v))})),Cl(v,wl.EventType.ERROR,(x=>{S||(S=!0,er(fn,`RPC '${e}' stream ${r} transport errored. Name:`,x.name,"Message:",x.message),R.o_(new he(oe.UNAVAILABLE,"The operation could not be completed")))})),Cl(v,wl.EventType.MESSAGE,(x=>{var O;if(!S){const k=x.data[0];ot(!!k,16349);const K=k,ne=(K==null?void 0:K.error)||((O=K[0])==null?void 0:O.error);if(ne){me(fn,`RPC '${e}' stream ${r} received error:`,ne);const j=ne.status;let ae=(function(M){const b=Bt[M];if(b!==void 0)return OE(b)})(j),W=ne.message;j==="NOT_FOUND"&&W.includes("database")&&W.includes("does not exist")&&W.includes(this.databaseId.database)&&er(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),ae===void 0&&(ae=oe.INTERNAL,W="Unknown error status: "+j+" with message "+ne.message),S=!0,R.o_(new he(ae,W)),v.close()}else me(fn,`RPC '${e}' stream ${r} received:`,k),R.__(k)}})),ia.u_(),setTimeout((()=>{R.s_()}),0),R}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,o){super.Go(e,t,o),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return nE()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(n){return new ia(n)}function Bh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(n){return new p1(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ia.c_=!1;class ZE{constructor(e,t,o=1e3,r=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=o,this.A_=r,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),o=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-o);r>0&&me("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="PersistentStream";class jE{constructor(e,t,o,r,l,u,d,g){this.Ci=e,this.b_=o,this.S_=r,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ZE(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(To(t.toString()),To("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,r])=>{this.D_===t&&this.G_(o,r)}),(o=>{e((()=>{const r=new he(oe.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(r)}))}))}G_(e,t){const o=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{o((()=>this.listener.Zo()))})),this.stream.Yo((()=>{o((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((r=>{o((()=>this.z_(r)))})),this.stream.onMessage((r=>{o((()=>++this.F_==1?this.H_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(Hv,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(me(Hv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class fN extends jE{constructor(e,t,o,r,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,r,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=y1(this.serializer,e),o=(function(l){if(!("targetChange"in l))return xe.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?xe.min():u.readTime?Xi(u.readTime):xe.min()})(e);return this.listener.J_(t,o)}Z_(e){const t={};t.database=ap(this.serializer),t.addTarget=(function(l,u){let d;const g=u.target;if(d=tp(g)?{documents:T1(l,g)}:{query:E1(l,g).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=BE(l,u.resumeToken);const m=op(l,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(xe.min())>0){d.readTime=ef(l,u.snapshotVersion.toTimestamp());const m=op(l,u.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const o=A1(this.serializer,e);o&&(t.labels=o),this.K_(t)}X_(e){const t={};t.database=ap(this.serializer),t.removeTarget=e,this.K_(t)}}class dN extends jE{constructor(e,t,o,r,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,r,u),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return ot(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ot(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ot(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=v1(e.writeResults,e.commitTime),o=Xi(e.commitTime);return this.listener.na(o,t)}ra(){const e={};e.database=ap(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((o=>_1(this.serializer,o)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{}class pN extends hN{constructor(e,t,o,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=o,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new he(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,o,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Wo(e,sp(t,o),r,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(oe.UNKNOWN,l.toString())}))}jo(e,t,o,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.jo(e,sp(t,o),r,u,d,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new he(oe.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function mN(n,e,t,o){return new pN(n,e,t,o)}class gN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(To(t),this.aa=!1):me("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr="RemoteStore";class yN{constructor(e,t,o,r,l){this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((u=>{o.enqueueAndForget((async()=>{sr(this)&&(me(tr,"Restarting streams for network reachability change."),await(async function(g){const m=Pe(g);m.Ea.add(4),await Wl(m),m.Va.set("Unknown"),m.Ea.delete(4),await Ef(m)})(this))}))})),this.Va=new gN(o,r)}}async function Ef(n){if(sr(n))for(const e of n.Ra)await e(!0)}async function Wl(n){for(const e of n.Ra)await e(!1)}function eS(n,e){const t=Pe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Zp(t)?Wp(t):va(t).O_()&&$p(t,e))}function Xp(n,e){const t=Pe(n),o=va(t);t.Ia.delete(e),o.O_()&&tS(t,e),t.Ia.size===0&&(o.O_()?o.L_():sr(t)&&t.Va.set("Unknown"))}function $p(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}va(n).Z_(e)}function tS(n,e){n.da.$e(e),va(n).X_(e)}function Wp(n){n.da=new c1({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),va(n).start(),n.Va.ua()}function Zp(n){return sr(n)&&!va(n).x_()&&n.Ia.size>0}function sr(n){return Pe(n).Ea.size===0}function nS(n){n.da=void 0}async function _N(n){n.Va.set("Online")}async function vN(n){n.Ia.forEach(((e,t)=>{$p(n,e)}))}async function TN(n,e){nS(n),Zp(n)?(n.Va.ha(e),Wp(n)):n.Va.set("Unknown")}async function EN(n,e,t){if(n.Va.set("Online"),e instanceof qE&&e.state===2&&e.cause)try{await(async function(r,l){const u=l.cause;for(const d of l.targetIds)r.Ia.has(d)&&(await r.remoteSyncer.rejectListen(d,u),r.Ia.delete(d),r.da.removeTarget(d))})(n,e)}catch(o){me(tr,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await nf(n,o)}else if(e instanceof Bc?n.da.Xe(e):e instanceof kE?n.da.st(e):n.da.tt(e),!t.isEqual(xe.min()))try{const o=await WE(n.localStore);t.compareTo(o)>=0&&await(function(l,u){const d=l.da.Tt(u);return d.targetChanges.forEach(((g,m)=>{if(g.resumeToken.approximateByteSize()>0){const v=l.Ia.get(m);v&&l.Ia.set(m,v.withResumeToken(g.resumeToken,u))}})),d.targetMismatches.forEach(((g,m)=>{const v=l.Ia.get(g);if(!v)return;l.Ia.set(g,v.withResumeToken(ln.EMPTY_BYTE_STRING,v.snapshotVersion)),tS(l,g);const T=new is(v.target,g,m,v.sequenceNumber);$p(l,T)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(o){me(tr,"Failed to raise snapshot:",o),await nf(n,o)}}async function nf(n,e,t){if(!ya(e))throw e;n.Ea.add(1),await Wl(n),n.Va.set("Offline"),t||(t=()=>WE(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{me(tr,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Ef(n)}))}function iS(n,e){return e().catch((t=>nf(n,t,e)))}async function Sf(n){const e=Pe(n),t=ms(e);let o=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Up;for(;SN(e);)try{const r=await nN(e.localStore,o);if(r===null){e.Ta.length===0&&t.L_();break}o=r.batchId,AN(e,r)}catch(r){await nf(e,r)}oS(e)&&sS(e)}function SN(n){return sr(n)&&n.Ta.length<10}function AN(n,e){n.Ta.push(e);const t=ms(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function oS(n){return sr(n)&&!ms(n).x_()&&n.Ta.length>0}function sS(n){ms(n).start()}async function CN(n){ms(n).ra()}async function IN(n){const e=ms(n);for(const t of n.Ta)e.ea(t.mutations)}async function RN(n,e,t){const o=n.Ta.shift(),r=Fp.from(o,e,t);await iS(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await Sf(n)}async function wN(n,e){e&&ms(n).Y_&&await(async function(o,r){if((function(u){return a1(u)&&u!==oe.ABORTED})(r.code)){const l=o.Ta.shift();ms(o).B_(),await iS(o,(()=>o.remoteSyncer.rejectFailedWrite(l.batchId,r))),await Sf(o)}})(n,e),oS(n)&&sS(n)}async function zv(n,e){const t=Pe(n);t.asyncQueue.verifyOperationInProgress(),me(tr,"RemoteStore received new credentials");const o=sr(t);t.Ea.add(3),await Wl(t),o&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Ef(t)}async function NN(n,e){const t=Pe(n);e?(t.Ea.delete(2),await Ef(t)):e||(t.Ea.add(2),await Wl(t),t.Va.set("Unknown"))}function va(n){return n.ma||(n.ma=(function(t,o,r){const l=Pe(t);return l.sa(),new fN(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Zo:_N.bind(null,n),Yo:vN.bind(null,n),t_:TN.bind(null,n),J_:EN.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),Zp(n)?Wp(n):n.Va.set("Unknown")):(await n.ma.stop(),nS(n))}))),n.ma}function ms(n){return n.fa||(n.fa=(function(t,o,r){const l=Pe(t);return l.sa(),new dN(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:CN.bind(null,n),t_:wN.bind(null,n),ta:IN.bind(null,n),na:RN.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Sf(n)):(await n.fa.stop(),n.Ta.length>0&&(me(tr,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,t,o,r,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=r,this.removalCallback=l,this.deferred=new _o,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,o,r,l){const u=Date.now()+o,d=new jp(e,t,u,r,l);return d.start(o),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function em(n,e){if(To("AsyncQueue",`${e}: ${n}`),ya(n))return new he(oe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{static emptySet(e){return new oa(e.comparator)}constructor(e){this.comparator=e?(t,o)=>e(t,o)||Te.comparator(t.key,o.key):(t,o)=>Te.comparator(t.key,o.key),this.keyedMap=Nl(),this.sortedSet=new Et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,o)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof oa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=o.getNext().key;if(!r.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const o=new oa;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(){this.ga=new Et(Te.comparator)}track(e){const t=e.doc.key,o=this.ga.get(t);o?e.type!==0&&o.type===3?this.ga=this.ga.insert(t,e):e.type===3&&o.type!==1?this.ga=this.ga.insert(t,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.ga=this.ga.remove(t):e.type===1&&o.type===2?this.ga=this.ga.insert(t,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Re(63341,{Vt:e,pa:o}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,o)=>{e.push(o)})),e}}class ha{constructor(e,t,o,r,l,u,d,g,m){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=r,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=m}static fromInitialDocuments(e,t,o,r,l){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new ha(e,t,oa.emptySet(t),u,o,r,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==o[r].type||!t[r].doc.isEqual(o[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class MN{constructor(){this.queries=Jv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,o){const r=Pe(t),l=r.queries;r.queries=Jv(),l.forEach(((u,d)=>{for(const g of d.ba)g.onError(o)}))})(this,new he(oe.ABORTED,"Firestore shutting down"))}}function Jv(){return new ir((n=>CE(n)),mf)}async function rS(n,e){const t=Pe(n);let o=3;const r=e.query;let l=t.queries.get(r);l?!l.Sa()&&e.Da()&&(o=2):(l=new bN,o=e.Da()?0:1);try{switch(o){case 0:l.wa=await t.onListen(r,!0);break;case 1:l.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(u){const d=em(u,`Initialization of query '${$r(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&tm(t)}async function aS(n,e){const t=Pe(n),o=e.query;let r=3;const l=t.queries.get(o);if(l){const u=l.ba.indexOf(e);u>=0&&(l.ba.splice(u,1),l.ba.length===0?r=e.Da()?0:1:!l.Sa()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(o),t.onUnlisten(o,!0);case 1:return t.queries.delete(o),t.onUnlisten(o,!1);case 2:return t.onLastRemoteStoreUnlisten(o);default:return}}function DN(n,e){const t=Pe(n);let o=!1;for(const r of e){const l=r.query,u=t.queries.get(l);if(u){for(const d of u.ba)d.Fa(r)&&(o=!0);u.wa=r}}o&&tm(t)}function xN(n,e,t){const o=Pe(n),r=o.queries.get(e);if(r)for(const l of r.ba)l.onError(t);o.queries.delete(e)}function tm(n){n.Ca.forEach((e=>{e.next()}))}var cp,Kv;(Kv=cp||(cp={})).Ma="default",Kv.Cache="cache";class lS{constructor(e,t,o){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(e){if(!this.options.includeMetadataChanges){const o=[];for(const r of e.docChanges)r.type!==3&&o.push(r);e=new ha(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const o=t!=="Offline";return(!this.options.Ka||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ha.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==cp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e){this.key=e}}class cS{constructor(e){this.key=e}}class VN{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ke(),this.mutatedKeys=Ke(),this.eu=IE(e),this.tu=new oa(this.eu)}get nu(){return this.Za}ru(e,t){const o=t?t.iu:new Yv,r=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=r,d=!1;const g=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,m=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((v,T)=>{const S=r.get(v),R=gf(this.query,T)?T:null,x=!!S&&this.mutatedKeys.has(S.key),O=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let k=!1;S&&R?S.data.isEqual(R.data)?x!==O&&(o.track({type:3,doc:R}),k=!0):this.su(S,R)||(o.track({type:2,doc:R}),k=!0,(g&&this.eu(R,g)>0||m&&this.eu(R,m)<0)&&(d=!0)):!S&&R?(o.track({type:0,doc:R}),k=!0):S&&!R&&(o.track({type:1,doc:S}),k=!0,(g||m)&&(d=!0)),k&&(R?(u=u.add(R),l=O?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),o.track({type:1,doc:v})}return{tu:u,iu:o,Ss:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o,r){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,T)=>(function(R,x){const O=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re(20277,{Vt:k})}};return O(R)-O(x)})(v.type,T.type)||this.eu(v.doc,T.doc))),this.ou(o),r=r??!1;const d=t&&!r?this._u():[],g=this.Ya.size===0&&this.current&&!r?1:0,m=g!==this.Xa;return this.Xa=g,u.length!==0||m?{snapshot:new ha(this.query,e.tu,l,u,e.mutatedKeys,g===0,m,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Yv,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Ke(),this.tu.forEach((o=>{this.uu(o.key)&&(this.Ya=this.Ya.add(o.key))}));const t=[];return e.forEach((o=>{this.Ya.has(o)||t.push(new cS(o))})),this.Ya.forEach((o=>{e.has(o)||t.push(new uS(o))})),t}cu(e){this.Za=e.ks,this.Ya=Ke();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ha.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const nm="SyncEngine";class PN{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class UN{constructor(e){this.key=e,this.hu=!1}}class LN{constructor(e,t,o,r,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=r,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new ir((d=>CE(d)),mf),this.Iu=new Map,this.Eu=new Set,this.Ru=new Et(Te.comparator),this.Au=new Map,this.Vu=new Yp,this.du={},this.mu=new Map,this.fu=da.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ON(n,e,t=!0){const o=gS(n);let r;const l=o.Tu.get(e);return l?(o.sharedClientState.addLocalQueryTarget(l.targetId),r=l.view.lu()):r=await fS(o,e,t,!0),r}async function kN(n,e){const t=gS(n);await fS(t,e,!0,!1)}async function fS(n,e,t,o){const r=await iN(n.localStore,Ki(e)),l=r.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let d;return o&&(d=await qN(n,e,l,u==="current",r.resumeToken)),n.isPrimaryClient&&t&&eS(n.remoteStore,r),d}async function qN(n,e,t,o,r){n.pu=(T,S,R)=>(async function(O,k,K,ne){let j=k.view.ru(K);j.Ss&&(j=await qv(O.localStore,k.query,!1).then((({documents:M})=>k.view.ru(M,j))));const ae=ne&&ne.targetChanges.get(k.targetId),W=ne&&ne.targetMismatches.get(k.targetId)!=null,F=k.view.applyChanges(j,O.isPrimaryClient,ae,W);return Xv(O,k.targetId,F.au),F.snapshot})(n,T,S,R);const l=await qv(n.localStore,e,!0),u=new VN(e,l.ks),d=u.ru(l.documents),g=$l.createSynthesizedTargetChangeForCurrentChange(t,o&&n.onlineState!=="Offline",r),m=u.applyChanges(d,n.isPrimaryClient,g);Xv(n,t,m.au);const v=new PN(e,t,u);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function BN(n,e,t){const o=Pe(n),r=o.Tu.get(e),l=o.Iu.get(r.targetId);if(l.length>1)return o.Iu.set(r.targetId,l.filter((u=>!mf(u,e)))),void o.Tu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(r.targetId),o.sharedClientState.isActiveQueryTarget(r.targetId)||await lp(o.localStore,r.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(r.targetId),t&&Xp(o.remoteStore,r.targetId),fp(o,r.targetId)})).catch(ga)):(fp(o,r.targetId),await lp(o.localStore,r.targetId,!0))}async function GN(n,e){const t=Pe(n),o=t.Tu.get(e),r=t.Iu.get(o.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(o.targetId),Xp(t.remoteStore,o.targetId))}async function FN(n,e,t){const o=XN(n);try{const r=await(function(u,d){const g=Pe(u),m=gt.now(),v=d.reduce(((R,x)=>R.add(x.key)),Ke());let T,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let x=Eo(),O=Ke();return g.xs.getEntries(R,v).next((k=>{x=k,x.forEach(((K,ne)=>{ne.isValidDocument()||(O=O.add(K))}))})).next((()=>g.localDocuments.getOverlayedDocuments(R,x))).next((k=>{T=k;const K=[];for(const ne of d){const j=n1(ne,T.get(ne.key).overlayedDocument);j!=null&&K.push(new or(ne.key,j,gE(j.value.mapValue),Qi.exists(!0)))}return g.mutationQueue.addMutationBatch(R,m,K,d)})).next((k=>{S=k;const K=k.applyToLocalDocumentSet(T,O);return g.documentOverlayCache.saveOverlays(R,k.batchId,K)}))})).then((()=>({batchId:S.batchId,changes:wE(T)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(r.batchId),(function(u,d,g){let m=u.du[u.currentUser.toKey()];m||(m=new Et(Je)),m=m.insert(d,g),u.du[u.currentUser.toKey()]=m})(o,r.batchId,t),await Zl(o,r.changes),await Sf(o.remoteStore)}catch(r){const l=em(r,"Failed to persist write");t.reject(l)}}async function dS(n,e){const t=Pe(n);try{const o=await eN(t.localStore,e);e.targetChanges.forEach(((r,l)=>{const u=t.Au.get(l);u&&(ot(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?u.hu=!0:r.modifiedDocuments.size>0?ot(u.hu,14607):r.removedDocuments.size>0&&(ot(u.hu,42227),u.hu=!1))})),await Zl(t,o,e)}catch(o){await ga(o)}}function Qv(n,e,t){const o=Pe(n);if(o.isPrimaryClient&&t===0||!o.isPrimaryClient&&t===1){const r=[];o.Tu.forEach(((l,u)=>{const d=u.view.va(e);d.snapshot&&r.push(d.snapshot)})),(function(u,d){const g=Pe(u);g.onlineState=d;let m=!1;g.queries.forEach(((v,T)=>{for(const S of T.ba)S.va(d)&&(m=!0)})),m&&tm(g)})(o.eventManager,e),r.length&&o.Pu.J_(r),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function HN(n,e,t){const o=Pe(n);o.sharedClientState.updateQueryState(e,"rejected",t);const r=o.Au.get(e),l=r&&r.key;if(l){let u=new Et(Te.comparator);u=u.insert(l,hn.newNoDocument(l,xe.min()));const d=Ke().add(l),g=new vf(xe.min(),new Map,new Et(Je),u,d);await dS(o,g),o.Ru=o.Ru.remove(l),o.Au.delete(e),im(o)}else await lp(o.localStore,e,!1).then((()=>fp(o,e,t))).catch(ga)}async function zN(n,e){const t=Pe(n),o=e.batch.batchId;try{const r=await j1(t.localStore,e);pS(t,o,null),hS(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),await Zl(t,r)}catch(r){await ga(r)}}async function YN(n,e,t){const o=Pe(n);try{const r=await(function(u,d){const g=Pe(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return g.mutationQueue.lookupMutationBatch(m,d).next((T=>(ot(T!==null,37113),v=T.keys(),g.mutationQueue.removeMutationBatch(m,T)))).next((()=>g.mutationQueue.performConsistencyCheck(m))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(m,v,d))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>g.localDocuments.getDocuments(m,v)))}))})(o.localStore,e);pS(o,e,t),hS(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),await Zl(o,r)}catch(r){await ga(r)}}function hS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function pS(n,e,t){const o=Pe(n);let r=o.du[o.currentUser.toKey()];if(r){const l=r.get(e);l&&(t?l.reject(t):l.resolve(),r=r.remove(e)),o.du[o.currentUser.toKey()]=r}}function fp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const o of n.Iu.get(e))n.Tu.delete(o),t&&n.Pu.yu(o,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((o=>{n.Vu.containsKey(o)||mS(n,o)}))}function mS(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(Xp(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),im(n))}function Xv(n,e,t){for(const o of t)o instanceof uS?(n.Vu.addReference(o.key,e),JN(n,o)):o instanceof cS?(me(nm,"Document no longer in limbo: "+o.key),n.Vu.removeReference(o.key,e),n.Vu.containsKey(o.key)||mS(n,o.key)):Re(19791,{wu:o})}function JN(n,e){const t=e.key,o=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(o)||(me(nm,"New document in limbo: "+t),n.Eu.add(o),im(n))}function im(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Te(ht.fromString(e)),o=n.fu.next();n.Au.set(o,new UN(t)),n.Ru=n.Ru.insert(t,o),eS(n.remoteStore,new is(Ki(Bp(t.path)),o,"TargetPurposeLimboResolution",df.ce))}}async function Zl(n,e,t){const o=Pe(n),r=[],l=[],u=[];o.Tu.isEmpty()||(o.Tu.forEach(((d,g)=>{u.push(o.pu(g,e,t).then((m=>{var v;if((m||t)&&o.isPrimaryClient){const T=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:v.current;o.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(m){r.push(m);const T=Kp.Es(g.targetId,m);l.push(T)}})))})),await Promise.all(u),o.Pu.J_(r),await(async function(g,m){const v=Pe(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>re.forEach(m,(S=>re.forEach(S.Ts,(R=>v.persistence.referenceDelegate.addReference(T,S.targetId,R))).next((()=>re.forEach(S.Is,(R=>v.persistence.referenceDelegate.removeReference(T,S.targetId,R)))))))))}catch(T){if(!ya(T))throw T;me(Qp,"Failed to update sequence numbers: "+T)}for(const T of m){const S=T.targetId;if(!T.fromCache){const R=v.vs.get(S),x=R.snapshotVersion,O=R.withLastLimboFreeSnapshotVersion(x);v.vs=v.vs.insert(S,O)}}})(o.localStore,l))}async function KN(n,e){const t=Pe(n);if(!t.currentUser.isEqual(e)){me(nm,"User change. New user:",e.toKey());const o=await $E(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((d=>{d.forEach((g=>{g.reject(new he(oe.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await Zl(t,o.Ns)}}function QN(n,e){const t=Pe(n),o=t.Au.get(e);if(o&&o.hu)return Ke().add(o.key);{let r=Ke();const l=t.Iu.get(e);if(!l)return r;for(const u of l){const d=t.Tu.get(u);r=r.unionWith(d.view.nu)}return r}}function gS(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=dS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HN.bind(null,e),e.Pu.J_=DN.bind(null,e.eventManager),e.Pu.yu=xN.bind(null,e.eventManager),e}function XN(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YN.bind(null,e),e}class of{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Z1(this.persistence,new X1,e.initialUser,this.serializer)}Cu(e){return new XE(Jp.Vi,this.serializer)}Du(e){return new sN}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}of.provider={build:()=>new of};class $N extends of{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ot(this.persistence.referenceDelegate instanceof tf,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new P1(o,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new XE((o=>tf.Vi(o,t)),this.serializer)}}class dp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>Qv(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=KN.bind(null,this.syncEngine),await NN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new MN})()}createDatastore(e){const t=Tf(e.databaseInfo.databaseId),o=cN(e.databaseInfo);return mN(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return(function(o,r,l,u,d){return new yN(o,r,l,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Qv(this.syncEngine,t,0)),(function(){return Fv.v()?new Fv:new rN})())}createSyncEngine(e,t){return(function(r,l,u,d,g,m,v){const T=new LN(r,l,u,d,g,m);return v&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const l=Pe(r);me(tr,"RemoteStore shutting down."),l.Ea.add(5),await Wl(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}dp.provider={build:()=>new dp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):To("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="FirestoreClient";class WN{constructor(e,t,o,r,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this._databaseInfo=r,this.user=dn.UNAUTHENTICATED,this.clientId=Pp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(o,(async u=>{me(gs,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(o,(u=>(me(gs,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _o;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const o=em(t,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function Gh(n,e){n.asyncQueue.verifyOperationInProgress(),me(gs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let o=t.initialUser;n.setCredentialChangeListener((async r=>{o.isEqual(r)||(await $E(e.localStore,r),o=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function $v(n,e){n.asyncQueue.verifyOperationInProgress();const t=await ZN(n);me(gs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((o=>zv(e.remoteStore,o))),n.setAppCheckTokenChangeListener(((o,r)=>zv(e.remoteStore,r))),n._onlineComponents=e}async function ZN(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){me(gs,"Using user provided OfflineComponentProvider");try{await Gh(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===oe.FAILED_PRECONDITION||r.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;er("Error using user provided cache. Falling back to memory cache: "+t),await Gh(n,new of)}}else me(gs,"Using default OfflineComponentProvider"),await Gh(n,new $N(void 0));return n._offlineComponents}async function _S(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(me(gs,"Using user provided OnlineComponentProvider"),await $v(n,n._uninitializedComponentsProvider._online)):(me(gs,"Using default OnlineComponentProvider"),await $v(n,new dp))),n._onlineComponents}function jN(n){return _S(n).then((e=>e.syncEngine))}async function vS(n){const e=await _S(n),t=e.eventManager;return t.onListen=ON.bind(null,e.syncEngine),t.onUnlisten=BN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=kN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=GN.bind(null,e.syncEngine),t}function eb(n,e,t={}){const o=new _o;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,d,g,m){const v=new yS({next:S=>{v.Nu(),u.enqueueAndForget((()=>aS(l,T)));const R=S.docs.has(d);!R&&S.fromCache?m.reject(new he(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&S.fromCache&&g&&g.source==="server"?m.reject(new he(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),T=new lS(Bp(d.path),v,{includeMetadataChanges:!0,Ka:!0});return rS(l,T)})(await vS(n),n.asyncQueue,e,t,o))),o.promise}function tb(n,e,t={}){const o=new _o;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,d,g,m){const v=new yS({next:S=>{v.Nu(),u.enqueueAndForget((()=>aS(l,T))),S.fromCache&&g.source==="server"?m.reject(new he(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),T=new lS(d,v,{includeMetadataChanges:!0,Ka:!0});return rS(l,T)})(await vS(n),n.asyncQueue,e,t,o))),o.promise}function nb(n,e){const t=new _o;return n.asyncQueue.enqueueAndForget((async()=>FN(await jN(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib="ComponentProvider",Wv=new Map;function ob(n,e,t,o,r){return new Cw(n,e,t,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,TS(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator,o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="firestore.googleapis.com",Zv=!0;class jv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ES,this.ssl=Zv}else this.host=e.host,this.ssl=e.ssl??Zv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=QE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<x1)throw new he(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TS(e.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new he(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new he(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new he(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,r){return o.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Af{constructor(e,t,o,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new iw;switch(o.type){case"firstParty":return new aw(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new he(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const o=Wv.get(t);o&&(me(ib,"Removing Datastore"),Wv.delete(t),o.terminate())})(this),Promise.resolve()}}function sb(n,e,t,o={}){var m;n=cs(n,Af);const r=Dp(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;r&&(bI(`https://${d}`),VI("Firestore",!0)),l.host!==ES&&l.host!==d&&er("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:d,ssl:r,emulatorOptions:o};if(!Yc(g,u)&&(n._setSettings(g),o.mockUserToken)){let v,T;if(typeof o.mockUserToken=="string")v=o.mockUserToken,T=dn.MOCK_USER;else{v=MI(o.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const S=o.mockUserToken.sub||o.mockUserToken.user_id;if(!S)throw new he(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new dn(S)}n._authCredentials=new ow(new oE(v,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new rr(this.firestore,e,this._query)}}class Ht{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new us(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ht(this.firestore,e,this._key)}toJSON(){return{type:Ht._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,o){if(Ql(t,Ht._jsonSchema))return new Ht(e,o||null,new Te(ht.fromString(t.referencePath)))}}Ht._jsonSchemaVersion="firestore/documentReference/1.0",Ht._jsonSchema={type:Ft("string",Ht._jsonSchemaVersion),referencePath:Ft("string")};class us extends rr{constructor(e,t,o){super(e,t,Bp(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new Te(e))}withConverter(e){return new us(this.firestore,e,this._path)}}function e0(n,e,...t){if(n=la(n),sE("collection","path",e),n instanceof Af){const o=ht.fromString(e,...t);return dv(o),new us(n,null,o)}{if(!(n instanceof Ht||n instanceof us))throw new he(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=n._path.child(ht.fromString(e,...t));return dv(o),new us(n.firestore,null,o)}}function hp(n,e,...t){if(n=la(n),arguments.length===1&&(e=Pp.newId()),sE("doc","path",e),n instanceof Af){const o=ht.fromString(e,...t);return fv(o),new Ht(n,null,new Te(o))}{if(!(n instanceof Ht||n instanceof us))throw new he(oe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=n._path.child(ht.fromString(e,...t));return fv(o),new Ht(n.firestore,n instanceof us?n.converter:null,new Te(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0="AsyncQueue";class n0{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ZE(this,"async_queue_retry"),this._c=()=>{const o=Bh();o&&me(t0,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=e;const t=Bh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Bh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new _o;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ya(e))throw e;me(t0,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((o=>{throw this.nc=o,this.rc=!1,To("INTERNAL UNHANDLED ERROR: ",i0(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=t,t}enqueueAfterDelay(e,t,o){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=jp.createAndSchedule(this,e,t,o,(l=>this.hc(l)));return this.tc.push(r),r}uc(){this.nc&&Re(47125,{Pc:i0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,o)=>t.targetTimeMs-o.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function i0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class jl extends Af{constructor(e,t,o,r){super(e,t,o,r),this.type="firestore",this._queue=new n0,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new n0(e),this._firestoreClient=void 0,await e}}}function rb(n,e){const t=typeof n=="object"?n:HR(),o=typeof n=="string"?n:Xc,r=kR(t,"firestore").getImmediate({identifier:o});if(!r._initialized){const l=wI("firestore");l&&sb(r,...l)}return r}function om(n){if(n._terminated)throw new he(oe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||ab(n),n._firestoreClient}function ab(n){var o,r,l,u;const e=n._freezeSettings(),t=ob(n._databaseId,((o=n._app)==null?void 0:o.options.appId)||"",n._persistenceKey,(r=n._app)==null?void 0:r.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new WN(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(g){const m=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jn(ln.fromBase64String(e))}catch(t){throw new he(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new jn(ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ql(e,jn._jsonSchema))return jn.fromBase64String(e.bytes)}}jn._jsonSchemaVersion="firestore/bytes/1.0",jn._jsonSchema={type:Ft("string",jn._jsonSchemaVersion),bytes:Ft("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new an(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$i._jsonSchemaVersion}}static fromJSON(e){if(Ql(e,$i._jsonSchema))return new $i(e.latitude,e.longitude)}}$i._jsonSchemaVersion="firestore/geoPoint/1.0",$i._jsonSchema={type:Ft("string",$i._jsonSchemaVersion),latitude:Ft("number"),longitude:Ft("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,r){if(o.length!==r.length)return!1;for(let l=0;l<o.length;++l)if(o[l]!==r[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ql(e,yi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new yi(e.vectorValues);throw new he(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yi._jsonSchemaVersion="firestore/vectorValue/1.0",yi._jsonSchema={type:Ft("string",yi._jsonSchemaVersion),vectorValues:Ft("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb=/^__.*__$/;class ub{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return this.fieldMask!==null?new or(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xl(e,this.data,t,this.fieldTransforms)}}function CS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re(40011,{dataSource:n})}}class sm{constructor(e,t,o,r,l,u){this.settings=e,this.databaseId=t,this.serializer=o,this.ignoreUndefinedProperties=r,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new sm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var r;const t=(r=this.path)==null?void 0:r.child(e),o=this.contextWith({path:t,arrayElement:!1});return o.validatePathSegment(e),o}childContextForFieldPath(e){var r;const t=(r=this.path)==null?void 0:r.child(e),o=this.contextWith({path:t,arrayElement:!1});return o.validatePath(),o}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return sf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(CS(this.dataSource)&&lb.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class cb{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=o||Tf(e)}createContext(e,t,o,r=!1){return new sm({dataSource:e,methodName:t,targetDoc:o,path:an.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rm(n){const e=n._freezeSettings(),t=Tf(n._databaseId);return new cb(n._databaseId,!!e.ignoreUndefinedProperties,t)}function IS(n,e,t,o,r,l={}){const u=n.createContext(l.merge||l.mergeFields?2:0,e,t,r);NS("Data must be an object, but it was:",u,o);const d=RS(o,u);let g,m;if(l.merge)g=new gi(u.fieldMask),m=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const T of l.mergeFields){const S=eu(e,T,t);if(!u.contains(S))throw new he(oe.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);pb(v,S)||v.push(S)}g=new gi(v),m=u.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,m=u.fieldTransforms;return new ub(new Zn(d),g,m)}function fb(n,e,t,o=!1){return am(t,n.createContext(o?4:3,e))}function am(n,e){if(wS(n=la(n)))return NS("Unsupported field value:",e,n),RS(n,e);if(n instanceof AS)return(function(o,r){if(!CS(r.dataSource))throw r.createError(`${o._methodName}() can only be used with update() and set()`);if(!r.path)throw r.createError(`${o._methodName}() is not currently supported inside arrays`);const l=o._toFieldTransform(r);l&&r.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(o,r){const l=[];let u=0;for(const d of o){let g=am(d,r.childContextForArray(u));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),u++}return{arrayValue:{values:l}}})(n,e)}return(function(o,r){if((o=la(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return $w(r.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const l=gt.fromDate(o);return{timestampValue:ef(r.serializer,l)}}if(o instanceof gt){const l=new gt(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:ef(r.serializer,l)}}if(o instanceof $i)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof jn)return{bytesValue:BE(r.serializer,o._byteString)};if(o instanceof Ht){const l=r.databaseId,u=o.firestore._databaseId;if(!u.isEqual(l))throw r.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:zp(o.firestore._databaseId||r.databaseId,o._key.path)}}if(o instanceof yi)return(function(u,d){const g=u instanceof yi?u.toArray():u;return{mapValue:{fields:{[pE]:{stringValue:mE},[$c]:{arrayValue:{values:g.map((v=>{if(typeof v!="number")throw d.createError("VectorValues must only contain numeric values.");return Gp(d.serializer,v)}))}}}}}})(o,r);if(KE(o))return o._toProto(r.serializer);throw r.createError(`Unsupported field value: ${ff(o)}`)})(n,e)}function RS(n,e){const t={};return lE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):nr(n,((o,r)=>{const l=am(r,e.childContextForField(o));l!=null&&(t[o]=l)})),{mapValue:{fields:t}}}function wS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof gt||n instanceof $i||n instanceof jn||n instanceof Ht||n instanceof AS||n instanceof yi||KE(n))}function NS(n,e,t){if(!wS(t)||!rE(t)){const o=ff(t);throw o==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+o)}}function eu(n,e,t){if((e=la(e))instanceof SS)return e._internalPath;if(typeof e=="string")return hb(n,e);throw sf("Field path arguments must be of type string or ",n,!1,void 0,t)}const db=new RegExp("[~\\*/\\[\\]]");function hb(n,e,t){if(e.search(db)>=0)throw sf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new SS(...e.split("."))._internalPath}catch{throw sf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sf(n,e,t,o,r){const l=o&&!o.isEmpty(),u=r!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(l||u)&&(g+=" (found",l&&(g+=` in field ${o}`),u&&(g+=` in document ${r}`),g+=")"),new he(oe.INVALID_ARGUMENT,d+n+g)}function pb(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{convertValue(e,t="none"){switch(ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(hs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Re(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const o={};return nr(e,((r,l)=>{o[r]=this.convertValue(l,t)})),o}convertVectorValue(e){var o,r,l;const t=(l=(r=(o=e.fields)==null?void 0:o[$c].arrayValue)==null?void 0:r.values)==null?void 0:l.map((u=>Nt(u.doubleValue)));return new yi(t)}convertGeoPoint(e){return new $i(Nt(e.latitude),Nt(e.longitude))}convertArray(e,t){return(e.values||[]).map((o=>this.convertValue(o,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const o=pf(e);return o==null?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Bl(e));default:return null}}convertTimestamp(e){const t=ds(e);return new gt(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=ht.fromString(e);ot(JE(o),9688,{name:e});const r=new Gl(o.get(1),o.get(3)),l=new Te(o.popFirst(5));return r.isEqual(t)||To(`Document ${l} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS extends mb{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,t)}}const o0="@firebase/firestore",s0="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,t,o,r,l){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=r,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(eu("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class gb extends MS{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lm{}class DS extends lm{}function _b(n,e,...t){let o=[];e instanceof lm&&o.push(e),o=o.concat(t),(function(l){const u=l.filter((g=>g instanceof um)).length,d=l.filter((g=>g instanceof Cf)).length;if(u>1||u>0&&d>0)throw new he(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const r of o)n=r._apply(n);return n}class Cf extends DS{constructor(e,t,o){super(),this._field=e,this._op=t,this._value=o,this.type="where"}static _create(e,t,o){return new Cf(e,t,o)}_apply(e){const t=this._parse(e);return xS(e._query,t),new rr(e.firestore,e.converter,np(e._query,t))}_parse(e){const t=rm(e.firestore);return(function(l,u,d,g,m,v,T){let S;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new he(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){a0(T,v);const x=[];for(const O of T)x.push(r0(g,l,O));S={arrayValue:{values:x}}}else S=r0(g,l,T)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||a0(T,v),S=fb(d,u,T,v==="in"||v==="not-in");return Gt.create(m,v,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function vb(n,e,t){const o=e,r=eu("where",n);return Cf._create(r,o,t)}class um extends lm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new um(e,t)}_parse(e){const t=this._queryConstraints.map((o=>o._parse(e))).filter((o=>o.getFilters().length>0));return t.length===1?t[0]:Ti.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,l){let u=r;const d=l.getFlattenedFilters();for(const g of d)xS(u,g),u=np(u,g)})(e._query,t),new rr(e.firestore,e.converter,np(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class cm extends DS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new cm(e,t)}_apply(e){const t=(function(r,l,u){if(r.startAt!==null)throw new he(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new he(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Hl(l,u)})(e._query,this._field,this._direction);return new rr(e.firestore,e.converter,Fw(e._query,t))}}function Tb(n,e="asc"){const t=e,o=eu("orderBy",n);return cm._create(o,t)}function r0(n,e,t){if(typeof(t=la(t))=="string"){if(t==="")throw new he(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!AE(e)&&t.indexOf("/")!==-1)throw new he(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(ht.fromString(t));if(!Te.isDocumentKey(o))throw new he(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Tv(n,new Te(o))}if(t instanceof Ht)return Tv(n,t._key);throw new he(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ff(t)}.`)}function a0(n,e){if(!Array.isArray(n)||n.length===0)throw new he(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xS(n,e){const t=(function(r,l){for(const u of r)for(const d of u.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function VS(n,e,t){let o;return o=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,o}class Ml{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zs extends MS{constructor(e,t,o,r,l,u){super(e,t,o,r,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Gc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(eu("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Zs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Zs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zs._jsonSchema={type:Ft("string",Zs._jsonSchemaVersion),bundleSource:Ft("string","DocumentSnapshot"),bundleName:Ft("string"),bundle:Ft("string")};class Gc extends Zs{data(e={}){return super.data(e)}}class sa{constructor(e,t,o,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Ml(r.hasPendingWrites,r.fromCache),this.query=o}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((o=>{e.call(t,new Gc(this._firestore,this._userDataWriter,o.key,o,new Ml(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,l){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map((d=>{const g=new Gc(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ml(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const g=new Gc(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ml(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:Eb(d.type),doc:g,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=sa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Pp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],o=[],r=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),o.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),r.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Eb(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sa._jsonSchemaVersion="firestore/querySnapshot/1.0",sa._jsonSchema={type:Ft("string",sa._jsonSchemaVersion),bundleSource:Ft("string","QuerySnapshot"),bundleName:Ft("string"),bundle:Ft("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(n){n=cs(n,Ht);const e=cs(n.firestore,jl),t=om(e);return eb(t,n._key).then((o=>Rb(e,n,o)))}function Ab(n){n=cs(n,rr);const e=cs(n.firestore,jl),t=om(e),o=new bS(e);return yb(n._query),tb(t,n._query).then((r=>new sa(e,o,n,r)))}function Cb(n,e,t){n=cs(n,Ht);const o=cs(n.firestore,jl),r=VS(n.converter,e,t),l=rm(o);return PS(o,[IS(l,"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Qi.none())])}function Ib(n,e){const t=cs(n.firestore,jl),o=hp(n),r=VS(n.converter,e),l=rm(n.firestore);return PS(t,[IS(l,"addDoc",o._key,r,n.converter!==null,{}).toMutation(o._key,Qi.exists(!1))]).then((()=>o))}function PS(n,e){const t=om(n);return nb(t,e)}function Rb(n,e,t){const o=t.docs.get(e._key),r=new bS(n);return new Zs(n,r,e._key,o,new Ml(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){nw(FR),Kc(new Ol("firestore",((o,{instanceIdentifier:r,options:l})=>{const u=o.getProvider("app").getImmediate(),d=new jl(new sw(o.getProvider("auth-internal")),new lw(u,o.getProvider("app-check-internal")),Iw(u,r),u);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),na(o0,s0,e),na(o0,s0,"esm2020")})();const wb={apiKey:"AIzaSyD0P6Lucnjj3atGPf1DwXxZiGitFuOGQgg",authDomain:"aura-companion-aa134.firebaseapp.com",projectId:"aura-companion-aa134",storageBucket:"aura-companion-aa134.firebasestorage.app",messagingSenderId:"1019617870199",appId:"1:1019617870199:web:a7aa398e870d131fce2172",measurementId:"G-XGY863DBE6"},Nb=QT(wb),Mc=rb(Nb),os={init:async()=>(console.log("Prisma da Sincronia: Conexo com a nuvem estabelecida."),Promise.resolve()),async saveUser(n){try{const e=hp(Mc,"users",n.username.toLowerCase());await Cb(e,n,{merge:!0})}catch(e){throw console.error("Erro ao salvar usurio na nuvem:",e),e}},async getUser(n){try{const e=hp(Mc,"users",n.toLowerCase()),t=await Sb(e);return t.exists()?t.data():null}catch(e){return console.error("Erro ao buscar usurio na nuvem:",e),null}},async saveMessage(n){try{await Ib(e0(Mc,"messages"),{...n,serverTimestamp:new Date})}catch(e){console.error("Erro ao eternizar mensagem:",e)}},async getChatHistory(n){try{const e=_b(e0(Mc,"messages"),vb("userId","==",n),Tb("timestamp","asc")),t=await Ab(e),o=[];return t.forEach(r=>{o.push(r.data())}),o}catch(e){return console.error("Erro ao carregar histrico da nuvem:",e),[]}}},bb=({onLogin:n})=>{const[e,t]=we.useState(!0),[o,r]=we.useState(""),[l,u]=we.useState(""),[d,g]=we.useState(""),[m,v]=we.useState(""),[T,S]=we.useState(!1),R=async x=>{x.preventDefault(),v(""),S(!0);try{if(e){const O=await os.getUser(o.trim().toLowerCase());O&&O.password===l?n(O):v("Usurio ou senha invlidos.")}else{if(!o||!l||!d){v("Preencha todos os campos, vixe!"),S(!1);return}const O=o.trim().toLowerCase();if(await os.getUser(O)){v("Este usurio j existe na nuvem."),S(!1);return}const K=Date.now(),ne={id:crypto.randomUUID(),username:O,password:l,name:d,auraMoodScore:80,lastInteraction:K,firstInteraction:K};await os.saveUser(ne),n(ne)}}catch(O){console.error(O),v("Erro de conexo com a nuvem. Verifique sua internet.")}finally{S(!1)}};return ie.jsx("div",{className:"flex flex-col items-center justify-center min-h-full w-full p-6 bg-[#050505] overflow-y-auto",children:ie.jsxs("div",{className:"w-full max-w-sm space-y-8 py-10",children:[ie.jsxs("div",{className:"text-center space-y-2 animate-in fade-in slide-in-from-top-4 duration-1000",children:[ie.jsx("h1",{className:"text-5xl font-black tracking-tighter bg-gradient-to-b from-white to-white/40 bg-clip-text text-transparent",children:"Aura"}),ie.jsx("p",{className:"text-white/40 text-[10px] font-black uppercase tracking-[0.3em]",children:"IA Companheira  Nuvem Ativa"})]}),ie.jsxs("form",{onSubmit:R,className:"space-y-4 animate-in fade-in slide-in-from-bottom-6 duration-1000",children:[!e&&ie.jsx("div",{className:"space-y-1",children:ie.jsx("input",{type:"text",value:d,onChange:x=>g(x.target.value),className:"w-full px-5 py-4 bg-white/5 border border-white/10 rounded-2xl focus:outline-none focus:ring-1 focus:ring-white/20 transition-all text-white placeholder:text-white/20",placeholder:"Como quer ser chamado?",disabled:T})}),ie.jsx("div",{className:"space-y-1",children:ie.jsx("input",{type:"text",value:o,autoCapitalize:"none",onChange:x=>r(x.target.value),className:"w-full px-5 py-4 bg-white/5 border border-white/10 rounded-2xl focus:outline-none focus:ring-1 focus:ring-white/20 transition-all text-white placeholder:text-white/20",placeholder:"Usurio",disabled:T})}),ie.jsx("div",{className:"space-y-1",children:ie.jsx("input",{type:"password",value:l,onChange:x=>u(x.target.value),className:"w-full px-5 py-4 bg-white/5 border border-white/10 rounded-2xl focus:outline-none focus:ring-1 focus:ring-white/20 transition-all text-white placeholder:text-white/20",placeholder:"Senha",disabled:T})}),m&&ie.jsx("p",{className:"text-red-400 text-xs text-center font-medium animate-pulse",children:m}),ie.jsx("button",{type:"submit",disabled:T,className:`w-full py-5 bg-white text-black rounded-2xl font-bold active:scale-[0.97] transition-all shadow-[0_10px_30px_rgba(255,255,255,0.1)] ${T?"opacity-50 cursor-not-allowed":""}`,children:T?"SINCRONIZANDO...":e?"ENTRAR":"COMEAR AGORA"})]}),ie.jsx("div",{className:"text-center pt-4",children:ie.jsx("button",{onClick:()=>t(!e),className:"text-white/30 active:text-white/60 transition-colors text-xs font-bold uppercase tracking-widest",children:e?"No tem conta? Cadastrar":"J tem conta? Entrar"})})]})})};var Mb={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Db,xb;function Vb(){return{geminiUrl:Db,vertexUrl:xb}}function Pb(n,e,t,o){var r,l;if(!(n!=null&&n.baseUrl)){const u=Vb();return e?(r=u.vertexUrl)!==null&&r!==void 0?r:t:(l=u.geminiUrl)!==null&&l!==void 0?l:o}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ao{}function de(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function h(n,e,t){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const g=n[d];if(Array.isArray(t))for(let m=0;m<g.length;m++){const v=g[m];h(v,e.slice(l+1),t[m])}else for(const m of g)h(m,e.slice(l+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const g=n[d];h(g[0],e.slice(l+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const o=e[e.length-1],r=n[o];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[o]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let o=0;o<e.length;o++){if(typeof n!="object"||n===null)return t;const r=e[o];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in n){const u=n[l];return Array.isArray(u)?u.map(d=>f(d,e.slice(o+1),t)):t}else return t}else n=n[r]}return n}catch(o){if(o instanceof TypeError)return t;throw o}}function Ub(n,e){for(const[t,o]of Object.entries(e)){const r=t.split("."),l=o.split("."),u=new Set;let d=-1;for(let g=0;g<r.length;g++)if(r[g]==="*"){d=g;break}if(d!==-1&&l.length>d)for(let g=d;g<l.length;g++){const m=l[g];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&u.add(m)}pp(n,r,l,0,u)}}function pp(n,e,t,o,r){if(o>=e.length||typeof n!="object"||n===null)return;const l=e[o];if(l.endsWith("[]")){const u=l.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const g of d[u])pp(g,e,t,o+1,r)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(m=>!m.startsWith("_")&&!r.has(m)),g={};for(const m of d)g[m]=u[m];for(const[m,v]of Object.entries(g)){const T=[];for(const S of t.slice(o))S==="*"?T.push(m):T.push(S);h(u,T,v)}for(const m of d)delete u[m]}}else{const u=n;l in u&&pp(u[l],e,t,o+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fm(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lb(n){const e={},t=f(n,["operationName"]);t!=null&&h(e,["operationName"],t);const o=f(n,["resourceName"]);return o!=null&&h(e,["_url","resourceName"],o),e}function Ob(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response","generateVideoResponse"]);return u!=null&&h(e,["response"],qb(u)),e}function kb(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],Bb(u)),e}function qb(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>Gb(u))),h(e,["generatedVideos"],l)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function Bb(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>Fb(u))),h(e,["generatedVideos"],l)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function Gb(n){const e={},t=f(n,["video"]);return t!=null&&h(e,["video"],Qb(t)),e}function Fb(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],Xb(t)),e}function Hb(n){const e={},t=f(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function zb(n){const e={},t=f(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function Yb(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],Jb(u)),e}function Jb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["parent"]);o!=null&&h(e,["parent"],o);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function US(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],Kb(u)),e}function Kb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["parent"]);o!=null&&h(e,["parent"],o);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function Qb(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const o=f(n,["encodedVideo"]);o!=null&&h(e,["videoBytes"],fm(o));const r=f(n,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function Xb(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const o=f(n,["bytesBase64Encoded"]);o!=null&&h(e,["videoBytes"],fm(o));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var l0;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(l0||(l0={}));var u0;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(u0||(u0={}));var c0;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(c0||(c0={}));var ss;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(ss||(ss={}));var f0;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(f0||(f0={}));var d0;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(d0||(d0={}));var h0;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(h0||(h0={}));var p0;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(p0||(p0={}));var m0;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(m0||(m0={}));var g0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(g0||(g0={}));var y0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(y0||(y0={}));var _0;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(_0||(_0={}));var v0;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(v0||(v0={}));var T0;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(T0||(T0={}));var E0;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(E0||(E0={}));var S0;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(S0||(S0={}));var A0;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(A0||(A0={}));var C0;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(C0||(C0={}));var I0;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(I0||(I0={}));var R0;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(R0||(R0={}));var w0;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(w0||(w0={}));var Jl;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Jl||(Jl={}));var N0;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(N0||(N0={}));var b0;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(b0||(b0={}));var M0;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(M0||(M0={}));var mp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(mp||(mp={}));var D0;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(D0||(D0={}));var x0;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(x0||(x0={}));var gp;(function(n){n.COLLECTION="COLLECTION"})(gp||(gp={}));var V0;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(V0||(V0={}));var P0;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(P0||(P0={}));var U0;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(U0||(U0={}));var L0;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(L0||(L0={}));var O0;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(O0||(O0={}));var k0;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(k0||(k0={}));var q0;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(q0||(q0={}));var B0;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(B0||(B0={}));var G0;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(G0||(G0={}));var F0;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(F0||(F0={}));var H0;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(H0||(H0={}));var z0;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(z0||(z0={}));var Y0;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(Y0||(Y0={}));var J0;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING",n.DISTILLATION="DISTILLATION"})(J0||(J0={}));var K0;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(K0||(K0={}));var Q0;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Q0||(Q0={}));var X0;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(X0||(X0={}));var $0;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})($0||($0={}));var W0;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(W0||(W0={}));var Z0;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Z0||(Z0={}));var j0;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.ACTIVITY_START="ACTIVITY_START",n.ACTIVITY_END="ACTIVITY_END"})(j0||(j0={}));var eT;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(eT||(eT={}));var tT;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(tT||(tT={}));var nT;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(nT||(nT={}));var iT;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(iT||(iT={}));var oT;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(oT||(oT={}));var sT;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(sT||(sT={}));var ea;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(ea||(ea={}));class yp{constructor(e){const t={};for(const o of e.headers.entries())t[o[0]]=o[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Il{get text(){var e,t,o,r,l,u,d,g;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const T=[];for(const S of(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[R,x]of Object.entries(S))R!=="text"&&R!=="thought"&&R!=="thoughtSignature"&&(x!==null||x!==void 0)&&T.push(R);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,m+=S.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,t,o,r,l,u,d,g;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const T of(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[S,R]of Object.entries(T))S!=="inlineData"&&(R!==null||R!==void 0)&&v.push(S);T.inlineData&&typeof T.inlineData.data=="string"&&(m+=atob(T.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,o,r,l,u,d,g;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,o,r,l,u,d,g,m;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,o,r,l,u,d,g,m;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class rT{}class aT{}class $b{}class Wb{}class Zb{}class jb{}class lT{}class uT{}class cT{}class eM{}class rf{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new rf;let r;const l=e;return t?r=kb(l):r=Ob(l),Object.assign(o,r),o}}class fT{}class dT{}class hT{}class pT{}class tM{}class nM{}class iM{}class dm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new dm,l=Yb(e);return Object.assign(o,l),o}}class oM{}class sM{}class rM{}class aM{}class mT{}class lM{get text(){var e,t,o;let r="",l=!1;const u=[];for(const d of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[g,m]of Object.entries(d))g!=="text"&&g!=="thought"&&m!==null&&u.push(g);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,r+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,t,o;let r="";const l=[];for(const u of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[d,g]of Object.entries(u))d!=="inlineData"&&g!==null&&l.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class uM{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class hm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new hm,l=US(e);return Object.assign(o,l),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tt(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function LS(n,e){const t=tt(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function OS(n){return Array.isArray(n)?n.map(e=>af(e)):[af(n)]}function af(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function kS(n){const e=af(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function qS(n){const e=af(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function gT(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function BS(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>gT(e)):[gT(n)]}function _p(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function yT(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function _T(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function pn(n){if(n==null)throw new Error("ContentUnion is required");return _p(n)?n:{role:"user",parts:BS(n)}}function pm(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const o=pn(t);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(n.isVertexAI()){const t=pn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>pn(t)):[pn(e)]}function ei(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(yT(n)||_T(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[pn(n)]}const e=[],t=[],o=_p(n[0]);for(const r of n){const l=_p(r);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(yT(r)||_T(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return o||e.push({role:"user",parts:BS(t)}),e}function cM(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(o=>o!=="null");if(t.length===1)e.type=Object.values(ss).includes(t[0].toUpperCase())?t[0].toUpperCase():ss.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of t)e.anyOf.push({type:Object.values(ss).includes(o.toUpperCase())?o.toUpperCase():ss.TYPE_UNSPECIFIED})}}function ra(n){const e={},t=["items"],o=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&cM(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(ss).includes(d.toUpperCase())?d.toUpperCase():ss.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=ra(d);else if(o.includes(u)){const g=[];for(const m of d){if(m.type=="null"){e.nullable=!0;continue}g.push(ra(m))}e[u]=g}else if(r.includes(u)){const g={};for(const[m,v]of Object.entries(d))g[m]=ra(v);e[u]=g}else{if(u==="additionalProperties")continue;e[u]=d}return e}function mm(n){return ra(n)}function gm(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function ym(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Ta(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ra(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ra(e.response));return n}function Ea(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function fM(n,e,t,o=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===o;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function Co(n,e){if(typeof e!="string")throw new Error("name must be a string");return fM(n,e,"cachedContents")}function GS(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function ys(n){return fm(n)}function dM(n){return n!=null&&typeof n=="object"&&"name"in n}function hM(n){return n!=null&&typeof n=="object"&&"video"in n}function pM(n){return n!=null&&typeof n=="object"&&"uri"in n}function FS(n){var e;let t;if(dM(n)&&(t=n.name),!(pM(n)&&(t=n.uri,t===void 0))&&!(hM(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function HS(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function zS(n){for(const e of["models","tunedModels","publisherModels"])if(mM(n,e))return n[e];return[]}function mM(n,e){return n!==null&&typeof n=="object"&&e in n}function gM(n,e={}){const t=n,o={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(o.responseJsonSchema=t.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function yM(n,e={}){const t=[],o=new Set;for(const r of n){const l=r.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const u=gM(r,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function YS(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const o=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function _M(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function JS(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let l=!1;for(const u of r){if(typeof u!="object"||u===null)continue;const g=u.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Sa(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function KS(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vM(n){const e={},t=f(n,["responsesFile"]);t!=null&&h(e,["fileName"],t);const o=f(n,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>jM(u))),h(e,["inlinedResponses"],l)}const r=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["inlinedEmbedContentResponses"],l)}return e}function TM(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&h(e,["format"],t);const o=f(n,["gcsDestination","outputUriPrefix"]);o!=null&&h(e,["gcsUri"],o);const r=f(n,["bigqueryDestination","outputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function EM(n){const e={},t=f(n,["format"]);t!=null&&h(e,["predictionsFormat"],t);const o=f(n,["gcsUri"]);o!=null&&h(e,["gcsDestination","outputUriPrefix"],o);const r=f(n,["bigqueryUri"]);if(r!=null&&h(e,["bigqueryDestination","outputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Fc(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata","displayName"]);o!=null&&h(e,["displayName"],o);const r=f(n,["metadata","state"]);r!=null&&h(e,["state"],KS(r));const l=f(n,["metadata","createTime"]);l!=null&&h(e,["createTime"],l);const u=f(n,["metadata","endTime"]);u!=null&&h(e,["endTime"],u);const d=f(n,["metadata","updateTime"]);d!=null&&h(e,["updateTime"],d);const g=f(n,["metadata","model"]);g!=null&&h(e,["model"],g);const m=f(n,["metadata","output"]);return m!=null&&h(e,["dest"],vM(JS(m))),e}function vp(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["displayName"]);o!=null&&h(e,["displayName"],o);const r=f(n,["state"]);r!=null&&h(e,["state"],KS(r));const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["createTime"]);u!=null&&h(e,["createTime"],u);const d=f(n,["startTime"]);d!=null&&h(e,["startTime"],d);const g=f(n,["endTime"]);g!=null&&h(e,["endTime"],g);const m=f(n,["updateTime"]);m!=null&&h(e,["updateTime"],m);const v=f(n,["model"]);v!=null&&h(e,["model"],v);const T=f(n,["inputConfig"]);T!=null&&h(e,["src"],SM(T));const S=f(n,["outputConfig"]);S!=null&&h(e,["dest"],TM(JS(S)));const R=f(n,["completionStats"]);return R!=null&&h(e,["completionStats"],R),e}function SM(n){const e={},t=f(n,["instancesFormat"]);t!=null&&h(e,["format"],t);const o=f(n,["gcsSource","uris"]);o!=null&&h(e,["gcsUri"],o);const r=f(n,["bigquerySource","inputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function AM(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=f(e,["fileName"]);o!=null&&h(t,["fileName"],o);const r=f(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>ZM(n,u))),h(t,["requests","requests"],l)}return t}function CM(n){const e={},t=f(n,["format"]);t!=null&&h(e,["instancesFormat"],t);const o=f(n,["gcsUri"]);o!=null&&h(e,["gcsSource","uris"],o);const r=f(n,["bigqueryUri"]);if(r!=null&&h(e,["bigquerySource","inputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function IM(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function RM(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],Sa(n,o)),t}function wM(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],Sa(n,o)),t}function NM(n){const e={},t=f(n,["content"]);t!=null&&h(e,["content"],t);const o=f(n,["citationMetadata"]);o!=null&&h(e,["citationMetadata"],bM(o));const r=f(n,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const l=f(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const u=f(n,["avgLogprobs"]);u!=null&&h(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const g=f(n,["index"]);g!=null&&h(e,["index"],g);const m=f(n,["logprobsResult"]);m!=null&&h(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(R=>R)),h(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&h(e,["urlContextMetadata"],T),e}function bM(n){const e={},t=f(n,["citationSources"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>r)),h(e,["citations"],o)}return e}function QS(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>rD(l))),h(e,["parts"],r)}const o=f(n,["role"]);return o!=null&&h(e,["role"],o),e}function MM(n,e){const t={},o=f(n,["displayName"]);if(e!==void 0&&o!=null&&h(e,["batch","displayName"],o),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function DM(n,e){const t={},o=f(n,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const r=f(n,["dest"]);return e!==void 0&&r!=null&&h(e,["outputConfig"],EM(_M(r))),t}function vT(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],tt(n,o));const r=f(e,["src"]);r!=null&&h(t,["batch","inputConfig"],AM(n,YS(n,r)));const l=f(e,["config"]);return l!=null&&MM(l,t),t}function xM(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["model"],tt(n,o));const r=f(e,["src"]);r!=null&&h(t,["inputConfig"],CM(YS(n,r)));const l=f(e,["config"]);return l!=null&&DM(l,t),t}function VM(n,e){const t={},o=f(n,["displayName"]);return e!==void 0&&o!=null&&h(e,["batch","displayName"],o),t}function PM(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],tt(n,o));const r=f(e,["src"]);r!=null&&h(t,["batch","inputConfig"],GM(n,r));const l=f(e,["config"]);return l!=null&&VM(l,t),t}function UM(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],Sa(n,o)),t}function LM(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],Sa(n,o)),t}function OM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["name"]);o!=null&&h(e,["name"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);return l!=null&&h(e,["error"],l),e}function kM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["name"]);o!=null&&h(e,["name"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);return l!=null&&h(e,["error"],l),e}function qM(n,e){const t={},o=f(e,["contents"]);if(o!=null){let l=pm(n,o);Array.isArray(l)&&(l=l.map(u=>u)),h(t,["requests[]","request","content"],l)}const r=f(e,["config"]);return r!=null&&(h(t,["_self"],BM(r,t)),Ub(t,{"requests[].*":"requests[].request.*"})),t}function BM(n,e){const t={},o=f(n,["taskType"]);e!==void 0&&o!=null&&h(e,["requests[]","taskType"],o);const r=f(n,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function GM(n,e){const t={},o=f(e,["fileName"]);o!=null&&h(t,["file_name"],o);const r=f(e,["inlinedRequests"]);return r!=null&&h(t,["requests"],qM(n,r)),t}function FM(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function HM(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const o=f(n,["args"]);o!=null&&h(e,["args"],o);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function zM(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&h(e,["allowedFunctionNames"],t);const o=f(n,["mode"]);if(o!=null&&h(e,["mode"],o),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function YM(n,e,t){const o={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&h(t,["systemInstruction"],QS(pn(r)));const l=f(e,["temperature"]);l!=null&&h(o,["temperature"],l);const u=f(e,["topP"]);u!=null&&h(o,["topP"],u);const d=f(e,["topK"]);d!=null&&h(o,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&h(o,["candidateCount"],g);const m=f(e,["maxOutputTokens"]);m!=null&&h(o,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&h(o,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&h(o,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&h(o,["logprobs"],S);const R=f(e,["presencePenalty"]);R!=null&&h(o,["presencePenalty"],R);const x=f(e,["frequencyPenalty"]);x!=null&&h(o,["frequencyPenalty"],x);const O=f(e,["seed"]);O!=null&&h(o,["seed"],O);const k=f(e,["responseMimeType"]);k!=null&&h(o,["responseMimeType"],k);const K=f(e,["responseSchema"]);K!=null&&h(o,["responseSchema"],mm(K));const ne=f(e,["responseJsonSchema"]);if(ne!=null&&h(o,["responseJsonSchema"],ne),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=f(e,["safetySettings"]);if(t!==void 0&&j!=null){let D=j;Array.isArray(D)&&(D=D.map(Ce=>aD(Ce))),h(t,["safetySettings"],D)}const ae=f(e,["tools"]);if(t!==void 0&&ae!=null){let D=Ea(ae);Array.isArray(D)&&(D=D.map(Ce=>uD(Ta(Ce)))),h(t,["tools"],D)}const W=f(e,["toolConfig"]);if(t!==void 0&&W!=null&&h(t,["toolConfig"],lD(W)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=f(e,["cachedContent"]);t!==void 0&&F!=null&&h(t,["cachedContent"],Co(n,F));const M=f(e,["responseModalities"]);M!=null&&h(o,["responseModalities"],M);const b=f(e,["mediaResolution"]);b!=null&&h(o,["mediaResolution"],b);const N=f(e,["speechConfig"]);if(N!=null&&h(o,["speechConfig"],gm(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=f(e,["thinkingConfig"]);P!=null&&h(o,["thinkingConfig"],P);const V=f(e,["imageConfig"]);V!=null&&h(o,["imageConfig"],WM(V));const B=f(e,["enableEnhancedCivicAnswers"]);if(B!=null&&h(o,["enableEnhancedCivicAnswers"],B),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function JM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(m=>NM(m))),h(e,["candidates"],g)}const r=f(n,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const l=f(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const u=f(n,["responseId"]);u!=null&&h(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function KM(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],Sa(n,o)),t}function QM(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],Sa(n,o)),t}function XM(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function $M(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function WM(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const o=f(n,["imageSize"]);if(o!=null&&h(e,["imageSize"],o),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function ZM(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["request","model"],tt(n,o));const r=f(e,["contents"]);if(r!=null){let d=ei(r);Array.isArray(d)&&(d=d.map(g=>QS(g))),h(t,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&h(t,["metadata"],l);const u=f(e,["config"]);return u!=null&&h(t,["request","generationConfig"],YM(n,u,f(t,["request"],{}))),t}function jM(n){const e={},t=f(n,["response"]);t!=null&&h(e,["response"],JM(t));const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["error"]);return r!=null&&h(e,["error"],r),e}function eD(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);if(e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function tD(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);e!==void 0&&r!=null&&h(e,["_query","pageToken"],r);const l=f(n,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),t}function nD(n){const e={},t=f(n,["config"]);return t!=null&&eD(t,e),e}function iD(n){const e={},t=f(n,["config"]);return t!=null&&tD(t,e),e}function oD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Fc(u))),h(e,["batchJobs"],l)}return e}function sD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>vp(u))),h(e,["batchJobs"],l)}return e}function rD(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],FM(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],HM(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],IM(g));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function aD(n){const e={},t=f(n,["category"]);if(t!=null&&h(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(n,["threshold"]);return o!=null&&h(e,["threshold"],o),e}function lD(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&h(e,["retrievalConfig"],t);const o=f(n,["functionCallingConfig"]);return o!=null&&h(e,["functionCallingConfig"],zM(o)),e}function uD(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);const o=f(n,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(T=>T)),h(e,["functionDeclarations"],v)}const u=f(n,["googleMaps"]);u!=null&&h(e,["googleMaps"],XM(u));const d=f(n,["googleSearch"]);d!=null&&h(e,["googleSearch"],$M(d));const g=f(n,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var So;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(So||(So={}));class ar{constructor(e,t,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,o,r)}init(e,t,o){var r,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!o||Object.keys(o).length===0?u={config:{}}:typeof o=="object"?u=Object.assign({},o):u=o,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cD extends Ao{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ar(So.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=vT(this.apiClient,e),o=t._url,r=de("{model}:batchGenerateContent",o),d=t.batch.inputConfig.requests,g=d.requests,m=[];for(const v of g){const T=Object.assign({},v);if(T.systemInstruction){const S=T.systemInstruction;delete T.systemInstruction;const R=T.request;R.systemInstruction=S,T.request=R}m.push(T)}return d.requests=m,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const o=t?Object.assign({},t):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${r}`;else if(u)o.dest=`${u}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=xM(this.apiClient,e);return d=de("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>vp(v))}else{const m=vT(this.apiClient,e);return d=de("{model}:batchGenerateContent",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>Fc(v))}}async createEmbeddingsInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=PM(this.apiClient,e);return l=de("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>Fc(g))}}async get(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=QM(this.apiClient,e);return d=de("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>vp(v))}else{const m=KM(this.apiClient,e);return d=de("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>Fc(v))}}async cancel(e){var t,o,r,l;let u="",d={};if(this.apiClient.isVertexAI()){const g=wM(this.apiClient,e);u=de("batchPredictionJobs/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const g=RM(this.apiClient,e);u=de("batches/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=iD(e);return d=de("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=sD(v),S=new mT;return Object.assign(S,T),S})}else{const m=nD(e);return d=de("batches",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=oD(v),S=new mT;return Object.assign(S,T),S})}}async delete(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=LM(this.apiClient,e);return d=de("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>kM(v))}else{const m=UM(this.apiClient,e);return d=de("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>OM(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fD(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function TT(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>PD(l))),h(e,["parts"],r)}const o=f(n,["role"]);return o!=null&&h(e,["role"],o),e}function dD(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const l=f(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let v=ei(u);Array.isArray(v)&&(v=v.map(T=>TT(T))),h(e,["contents"],v)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],TT(pn(d)));const g=f(n,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(T=>LD(T))),h(e,["tools"],v)}const m=f(n,["toolConfig"]);if(e!==void 0&&m!=null&&h(e,["toolConfig"],UD(m)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function hD(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const l=f(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let T=ei(u);Array.isArray(T)&&(T=T.map(S=>S)),h(e,["contents"],T)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],pn(d));const g=f(n,["tools"]);if(e!==void 0&&g!=null){let T=g;Array.isArray(T)&&(T=T.map(S=>OD(S))),h(e,["tools"],T)}const m=f(n,["toolConfig"]);e!==void 0&&m!=null&&h(e,["toolConfig"],m);const v=f(n,["kmsKeyName"]);return e!==void 0&&v!=null&&h(e,["encryption_spec","kmsKeyName"],v),t}function pD(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["model"],LS(n,o));const r=f(e,["config"]);return r!=null&&dD(r,t),t}function mD(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["model"],LS(n,o));const r=f(e,["config"]);return r!=null&&hD(r,t),t}function gD(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],Co(n,o)),t}function yD(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],Co(n,o)),t}function _D(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function vD(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function TD(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function ED(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const o=f(n,["args"]);o!=null&&h(e,["args"],o);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function SD(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&h(e,["allowedFunctionNames"],t);const o=f(n,["mode"]);if(o!=null&&h(e,["mode"],o),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function AD(n){const e={},t=f(n,["description"]);t!=null&&h(e,["description"],t);const o=f(n,["name"]);o!=null&&h(e,["name"],o);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&h(e,["response"],u);const d=f(n,["responseJsonSchema"]);if(d!=null&&h(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function CD(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],Co(n,o)),t}function ID(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],Co(n,o)),t}function RD(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function wD(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function ND(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function bD(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function MD(n){const e={},t=f(n,["config"]);return t!=null&&ND(t,e),e}function DD(n){const e={},t=f(n,["config"]);return t!=null&&bD(t,e),e}function xD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["cachedContents"],l)}return e}function VD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["cachedContents"],l)}return e}function PD(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],TD(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],ED(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],fD(g));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function UD(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&h(e,["retrievalConfig"],t);const o=f(n,["functionCallingConfig"]);return o!=null&&h(e,["functionCallingConfig"],SD(o)),e}function LD(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);const o=f(n,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(T=>T)),h(e,["functionDeclarations"],v)}const u=f(n,["googleMaps"]);u!=null&&h(e,["googleMaps"],RD(u));const d=f(n,["googleSearch"]);d!=null&&h(e,["googleSearch"],wD(d));const g=f(n,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function OD(n){const e={},t=f(n,["retrieval"]);t!=null&&h(e,["retrieval"],t);const o=f(n,["computerUse"]);if(o!=null&&h(e,["computerUse"],o),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&h(e,["codeExecution"],r);const l=f(n,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const u=f(n,["functionDeclarations"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>AD(S))),h(e,["functionDeclarations"],T)}const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],d);const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],g);const m=f(n,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);const v=f(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function kD(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),t}function qD(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),t}function BD(n,e){const t={},o=f(e,["name"]);o!=null&&h(t,["_url","name"],Co(n,o));const r=f(e,["config"]);return r!=null&&kD(r,t),t}function GD(n,e){const t={},o=f(e,["name"]);o!=null&&h(t,["_url","name"],Co(n,o));const r=f(e,["config"]);return r!=null&&qD(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FD extends Ao{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ar(So.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(t),t)}async create(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=mD(this.apiClient,e);return d=de("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=pD(this.apiClient,e);return d=de("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=ID(this.apiClient,e);return d=de("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=CD(this.apiClient,e);return d=de("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=yD(this.apiClient,e);return d=de("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=vD(v),S=new hT;return Object.assign(S,T),S})}else{const m=gD(this.apiClient,e);return d=de("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=_D(v),S=new hT;return Object.assign(S,T),S})}}async update(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=GD(this.apiClient,e);return d=de("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=BD(this.apiClient,e);return d=de("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=DD(e);return d=de("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=VD(v),S=new pT;return Object.assign(S,T),S})}else{const m=MD(e);return d=de("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=xD(v),S=new pT;return Object.assign(S,T),S})}}}function lf(n,e){var t={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&e.indexOf(o)<0&&(t[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(n);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(n,o[r])&&(t[o[r]]=n[o[r]]);return t}function ET(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],o=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function De(n){return this instanceof De?(this.v=n,this):new De(n)}function _i(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=t.apply(n,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(R){return function(x){return Promise.resolve(x).then(R,T)}}function d(R,x){o[R]&&(r[R]=function(O){return new Promise(function(k,K){l.push([R,O,k,K])>1||g(R,O)})},x&&(r[R]=x(r[R])))}function g(R,x){try{m(o[R](x))}catch(O){S(l[0][3],O)}}function m(R){R.value instanceof De?Promise.resolve(R.value.v).then(v,T):S(l[0][2],R)}function v(R){g("next",R)}function T(R){g("throw",R)}function S(R,x){R(x),l.shift(),l.length&&g(l[0][0],l[0][1])}}function vi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof ET=="function"?ET(n):n[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(l){t[l]=n[l]&&function(u){return new Promise(function(d,g){u=n[l](u),r(d,g,u.done,u.value)})}}function r(l,u,d,g){Promise.resolve(g).then(function(m){l({value:m,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HD(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:XS(t)}function XS(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function zD(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function ST(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let o=0;for(;o<t;)if(n[o].role==="user")e.push(n[o]),o++;else{const r=[];let l=!0;for(;o<t&&n[o].role==="model";)r.push(n[o]),l&&!XS(n[o])&&(l=!1),o++;l?e.push(...r):e.pop()}return e}class YD{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new JD(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class JD{constructor(e,t,o,r={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=o,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),zD(l)}async sendMessage(e){var t;await this.sendPromise;const o=pn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,u,d;const g=await r,m=(u=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,v=g.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let S=[];v!=null&&(S=(d=v.slice(T))!==null&&d!==void 0?d:[]);const R=m?[m]:[];this.recordHistory(o,R,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const o=pn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,o)}getHistory(e=!1){const t=e?ST(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return _i(this,arguments,function*(){var r,l,u,d,g,m;const v=[];try{for(var T=!0,S=vi(e),R;R=yield De(S.next()),r=R.done,!r;T=!0){d=R.value,T=!1;const x=d;if(HD(x)){const O=(m=(g=x.candidates)===null||g===void 0?void 0:g[0])===null||m===void 0?void 0:m.content;O!==void 0&&v.push(O)}yield yield De(x)}}catch(x){l={error:x}}finally{try{!T&&!r&&(u=S.return)&&(yield De(u.call(S)))}finally{if(l)throw l.error}}this.recordHistory(t,v)})}recordHistory(e,t,o){let r=[];t.length>0&&t.every(l=>l.role!==void 0)?r=t:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...ST(o)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Kl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KD(n){const e={},t=f(n,["file"]);return t!=null&&h(e,["file"],t),e}function QD(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function XD(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","file"],FS(t)),e}function $D(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function WD(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","file"],FS(t)),e}function ZD(n){const e={},t=f(n,["uris"]);return t!=null&&h(e,["uris"],t),e}function jD(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function ex(n){const e={},t=f(n,["config"]);return t!=null&&jD(t,e),e}function tx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["files"],l)}return e}function nx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["files"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),h(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ix extends Ao{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ar(So.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ex(e);return l=de("files",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const m=tx(g),v=new oM;return Object.assign(v,m),v})}}async createInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=KD(e);return l=de("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=QD(g),v=new sM;return Object.assign(v,m),v})}}async get(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=WD(e);return l=de("files/{file}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=XD(e);return l=de("files/{file}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const m=$D(g),v=new rM;return Object.assign(v,m),v})}}async registerFilesInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ZD(e);return l=de("files:register",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=nx(g),v=new aM;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hc(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function ox(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Tx(l))),h(e,["parts"],r)}const o=f(n,["role"]);return o!=null&&h(e,["role"],o),e}function sx(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function rx(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const o=f(n,["args"]);o!=null&&h(e,["args"],o);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ax(n){const e={},t=f(n,["description"]);t!=null&&h(e,["description"],t);const o=f(n,["name"]);o!=null&&h(e,["name"],o);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&h(e,["response"],u);const d=f(n,["responseJsonSchema"]);if(d!=null&&h(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function lx(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const o=f(n,["responseJsonSchema"]);o!=null&&h(e,["responseJsonSchema"],o);const r=f(n,["audioTimestamp"]);r!=null&&h(e,["audioTimestamp"],r);const l=f(n,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const u=f(n,["enableAffectiveDialog"]);u!=null&&h(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const g=f(n,["logprobs"]);g!=null&&h(e,["logprobs"],g);const m=f(n,["maxOutputTokens"]);m!=null&&h(e,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&h(e,["mediaResolution"],v);const T=f(n,["presencePenalty"]);T!=null&&h(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&h(e,["responseLogprobs"],S);const R=f(n,["responseMimeType"]);R!=null&&h(e,["responseMimeType"],R);const x=f(n,["responseModalities"]);x!=null&&h(e,["responseModalities"],x);const O=f(n,["responseSchema"]);O!=null&&h(e,["responseSchema"],O);const k=f(n,["routingConfig"]);k!=null&&h(e,["routingConfig"],k);const K=f(n,["seed"]);K!=null&&h(e,["seed"],K);const ne=f(n,["speechConfig"]);ne!=null&&h(e,["speechConfig"],ne);const j=f(n,["stopSequences"]);j!=null&&h(e,["stopSequences"],j);const ae=f(n,["temperature"]);ae!=null&&h(e,["temperature"],ae);const W=f(n,["thinkingConfig"]);W!=null&&h(e,["thinkingConfig"],W);const F=f(n,["topK"]);F!=null&&h(e,["topK"],F);const M=f(n,["topP"]);if(M!=null&&h(e,["topP"],M),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function ux(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function cx(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function fx(n,e){const t={},o=f(n,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],o);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","speechConfig"],ym(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],R);const x=f(n,["systemInstruction"]);e!==void 0&&x!=null&&h(e,["setup","systemInstruction"],ox(pn(x)));const O=f(n,["tools"]);if(e!==void 0&&O!=null){let F=Ea(O);Array.isArray(F)&&(F=F.map(M=>Sx(Ta(M)))),h(e,["setup","tools"],F)}const k=f(n,["sessionResumption"]);e!==void 0&&k!=null&&h(e,["setup","sessionResumption"],Ex(k));const K=f(n,["inputAudioTranscription"]);e!==void 0&&K!=null&&h(e,["setup","inputAudioTranscription"],K);const ne=f(n,["outputAudioTranscription"]);e!==void 0&&ne!=null&&h(e,["setup","outputAudioTranscription"],ne);const j=f(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&h(e,["setup","realtimeInputConfig"],j);const ae=f(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&h(e,["setup","contextWindowCompression"],ae);const W=f(n,["proactivity"]);if(e!==void 0&&W!=null&&h(e,["setup","proactivity"],W),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function dx(n,e){const t={},o=f(n,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],lx(o));const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","speechConfig"],ym(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],R);const x=f(n,["systemInstruction"]);e!==void 0&&x!=null&&h(e,["setup","systemInstruction"],pn(x));const O=f(n,["tools"]);if(e!==void 0&&O!=null){let M=Ea(O);Array.isArray(M)&&(M=M.map(b=>Ax(Ta(b)))),h(e,["setup","tools"],M)}const k=f(n,["sessionResumption"]);e!==void 0&&k!=null&&h(e,["setup","sessionResumption"],k);const K=f(n,["inputAudioTranscription"]);e!==void 0&&K!=null&&h(e,["setup","inputAudioTranscription"],K);const ne=f(n,["outputAudioTranscription"]);e!==void 0&&ne!=null&&h(e,["setup","outputAudioTranscription"],ne);const j=f(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&h(e,["setup","realtimeInputConfig"],j);const ae=f(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&h(e,["setup","contextWindowCompression"],ae);const W=f(n,["proactivity"]);e!==void 0&&W!=null&&h(e,["setup","proactivity"],W);const F=f(n,["explicitVadSignal"]);return e!==void 0&&F!=null&&h(e,["setup","explicitVadSignal"],F),t}function hx(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["setup","model"],tt(n,o));const r=f(e,["config"]);return r!=null&&h(t,["config"],fx(r,t)),t}function px(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["setup","model"],tt(n,o));const r=f(e,["config"]);return r!=null&&h(t,["config"],dx(r,t)),t}function mx(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&h(e,["musicGenerationConfig"],t),e}function gx(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>r)),h(e,["weightedPrompts"],o)}return e}function yx(n){const e={},t=f(n,["media"]);if(t!=null){let m=OS(t);Array.isArray(m)&&(m=m.map(v=>Hc(v))),h(e,["mediaChunks"],m)}const o=f(n,["audio"]);o!=null&&h(e,["audio"],Hc(qS(o)));const r=f(n,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const l=f(n,["video"]);l!=null&&h(e,["video"],Hc(kS(l)));const u=f(n,["text"]);u!=null&&h(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&h(e,["activityStart"],d);const g=f(n,["activityEnd"]);return g!=null&&h(e,["activityEnd"],g),e}function _x(n){const e={},t=f(n,["media"]);if(t!=null){let m=OS(t);Array.isArray(m)&&(m=m.map(v=>v)),h(e,["mediaChunks"],m)}const o=f(n,["audio"]);o!=null&&h(e,["audio"],qS(o));const r=f(n,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const l=f(n,["video"]);l!=null&&h(e,["video"],kS(l));const u=f(n,["text"]);u!=null&&h(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&h(e,["activityStart"],d);const g=f(n,["activityEnd"]);return g!=null&&h(e,["activityEnd"],g),e}function vx(n){const e={},t=f(n,["setupComplete"]);t!=null&&h(e,["setupComplete"],t);const o=f(n,["serverContent"]);o!=null&&h(e,["serverContent"],o);const r=f(n,["toolCall"]);r!=null&&h(e,["toolCall"],r);const l=f(n,["toolCallCancellation"]);l!=null&&h(e,["toolCallCancellation"],l);const u=f(n,["usageMetadata"]);u!=null&&h(e,["usageMetadata"],Cx(u));const d=f(n,["goAway"]);d!=null&&h(e,["goAway"],d);const g=f(n,["sessionResumptionUpdate"]);g!=null&&h(e,["sessionResumptionUpdate"],g);const m=f(n,["voiceActivityDetectionSignal"]);m!=null&&h(e,["voiceActivityDetectionSignal"],m);const v=f(n,["voiceActivity"]);return v!=null&&h(e,["voiceActivity"],Ix(v)),e}function Tx(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],sx(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],rx(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],Hc(g));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function Ex(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Sx(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);const o=f(n,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(T=>T)),h(e,["functionDeclarations"],v)}const u=f(n,["googleMaps"]);u!=null&&h(e,["googleMaps"],ux(u));const d=f(n,["googleSearch"]);d!=null&&h(e,["googleSearch"],cx(d));const g=f(n,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function Ax(n){const e={},t=f(n,["retrieval"]);t!=null&&h(e,["retrieval"],t);const o=f(n,["computerUse"]);if(o!=null&&h(e,["computerUse"],o),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&h(e,["codeExecution"],r);const l=f(n,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const u=f(n,["functionDeclarations"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>ax(S))),h(e,["functionDeclarations"],T)}const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],d);const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],g);const m=f(n,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);const v=f(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function Cx(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&h(e,["promptTokenCount"],t);const o=f(n,["cachedContentTokenCount"]);o!=null&&h(e,["cachedContentTokenCount"],o);const r=f(n,["candidatesTokenCount"]);r!=null&&h(e,["responseTokenCount"],r);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&h(e,["toolUsePromptTokenCount"],l);const u=f(n,["thoughtsTokenCount"]);u!=null&&h(e,["thoughtsTokenCount"],u);const d=f(n,["totalTokenCount"]);d!=null&&h(e,["totalTokenCount"],d);const g=f(n,["promptTokensDetails"]);if(g!=null){let R=g;Array.isArray(R)&&(R=R.map(x=>x)),h(e,["promptTokensDetails"],R)}const m=f(n,["cacheTokensDetails"]);if(m!=null){let R=m;Array.isArray(R)&&(R=R.map(x=>x)),h(e,["cacheTokensDetails"],R)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let R=v;Array.isArray(R)&&(R=R.map(x=>x)),h(e,["responseTokensDetails"],R)}const T=f(n,["toolUsePromptTokensDetails"]);if(T!=null){let R=T;Array.isArray(R)&&(R=R.map(x=>x)),h(e,["toolUsePromptTokensDetails"],R)}const S=f(n,["trafficType"]);return S!=null&&h(e,["trafficType"],S),e}function Ix(n){const e={},t=f(n,["type"]);return t!=null&&h(e,["voiceActivityType"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rx(n,e){const t={},o=f(n,["data"]);if(o!=null&&h(t,["data"],o),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(n,["mimeType"]);return r!=null&&h(t,["mimeType"],r),t}function wx(n,e){const t={},o=f(n,["content"]);o!=null&&h(t,["content"],o);const r=f(n,["citationMetadata"]);r!=null&&h(t,["citationMetadata"],Nx(r));const l=f(n,["tokenCount"]);l!=null&&h(t,["tokenCount"],l);const u=f(n,["finishReason"]);u!=null&&h(t,["finishReason"],u);const d=f(n,["avgLogprobs"]);d!=null&&h(t,["avgLogprobs"],d);const g=f(n,["groundingMetadata"]);g!=null&&h(t,["groundingMetadata"],g);const m=f(n,["index"]);m!=null&&h(t,["index"],m);const v=f(n,["logprobsResult"]);v!=null&&h(t,["logprobsResult"],v);const T=f(n,["safetyRatings"]);if(T!=null){let R=T;Array.isArray(R)&&(R=R.map(x=>x)),h(t,["safetyRatings"],R)}const S=f(n,["urlContextMetadata"]);return S!=null&&h(t,["urlContextMetadata"],S),t}function Nx(n,e){const t={},o=f(n,["citationSources"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),h(t,["citations"],r)}return t}function bx(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],tt(n,r));const l=f(e,["contents"]);if(l!=null){let u=ei(l);Array.isArray(u)&&(u=u.map(d=>d)),h(o,["contents"],u)}return o}function Mx(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["tokensInfo"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(t,["tokensInfo"],l)}return t}function Dx(n,e){const t={},o=f(n,["values"]);o!=null&&h(t,["values"],o);const r=f(n,["statistics"]);return r!=null&&h(t,["statistics"],xx(r)),t}function xx(n,e){const t={},o=f(n,["truncated"]);o!=null&&h(t,["truncated"],o);const r=f(n,["token_count"]);return r!=null&&h(t,["tokenCount"],r),t}function If(n,e){const t={},o=f(n,["parts"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>G2(u))),h(t,["parts"],l)}const r=f(n,["role"]);return r!=null&&h(t,["role"],r),t}function Vx(n,e){const t={},o=f(n,["controlType"]);o!=null&&h(t,["controlType"],o);const r=f(n,["enableControlImageComputation"]);return r!=null&&h(t,["computeControl"],r),t}function Px(n,e){const t={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function Ux(n,e,t){const o={},r=f(n,["systemInstruction"]);e!==void 0&&r!=null&&h(e,["systemInstruction"],pn(r));const l=f(n,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(g=>jS(g))),h(e,["tools"],d)}const u=f(n,["generationConfig"]);return e!==void 0&&u!=null&&h(e,["generationConfig"],R2(u)),o}function Lx(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],tt(n,r));const l=f(e,["contents"]);if(l!=null){let d=ei(l);Array.isArray(d)&&(d=d.map(g=>If(g))),h(o,["contents"],d)}const u=f(e,["config"]);return u!=null&&Px(u),o}function Ox(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],tt(n,r));const l=f(e,["contents"]);if(l!=null){let d=ei(l);Array.isArray(d)&&(d=d.map(g=>g)),h(o,["contents"],d)}const u=f(e,["config"]);return u!=null&&Ux(u,o),o}function kx(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["totalTokens"]);r!=null&&h(t,["totalTokens"],r);const l=f(n,["cachedContentTokenCount"]);return l!=null&&h(t,["cachedContentTokenCount"],l),t}function qx(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["totalTokens"]);return r!=null&&h(t,["totalTokens"],r),t}function Bx(n,e,t){const o={},r=f(e,["model"]);return r!=null&&h(o,["_url","name"],tt(n,r)),o}function Gx(n,e,t){const o={},r=f(e,["model"]);return r!=null&&h(o,["_url","name"],tt(n,r)),o}function Fx(n,e){const t={},o=f(n,["sdkHttpResponse"]);return o!=null&&h(t,["sdkHttpResponse"],o),t}function Hx(n,e){const t={},o=f(n,["sdkHttpResponse"]);return o!=null&&h(t,["sdkHttpResponse"],o),t}function zx(n,e,t){const o={},r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const l=f(n,["negativePrompt"]);e!==void 0&&l!=null&&h(e,["parameters","negativePrompt"],l);const u=f(n,["numberOfImages"]);e!==void 0&&u!=null&&h(e,["parameters","sampleCount"],u);const d=f(n,["aspectRatio"]);e!==void 0&&d!=null&&h(e,["parameters","aspectRatio"],d);const g=f(n,["guidanceScale"]);e!==void 0&&g!=null&&h(e,["parameters","guidanceScale"],g);const m=f(n,["seed"]);e!==void 0&&m!=null&&h(e,["parameters","seed"],m);const v=f(n,["safetyFilterLevel"]);e!==void 0&&v!=null&&h(e,["parameters","safetySetting"],v);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&h(e,["parameters","personGeneration"],T);const S=f(n,["includeSafetyAttributes"]);e!==void 0&&S!=null&&h(e,["parameters","includeSafetyAttributes"],S);const R=f(n,["includeRaiReason"]);e!==void 0&&R!=null&&h(e,["parameters","includeRaiReason"],R);const x=f(n,["language"]);e!==void 0&&x!=null&&h(e,["parameters","language"],x);const O=f(n,["outputMimeType"]);e!==void 0&&O!=null&&h(e,["parameters","outputOptions","mimeType"],O);const k=f(n,["outputCompressionQuality"]);e!==void 0&&k!=null&&h(e,["parameters","outputOptions","compressionQuality"],k);const K=f(n,["addWatermark"]);e!==void 0&&K!=null&&h(e,["parameters","addWatermark"],K);const ne=f(n,["labels"]);e!==void 0&&ne!=null&&h(e,["labels"],ne);const j=f(n,["editMode"]);e!==void 0&&j!=null&&h(e,["parameters","editMode"],j);const ae=f(n,["baseSteps"]);return e!==void 0&&ae!=null&&h(e,["parameters","editConfig","baseSteps"],ae),o}function Yx(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],tt(n,r));const l=f(e,["prompt"]);l!=null&&h(o,["instances[0]","prompt"],l);const u=f(e,["referenceImages"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(m=>K2(m))),h(o,["instances[0]","referenceImages"],g)}const d=f(e,["config"]);return d!=null&&zx(d,o),o}function Jx(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Rf(u))),h(t,["generatedImages"],l)}return t}function Kx(n,e,t){const o={},r=f(n,["taskType"]);e!==void 0&&r!=null&&h(e,["requests[]","taskType"],r);const l=f(n,["title"]);e!==void 0&&l!=null&&h(e,["requests[]","title"],l);const u=f(n,["outputDimensionality"]);if(e!==void 0&&u!=null&&h(e,["requests[]","outputDimensionality"],u),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function Qx(n,e,t){const o={},r=f(n,["taskType"]);e!==void 0&&r!=null&&h(e,["instances[]","task_type"],r);const l=f(n,["title"]);e!==void 0&&l!=null&&h(e,["instances[]","title"],l);const u=f(n,["outputDimensionality"]);e!==void 0&&u!=null&&h(e,["parameters","outputDimensionality"],u);const d=f(n,["mimeType"]);e!==void 0&&d!=null&&h(e,["instances[]","mimeType"],d);const g=f(n,["autoTruncate"]);return e!==void 0&&g!=null&&h(e,["parameters","autoTruncate"],g),o}function Xx(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],tt(n,r));const l=f(e,["contents"]);if(l!=null){let g=pm(n,l);Array.isArray(g)&&(g=g.map(m=>m)),h(o,["requests[]","content"],g)}const u=f(e,["config"]);u!=null&&Kx(u,o);const d=f(e,["model"]);return d!==void 0&&h(o,["requests[]","model"],tt(n,d)),o}function $x(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],tt(n,r));const l=f(e,["contents"]);if(l!=null){let d=pm(n,l);Array.isArray(d)&&(d=d.map(g=>g)),h(o,["instances[]","content"],d)}const u=f(e,["config"]);return u!=null&&Qx(u,o),o}function Wx(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),h(t,["embeddings"],u)}const l=f(n,["metadata"]);return l!=null&&h(t,["metadata"],l),t}function Zx(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["predictions[]","embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>Dx(d))),h(t,["embeddings"],u)}const l=f(n,["metadata"]);return l!=null&&h(t,["metadata"],l),t}function jx(n,e){const t={},o=f(n,["endpoint"]);o!=null&&h(t,["name"],o);const r=f(n,["deployedModelId"]);return r!=null&&h(t,["deployedModelId"],r),t}function e2(n,e){const t={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["fileUri"]);o!=null&&h(t,["fileUri"],o);const r=f(n,["mimeType"]);return r!=null&&h(t,["mimeType"],r),t}function t2(n,e){const t={},o=f(n,["id"]);o!=null&&h(t,["id"],o);const r=f(n,["args"]);r!=null&&h(t,["args"],r);const l=f(n,["name"]);if(l!=null&&h(t,["name"],l),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function n2(n,e){const t={},o=f(n,["allowedFunctionNames"]);o!=null&&h(t,["allowedFunctionNames"],o);const r=f(n,["mode"]);if(r!=null&&h(t,["mode"],r),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function i2(n,e){const t={},o=f(n,["description"]);o!=null&&h(t,["description"],o);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const l=f(n,["parameters"]);l!=null&&h(t,["parameters"],l);const u=f(n,["parametersJsonSchema"]);u!=null&&h(t,["parametersJsonSchema"],u);const d=f(n,["response"]);d!=null&&h(t,["response"],d);const g=f(n,["responseJsonSchema"]);if(g!=null&&h(t,["responseJsonSchema"],g),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function o2(n,e,t,o){const r={},l=f(e,["systemInstruction"]);t!==void 0&&l!=null&&h(t,["systemInstruction"],If(pn(l)));const u=f(e,["temperature"]);u!=null&&h(r,["temperature"],u);const d=f(e,["topP"]);d!=null&&h(r,["topP"],d);const g=f(e,["topK"]);g!=null&&h(r,["topK"],g);const m=f(e,["candidateCount"]);m!=null&&h(r,["candidateCount"],m);const v=f(e,["maxOutputTokens"]);v!=null&&h(r,["maxOutputTokens"],v);const T=f(e,["stopSequences"]);T!=null&&h(r,["stopSequences"],T);const S=f(e,["responseLogprobs"]);S!=null&&h(r,["responseLogprobs"],S);const R=f(e,["logprobs"]);R!=null&&h(r,["logprobs"],R);const x=f(e,["presencePenalty"]);x!=null&&h(r,["presencePenalty"],x);const O=f(e,["frequencyPenalty"]);O!=null&&h(r,["frequencyPenalty"],O);const k=f(e,["seed"]);k!=null&&h(r,["seed"],k);const K=f(e,["responseMimeType"]);K!=null&&h(r,["responseMimeType"],K);const ne=f(e,["responseSchema"]);ne!=null&&h(r,["responseSchema"],mm(ne));const j=f(e,["responseJsonSchema"]);if(j!=null&&h(r,["responseJsonSchema"],j),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ae=f(e,["safetySettings"]);if(t!==void 0&&ae!=null){let Ce=ae;Array.isArray(Ce)&&(Ce=Ce.map(Xe=>Q2(Xe))),h(t,["safetySettings"],Ce)}const W=f(e,["tools"]);if(t!==void 0&&W!=null){let Ce=Ea(W);Array.isArray(Ce)&&(Ce=Ce.map(Xe=>tV(Ta(Xe)))),h(t,["tools"],Ce)}const F=f(e,["toolConfig"]);if(t!==void 0&&F!=null&&h(t,["toolConfig"],eV(F)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const M=f(e,["cachedContent"]);t!==void 0&&M!=null&&h(t,["cachedContent"],Co(n,M));const b=f(e,["responseModalities"]);b!=null&&h(r,["responseModalities"],b);const N=f(e,["mediaResolution"]);N!=null&&h(r,["mediaResolution"],N);const P=f(e,["speechConfig"]);if(P!=null&&h(r,["speechConfig"],gm(P)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=f(e,["thinkingConfig"]);V!=null&&h(r,["thinkingConfig"],V);const B=f(e,["imageConfig"]);B!=null&&h(r,["imageConfig"],D2(B));const D=f(e,["enableEnhancedCivicAnswers"]);if(D!=null&&h(r,["enableEnhancedCivicAnswers"],D),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function s2(n,e,t,o){const r={},l=f(e,["systemInstruction"]);t!==void 0&&l!=null&&h(t,["systemInstruction"],pn(l));const u=f(e,["temperature"]);u!=null&&h(r,["temperature"],u);const d=f(e,["topP"]);d!=null&&h(r,["topP"],d);const g=f(e,["topK"]);g!=null&&h(r,["topK"],g);const m=f(e,["candidateCount"]);m!=null&&h(r,["candidateCount"],m);const v=f(e,["maxOutputTokens"]);v!=null&&h(r,["maxOutputTokens"],v);const T=f(e,["stopSequences"]);T!=null&&h(r,["stopSequences"],T);const S=f(e,["responseLogprobs"]);S!=null&&h(r,["responseLogprobs"],S);const R=f(e,["logprobs"]);R!=null&&h(r,["logprobs"],R);const x=f(e,["presencePenalty"]);x!=null&&h(r,["presencePenalty"],x);const O=f(e,["frequencyPenalty"]);O!=null&&h(r,["frequencyPenalty"],O);const k=f(e,["seed"]);k!=null&&h(r,["seed"],k);const K=f(e,["responseMimeType"]);K!=null&&h(r,["responseMimeType"],K);const ne=f(e,["responseSchema"]);ne!=null&&h(r,["responseSchema"],mm(ne));const j=f(e,["responseJsonSchema"]);j!=null&&h(r,["responseJsonSchema"],j);const ae=f(e,["routingConfig"]);ae!=null&&h(r,["routingConfig"],ae);const W=f(e,["modelSelectionConfig"]);W!=null&&h(r,["modelConfig"],W);const F=f(e,["safetySettings"]);if(t!==void 0&&F!=null){let pe=F;Array.isArray(pe)&&(pe=pe.map(Ne=>Ne)),h(t,["safetySettings"],pe)}const M=f(e,["tools"]);if(t!==void 0&&M!=null){let pe=Ea(M);Array.isArray(pe)&&(pe=pe.map(Ne=>jS(Ta(Ne)))),h(t,["tools"],pe)}const b=f(e,["toolConfig"]);t!==void 0&&b!=null&&h(t,["toolConfig"],b);const N=f(e,["labels"]);t!==void 0&&N!=null&&h(t,["labels"],N);const P=f(e,["cachedContent"]);t!==void 0&&P!=null&&h(t,["cachedContent"],Co(n,P));const V=f(e,["responseModalities"]);V!=null&&h(r,["responseModalities"],V);const B=f(e,["mediaResolution"]);B!=null&&h(r,["mediaResolution"],B);const D=f(e,["speechConfig"]);D!=null&&h(r,["speechConfig"],gm(D));const Ce=f(e,["audioTimestamp"]);Ce!=null&&h(r,["audioTimestamp"],Ce);const Xe=f(e,["thinkingConfig"]);Xe!=null&&h(r,["thinkingConfig"],Xe);const $=f(e,["imageConfig"]);if($!=null&&h(r,["imageConfig"],x2($)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const le=f(e,["modelArmorConfig"]);return t!==void 0&&le!=null&&h(t,["modelArmorConfig"],le),r}function AT(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],tt(n,r));const l=f(e,["contents"]);if(l!=null){let d=ei(l);Array.isArray(d)&&(d=d.map(g=>If(g))),h(o,["contents"],d)}const u=f(e,["config"]);return u!=null&&h(o,["generationConfig"],o2(n,u,o)),o}function CT(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],tt(n,r));const l=f(e,["contents"]);if(l!=null){let d=ei(l);Array.isArray(d)&&(d=d.map(g=>g)),h(o,["contents"],d)}const u=f(e,["config"]);return u!=null&&h(o,["generationConfig"],s2(n,u,o)),o}function IT(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["candidates"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(v=>wx(v))),h(t,["candidates"],m)}const l=f(n,["modelVersion"]);l!=null&&h(t,["modelVersion"],l);const u=f(n,["promptFeedback"]);u!=null&&h(t,["promptFeedback"],u);const d=f(n,["responseId"]);d!=null&&h(t,["responseId"],d);const g=f(n,["usageMetadata"]);return g!=null&&h(t,["usageMetadata"],g),t}function RT(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["candidates"]);if(r!=null){let v=r;Array.isArray(v)&&(v=v.map(T=>T)),h(t,["candidates"],v)}const l=f(n,["createTime"]);l!=null&&h(t,["createTime"],l);const u=f(n,["modelVersion"]);u!=null&&h(t,["modelVersion"],u);const d=f(n,["promptFeedback"]);d!=null&&h(t,["promptFeedback"],d);const g=f(n,["responseId"]);g!=null&&h(t,["responseId"],g);const m=f(n,["usageMetadata"]);return m!=null&&h(t,["usageMetadata"],m),t}function r2(n,e,t){const o={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=f(n,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const u=f(n,["guidanceScale"]);if(e!==void 0&&u!=null&&h(e,["parameters","guidanceScale"],u),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&h(e,["parameters","safetySetting"],d);const g=f(n,["personGeneration"]);e!==void 0&&g!=null&&h(e,["parameters","personGeneration"],g);const m=f(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&h(e,["parameters","includeSafetyAttributes"],m);const v=f(n,["includeRaiReason"]);e!==void 0&&v!=null&&h(e,["parameters","includeRaiReason"],v);const T=f(n,["language"]);e!==void 0&&T!=null&&h(e,["parameters","language"],T);const S=f(n,["outputMimeType"]);e!==void 0&&S!=null&&h(e,["parameters","outputOptions","mimeType"],S);const R=f(n,["outputCompressionQuality"]);if(e!==void 0&&R!=null&&h(e,["parameters","outputOptions","compressionQuality"],R),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=f(n,["imageSize"]);if(e!==void 0&&x!=null&&h(e,["parameters","sampleImageSize"],x),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function a2(n,e,t){const o={},r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const l=f(n,["negativePrompt"]);e!==void 0&&l!=null&&h(e,["parameters","negativePrompt"],l);const u=f(n,["numberOfImages"]);e!==void 0&&u!=null&&h(e,["parameters","sampleCount"],u);const d=f(n,["aspectRatio"]);e!==void 0&&d!=null&&h(e,["parameters","aspectRatio"],d);const g=f(n,["guidanceScale"]);e!==void 0&&g!=null&&h(e,["parameters","guidanceScale"],g);const m=f(n,["seed"]);e!==void 0&&m!=null&&h(e,["parameters","seed"],m);const v=f(n,["safetyFilterLevel"]);e!==void 0&&v!=null&&h(e,["parameters","safetySetting"],v);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&h(e,["parameters","personGeneration"],T);const S=f(n,["includeSafetyAttributes"]);e!==void 0&&S!=null&&h(e,["parameters","includeSafetyAttributes"],S);const R=f(n,["includeRaiReason"]);e!==void 0&&R!=null&&h(e,["parameters","includeRaiReason"],R);const x=f(n,["language"]);e!==void 0&&x!=null&&h(e,["parameters","language"],x);const O=f(n,["outputMimeType"]);e!==void 0&&O!=null&&h(e,["parameters","outputOptions","mimeType"],O);const k=f(n,["outputCompressionQuality"]);e!==void 0&&k!=null&&h(e,["parameters","outputOptions","compressionQuality"],k);const K=f(n,["addWatermark"]);e!==void 0&&K!=null&&h(e,["parameters","addWatermark"],K);const ne=f(n,["labels"]);e!==void 0&&ne!=null&&h(e,["labels"],ne);const j=f(n,["imageSize"]);e!==void 0&&j!=null&&h(e,["parameters","sampleImageSize"],j);const ae=f(n,["enhancePrompt"]);return e!==void 0&&ae!=null&&h(e,["parameters","enhancePrompt"],ae),o}function l2(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],tt(n,r));const l=f(e,["prompt"]);l!=null&&h(o,["instances[0]","prompt"],l);const u=f(e,["config"]);return u!=null&&r2(u,o),o}function u2(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],tt(n,r));const l=f(e,["prompt"]);l!=null&&h(o,["instances[0]","prompt"],l);const u=f(e,["config"]);return u!=null&&a2(u,o),o}function c2(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>S2(d))),h(t,["generatedImages"],u)}const l=f(n,["positivePromptSafetyAttributes"]);return l!=null&&h(t,["positivePromptSafetyAttributes"],WS(l)),t}function f2(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>Rf(d))),h(t,["generatedImages"],u)}const l=f(n,["positivePromptSafetyAttributes"]);return l!=null&&h(t,["positivePromptSafetyAttributes"],ZS(l)),t}function d2(n,e,t){const o={},r=f(n,["numberOfVideos"]);if(e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=f(n,["durationSeconds"]);if(e!==void 0&&l!=null&&h(e,["parameters","durationSeconds"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&h(e,["parameters","aspectRatio"],u);const d=f(n,["resolution"]);e!==void 0&&d!=null&&h(e,["parameters","resolution"],d);const g=f(n,["personGeneration"]);if(e!==void 0&&g!=null&&h(e,["parameters","personGeneration"],g),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=f(n,["negativePrompt"]);e!==void 0&&m!=null&&h(e,["parameters","negativePrompt"],m);const v=f(n,["enhancePrompt"]);if(e!==void 0&&v!=null&&h(e,["parameters","enhancePrompt"],v),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const T=f(n,["lastFrame"]);e!==void 0&&T!=null&&h(e,["instances[0]","lastFrame"],wf(T));const S=f(n,["referenceImages"]);if(e!==void 0&&S!=null){let R=S;Array.isArray(R)&&(R=R.map(x=>pV(x))),h(e,["instances[0]","referenceImages"],R)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function h2(n,e,t){const o={},r=f(n,["numberOfVideos"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&h(e,["parameters","storageUri"],l);const u=f(n,["fps"]);e!==void 0&&u!=null&&h(e,["parameters","fps"],u);const d=f(n,["durationSeconds"]);e!==void 0&&d!=null&&h(e,["parameters","durationSeconds"],d);const g=f(n,["seed"]);e!==void 0&&g!=null&&h(e,["parameters","seed"],g);const m=f(n,["aspectRatio"]);e!==void 0&&m!=null&&h(e,["parameters","aspectRatio"],m);const v=f(n,["resolution"]);e!==void 0&&v!=null&&h(e,["parameters","resolution"],v);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&h(e,["parameters","personGeneration"],T);const S=f(n,["pubsubTopic"]);e!==void 0&&S!=null&&h(e,["parameters","pubsubTopic"],S);const R=f(n,["negativePrompt"]);e!==void 0&&R!=null&&h(e,["parameters","negativePrompt"],R);const x=f(n,["enhancePrompt"]);e!==void 0&&x!=null&&h(e,["parameters","enhancePrompt"],x);const O=f(n,["generateAudio"]);e!==void 0&&O!=null&&h(e,["parameters","generateAudio"],O);const k=f(n,["lastFrame"]);e!==void 0&&k!=null&&h(e,["instances[0]","lastFrame"],Ei(k));const K=f(n,["referenceImages"]);if(e!==void 0&&K!=null){let ae=K;Array.isArray(ae)&&(ae=ae.map(W=>mV(W))),h(e,["instances[0]","referenceImages"],ae)}const ne=f(n,["mask"]);e!==void 0&&ne!=null&&h(e,["instances[0]","mask"],hV(ne));const j=f(n,["compressionQuality"]);return e!==void 0&&j!=null&&h(e,["parameters","compressionQuality"],j),o}function p2(n,e){const t={},o=f(n,["name"]);o!=null&&h(t,["name"],o);const r=f(n,["metadata"]);r!=null&&h(t,["metadata"],r);const l=f(n,["done"]);l!=null&&h(t,["done"],l);const u=f(n,["error"]);u!=null&&h(t,["error"],u);const d=f(n,["response","generateVideoResponse"]);return d!=null&&h(t,["response"],_2(d)),t}function m2(n,e){const t={},o=f(n,["name"]);o!=null&&h(t,["name"],o);const r=f(n,["metadata"]);r!=null&&h(t,["metadata"],r);const l=f(n,["done"]);l!=null&&h(t,["done"],l);const u=f(n,["error"]);u!=null&&h(t,["error"],u);const d=f(n,["response"]);return d!=null&&h(t,["response"],v2(d)),t}function g2(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],tt(n,r));const l=f(e,["prompt"]);l!=null&&h(o,["instances[0]","prompt"],l);const u=f(e,["image"]);u!=null&&h(o,["instances[0]","image"],wf(u));const d=f(e,["video"]);d!=null&&h(o,["instances[0]","video"],eA(d));const g=f(e,["source"]);g!=null&&T2(g,o);const m=f(e,["config"]);return m!=null&&d2(m,o),o}function y2(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],tt(n,r));const l=f(e,["prompt"]);l!=null&&h(o,["instances[0]","prompt"],l);const u=f(e,["image"]);u!=null&&h(o,["instances[0]","image"],Ei(u));const d=f(e,["video"]);d!=null&&h(o,["instances[0]","video"],tA(d));const g=f(e,["source"]);g!=null&&E2(g,o);const m=f(e,["config"]);return m!=null&&h2(m,o),o}function _2(n,e){const t={},o=f(n,["generatedSamples"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>C2(d))),h(t,["generatedVideos"],u)}const r=f(n,["raiMediaFilteredCount"]);r!=null&&h(t,["raiMediaFilteredCount"],r);const l=f(n,["raiMediaFilteredReasons"]);return l!=null&&h(t,["raiMediaFilteredReasons"],l),t}function v2(n,e){const t={},o=f(n,["videos"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>I2(d))),h(t,["generatedVideos"],u)}const r=f(n,["raiMediaFilteredCount"]);r!=null&&h(t,["raiMediaFilteredCount"],r);const l=f(n,["raiMediaFilteredReasons"]);return l!=null&&h(t,["raiMediaFilteredReasons"],l),t}function T2(n,e,t){const o={},r=f(n,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const l=f(n,["image"]);e!==void 0&&l!=null&&h(e,["instances[0]","image"],wf(l));const u=f(n,["video"]);return e!==void 0&&u!=null&&h(e,["instances[0]","video"],eA(u)),o}function E2(n,e,t){const o={},r=f(n,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const l=f(n,["image"]);e!==void 0&&l!=null&&h(e,["instances[0]","image"],Ei(l));const u=f(n,["video"]);return e!==void 0&&u!=null&&h(e,["instances[0]","video"],tA(u)),o}function S2(n,e){const t={},o=f(n,["_self"]);o!=null&&h(t,["image"],V2(o));const r=f(n,["raiFilteredReason"]);r!=null&&h(t,["raiFilteredReason"],r);const l=f(n,["_self"]);return l!=null&&h(t,["safetyAttributes"],WS(l)),t}function Rf(n,e){const t={},o=f(n,["_self"]);o!=null&&h(t,["image"],$S(o));const r=f(n,["raiFilteredReason"]);r!=null&&h(t,["raiFilteredReason"],r);const l=f(n,["_self"]);l!=null&&h(t,["safetyAttributes"],ZS(l));const u=f(n,["prompt"]);return u!=null&&h(t,["enhancedPrompt"],u),t}function A2(n,e){const t={},o=f(n,["_self"]);o!=null&&h(t,["mask"],$S(o));const r=f(n,["labels"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(t,["labels"],l)}return t}function C2(n,e){const t={},o=f(n,["video"]);return o!=null&&h(t,["video"],fV(o)),t}function I2(n,e){const t={},o=f(n,["_self"]);return o!=null&&h(t,["video"],dV(o)),t}function R2(n,e){const t={},o=f(n,["modelSelectionConfig"]);o!=null&&h(t,["modelConfig"],o);const r=f(n,["responseJsonSchema"]);r!=null&&h(t,["responseJsonSchema"],r);const l=f(n,["audioTimestamp"]);l!=null&&h(t,["audioTimestamp"],l);const u=f(n,["candidateCount"]);u!=null&&h(t,["candidateCount"],u);const d=f(n,["enableAffectiveDialog"]);d!=null&&h(t,["enableAffectiveDialog"],d);const g=f(n,["frequencyPenalty"]);g!=null&&h(t,["frequencyPenalty"],g);const m=f(n,["logprobs"]);m!=null&&h(t,["logprobs"],m);const v=f(n,["maxOutputTokens"]);v!=null&&h(t,["maxOutputTokens"],v);const T=f(n,["mediaResolution"]);T!=null&&h(t,["mediaResolution"],T);const S=f(n,["presencePenalty"]);S!=null&&h(t,["presencePenalty"],S);const R=f(n,["responseLogprobs"]);R!=null&&h(t,["responseLogprobs"],R);const x=f(n,["responseMimeType"]);x!=null&&h(t,["responseMimeType"],x);const O=f(n,["responseModalities"]);O!=null&&h(t,["responseModalities"],O);const k=f(n,["responseSchema"]);k!=null&&h(t,["responseSchema"],k);const K=f(n,["routingConfig"]);K!=null&&h(t,["routingConfig"],K);const ne=f(n,["seed"]);ne!=null&&h(t,["seed"],ne);const j=f(n,["speechConfig"]);j!=null&&h(t,["speechConfig"],j);const ae=f(n,["stopSequences"]);ae!=null&&h(t,["stopSequences"],ae);const W=f(n,["temperature"]);W!=null&&h(t,["temperature"],W);const F=f(n,["thinkingConfig"]);F!=null&&h(t,["thinkingConfig"],F);const M=f(n,["topK"]);M!=null&&h(t,["topK"],M);const b=f(n,["topP"]);if(b!=null&&h(t,["topP"],b),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function w2(n,e,t){const o={},r=f(e,["model"]);return r!=null&&h(o,["_url","name"],tt(n,r)),o}function N2(n,e,t){const o={},r=f(e,["model"]);return r!=null&&h(o,["_url","name"],tt(n,r)),o}function b2(n,e){const t={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=f(n,["enableWidget"]);return o!=null&&h(t,["enableWidget"],o),t}function M2(n,e){const t={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=f(n,["timeRangeFilter"]);return o!=null&&h(t,["timeRangeFilter"],o),t}function D2(n,e){const t={},o=f(n,["aspectRatio"]);o!=null&&h(t,["aspectRatio"],o);const r=f(n,["imageSize"]);if(r!=null&&h(t,["imageSize"],r),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function x2(n,e){const t={},o=f(n,["aspectRatio"]);o!=null&&h(t,["aspectRatio"],o);const r=f(n,["imageSize"]);r!=null&&h(t,["imageSize"],r);const l=f(n,["personGeneration"]);l!=null&&h(t,["personGeneration"],l);const u=f(n,["outputMimeType"]);u!=null&&h(t,["imageOutputOptions","mimeType"],u);const d=f(n,["outputCompressionQuality"]);return d!=null&&h(t,["imageOutputOptions","compressionQuality"],d),t}function V2(n,e){const t={},o=f(n,["bytesBase64Encoded"]);o!=null&&h(t,["imageBytes"],ys(o));const r=f(n,["mimeType"]);return r!=null&&h(t,["mimeType"],r),t}function $S(n,e){const t={},o=f(n,["gcsUri"]);o!=null&&h(t,["gcsUri"],o);const r=f(n,["bytesBase64Encoded"]);r!=null&&h(t,["imageBytes"],ys(r));const l=f(n,["mimeType"]);return l!=null&&h(t,["mimeType"],l),t}function wf(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=f(n,["imageBytes"]);o!=null&&h(t,["bytesBase64Encoded"],ys(o));const r=f(n,["mimeType"]);return r!=null&&h(t,["mimeType"],r),t}function Ei(n,e){const t={},o=f(n,["gcsUri"]);o!=null&&h(t,["gcsUri"],o);const r=f(n,["imageBytes"]);r!=null&&h(t,["bytesBase64Encoded"],ys(r));const l=f(n,["mimeType"]);return l!=null&&h(t,["mimeType"],l),t}function P2(n,e,t,o){const r={},l=f(e,["pageSize"]);t!==void 0&&l!=null&&h(t,["_query","pageSize"],l);const u=f(e,["pageToken"]);t!==void 0&&u!=null&&h(t,["_query","pageToken"],u);const d=f(e,["filter"]);t!==void 0&&d!=null&&h(t,["_query","filter"],d);const g=f(e,["queryBase"]);return t!==void 0&&g!=null&&h(t,["_url","models_url"],HS(n,g)),r}function U2(n,e,t,o){const r={},l=f(e,["pageSize"]);t!==void 0&&l!=null&&h(t,["_query","pageSize"],l);const u=f(e,["pageToken"]);t!==void 0&&u!=null&&h(t,["_query","pageToken"],u);const d=f(e,["filter"]);t!==void 0&&d!=null&&h(t,["_query","filter"],d);const g=f(e,["queryBase"]);return t!==void 0&&g!=null&&h(t,["_url","models_url"],HS(n,g)),r}function L2(n,e,t){const o={},r=f(e,["config"]);return r!=null&&P2(n,r,o),o}function O2(n,e,t){const o={},r=f(e,["config"]);return r!=null&&U2(n,r,o),o}function k2(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const l=f(n,["_self"]);if(l!=null){let u=zS(l);Array.isArray(u)&&(u=u.map(d=>Tp(d))),h(t,["models"],u)}return t}function q2(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const l=f(n,["_self"]);if(l!=null){let u=zS(l);Array.isArray(u)&&(u=u.map(d=>Ep(d))),h(t,["models"],u)}return t}function B2(n,e){const t={},o=f(n,["maskMode"]);o!=null&&h(t,["maskMode"],o);const r=f(n,["segmentationClasses"]);r!=null&&h(t,["maskClasses"],r);const l=f(n,["maskDilation"]);return l!=null&&h(t,["dilation"],l),t}function Tp(n,e){const t={},o=f(n,["name"]);o!=null&&h(t,["name"],o);const r=f(n,["displayName"]);r!=null&&h(t,["displayName"],r);const l=f(n,["description"]);l!=null&&h(t,["description"],l);const u=f(n,["version"]);u!=null&&h(t,["version"],u);const d=f(n,["_self"]);d!=null&&h(t,["tunedModelInfo"],nV(d));const g=f(n,["inputTokenLimit"]);g!=null&&h(t,["inputTokenLimit"],g);const m=f(n,["outputTokenLimit"]);m!=null&&h(t,["outputTokenLimit"],m);const v=f(n,["supportedGenerationMethods"]);v!=null&&h(t,["supportedActions"],v);const T=f(n,["temperature"]);T!=null&&h(t,["temperature"],T);const S=f(n,["maxTemperature"]);S!=null&&h(t,["maxTemperature"],S);const R=f(n,["topP"]);R!=null&&h(t,["topP"],R);const x=f(n,["topK"]);x!=null&&h(t,["topK"],x);const O=f(n,["thinking"]);return O!=null&&h(t,["thinking"],O),t}function Ep(n,e){const t={},o=f(n,["name"]);o!=null&&h(t,["name"],o);const r=f(n,["displayName"]);r!=null&&h(t,["displayName"],r);const l=f(n,["description"]);l!=null&&h(t,["description"],l);const u=f(n,["versionId"]);u!=null&&h(t,["version"],u);const d=f(n,["deployedModels"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(R=>jx(R))),h(t,["endpoints"],S)}const g=f(n,["labels"]);g!=null&&h(t,["labels"],g);const m=f(n,["_self"]);m!=null&&h(t,["tunedModelInfo"],iV(m));const v=f(n,["defaultCheckpointId"]);v!=null&&h(t,["defaultCheckpointId"],v);const T=f(n,["checkpoints"]);if(T!=null){let S=T;Array.isArray(S)&&(S=S.map(R=>R)),h(t,["checkpoints"],S)}return t}function G2(n,e){const t={},o=f(n,["mediaResolution"]);o!=null&&h(t,["mediaResolution"],o);const r=f(n,["codeExecutionResult"]);r!=null&&h(t,["codeExecutionResult"],r);const l=f(n,["executableCode"]);l!=null&&h(t,["executableCode"],l);const u=f(n,["fileData"]);u!=null&&h(t,["fileData"],e2(u));const d=f(n,["functionCall"]);d!=null&&h(t,["functionCall"],t2(d));const g=f(n,["functionResponse"]);g!=null&&h(t,["functionResponse"],g);const m=f(n,["inlineData"]);m!=null&&h(t,["inlineData"],Rx(m));const v=f(n,["text"]);v!=null&&h(t,["text"],v);const T=f(n,["thought"]);T!=null&&h(t,["thought"],T);const S=f(n,["thoughtSignature"]);S!=null&&h(t,["thoughtSignature"],S);const R=f(n,["videoMetadata"]);return R!=null&&h(t,["videoMetadata"],R),t}function F2(n,e){const t={},o=f(n,["productImage"]);return o!=null&&h(t,["image"],Ei(o)),t}function H2(n,e,t){const o={},r=f(n,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const l=f(n,["baseSteps"]);e!==void 0&&l!=null&&h(e,["parameters","baseSteps"],l);const u=f(n,["outputGcsUri"]);e!==void 0&&u!=null&&h(e,["parameters","storageUri"],u);const d=f(n,["seed"]);e!==void 0&&d!=null&&h(e,["parameters","seed"],d);const g=f(n,["safetyFilterLevel"]);e!==void 0&&g!=null&&h(e,["parameters","safetySetting"],g);const m=f(n,["personGeneration"]);e!==void 0&&m!=null&&h(e,["parameters","personGeneration"],m);const v=f(n,["addWatermark"]);e!==void 0&&v!=null&&h(e,["parameters","addWatermark"],v);const T=f(n,["outputMimeType"]);e!==void 0&&T!=null&&h(e,["parameters","outputOptions","mimeType"],T);const S=f(n,["outputCompressionQuality"]);e!==void 0&&S!=null&&h(e,["parameters","outputOptions","compressionQuality"],S);const R=f(n,["enhancePrompt"]);e!==void 0&&R!=null&&h(e,["parameters","enhancePrompt"],R);const x=f(n,["labels"]);return e!==void 0&&x!=null&&h(e,["labels"],x),o}function z2(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],tt(n,r));const l=f(e,["source"]);l!=null&&J2(l,o);const u=f(e,["config"]);return u!=null&&H2(u,o),o}function Y2(n,e){const t={},o=f(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>Rf(l))),h(t,["generatedImages"],r)}return t}function J2(n,e,t){const o={},r=f(n,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const l=f(n,["personImage"]);e!==void 0&&l!=null&&h(e,["instances[0]","personImage","image"],Ei(l));const u=f(n,["productImages"]);if(e!==void 0&&u!=null){let d=u;Array.isArray(d)&&(d=d.map(g=>F2(g))),h(e,["instances[0]","productImages"],d)}return o}function K2(n,e){const t={},o=f(n,["referenceImage"]);o!=null&&h(t,["referenceImage"],Ei(o));const r=f(n,["referenceId"]);r!=null&&h(t,["referenceId"],r);const l=f(n,["referenceType"]);l!=null&&h(t,["referenceType"],l);const u=f(n,["maskImageConfig"]);u!=null&&h(t,["maskImageConfig"],B2(u));const d=f(n,["controlImageConfig"]);d!=null&&h(t,["controlImageConfig"],Vx(d));const g=f(n,["styleImageConfig"]);g!=null&&h(t,["styleImageConfig"],g);const m=f(n,["subjectImageConfig"]);return m!=null&&h(t,["subjectImageConfig"],m),t}function WS(n,e){const t={},o=f(n,["safetyAttributes","categories"]);o!=null&&h(t,["categories"],o);const r=f(n,["safetyAttributes","scores"]);r!=null&&h(t,["scores"],r);const l=f(n,["contentType"]);return l!=null&&h(t,["contentType"],l),t}function ZS(n,e){const t={},o=f(n,["safetyAttributes","categories"]);o!=null&&h(t,["categories"],o);const r=f(n,["safetyAttributes","scores"]);r!=null&&h(t,["scores"],r);const l=f(n,["contentType"]);return l!=null&&h(t,["contentType"],l),t}function Q2(n,e){const t={},o=f(n,["category"]);if(o!=null&&h(t,["category"],o),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=f(n,["threshold"]);return r!=null&&h(t,["threshold"],r),t}function X2(n,e){const t={},o=f(n,["image"]);return o!=null&&h(t,["image"],Ei(o)),t}function $2(n,e,t){const o={},r=f(n,["mode"]);e!==void 0&&r!=null&&h(e,["parameters","mode"],r);const l=f(n,["maxPredictions"]);e!==void 0&&l!=null&&h(e,["parameters","maxPredictions"],l);const u=f(n,["confidenceThreshold"]);e!==void 0&&u!=null&&h(e,["parameters","confidenceThreshold"],u);const d=f(n,["maskDilation"]);e!==void 0&&d!=null&&h(e,["parameters","maskDilation"],d);const g=f(n,["binaryColorThreshold"]);e!==void 0&&g!=null&&h(e,["parameters","binaryColorThreshold"],g);const m=f(n,["labels"]);return e!==void 0&&m!=null&&h(e,["labels"],m),o}function W2(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],tt(n,r));const l=f(e,["source"]);l!=null&&j2(l,o);const u=f(e,["config"]);return u!=null&&$2(u,o),o}function Z2(n,e){const t={},o=f(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>A2(l))),h(t,["generatedMasks"],r)}return t}function j2(n,e,t){const o={},r=f(n,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const l=f(n,["image"]);e!==void 0&&l!=null&&h(e,["instances[0]","image"],Ei(l));const u=f(n,["scribbleImage"]);return e!==void 0&&u!=null&&h(e,["instances[0]","scribble"],X2(u)),o}function eV(n,e){const t={},o=f(n,["retrievalConfig"]);o!=null&&h(t,["retrievalConfig"],o);const r=f(n,["functionCallingConfig"]);return r!=null&&h(t,["functionCallingConfig"],n2(r)),t}function tV(n,e){const t={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(n,["computerUse"]);o!=null&&h(t,["computerUse"],o);const r=f(n,["fileSearch"]);r!=null&&h(t,["fileSearch"],r);const l=f(n,["codeExecution"]);if(l!=null&&h(t,["codeExecution"],l),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=f(n,["functionDeclarations"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>S)),h(t,["functionDeclarations"],T)}const d=f(n,["googleMaps"]);d!=null&&h(t,["googleMaps"],b2(d));const g=f(n,["googleSearch"]);g!=null&&h(t,["googleSearch"],M2(g));const m=f(n,["googleSearchRetrieval"]);m!=null&&h(t,["googleSearchRetrieval"],m);const v=f(n,["urlContext"]);return v!=null&&h(t,["urlContext"],v),t}function jS(n,e){const t={},o=f(n,["retrieval"]);o!=null&&h(t,["retrieval"],o);const r=f(n,["computerUse"]);if(r!=null&&h(t,["computerUse"],r),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=f(n,["codeExecution"]);l!=null&&h(t,["codeExecution"],l);const u=f(n,["enterpriseWebSearch"]);u!=null&&h(t,["enterpriseWebSearch"],u);const d=f(n,["functionDeclarations"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(R=>i2(R))),h(t,["functionDeclarations"],S)}const g=f(n,["googleMaps"]);g!=null&&h(t,["googleMaps"],g);const m=f(n,["googleSearch"]);m!=null&&h(t,["googleSearch"],m);const v=f(n,["googleSearchRetrieval"]);v!=null&&h(t,["googleSearchRetrieval"],v);const T=f(n,["urlContext"]);return T!=null&&h(t,["urlContext"],T),t}function nV(n,e){const t={},o=f(n,["baseModel"]);o!=null&&h(t,["baseModel"],o);const r=f(n,["createTime"]);r!=null&&h(t,["createTime"],r);const l=f(n,["updateTime"]);return l!=null&&h(t,["updateTime"],l),t}function iV(n,e){const t={},o=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&h(t,["baseModel"],o);const r=f(n,["createTime"]);r!=null&&h(t,["createTime"],r);const l=f(n,["updateTime"]);return l!=null&&h(t,["updateTime"],l),t}function oV(n,e,t){const o={},r=f(n,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const l=f(n,["description"]);e!==void 0&&l!=null&&h(e,["description"],l);const u=f(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&h(e,["defaultCheckpointId"],u),o}function sV(n,e,t){const o={},r=f(n,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const l=f(n,["description"]);e!==void 0&&l!=null&&h(e,["description"],l);const u=f(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&h(e,["defaultCheckpointId"],u),o}function rV(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","name"],tt(n,r));const l=f(e,["config"]);return l!=null&&oV(l,o),o}function aV(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],tt(n,r));const l=f(e,["config"]);return l!=null&&sV(l,o),o}function lV(n,e,t){const o={},r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const l=f(n,["safetyFilterLevel"]);e!==void 0&&l!=null&&h(e,["parameters","safetySetting"],l);const u=f(n,["personGeneration"]);e!==void 0&&u!=null&&h(e,["parameters","personGeneration"],u);const d=f(n,["includeRaiReason"]);e!==void 0&&d!=null&&h(e,["parameters","includeRaiReason"],d);const g=f(n,["outputMimeType"]);e!==void 0&&g!=null&&h(e,["parameters","outputOptions","mimeType"],g);const m=f(n,["outputCompressionQuality"]);e!==void 0&&m!=null&&h(e,["parameters","outputOptions","compressionQuality"],m);const v=f(n,["enhanceInputImage"]);e!==void 0&&v!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],v);const T=f(n,["imagePreservationFactor"]);e!==void 0&&T!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],T);const S=f(n,["labels"]);e!==void 0&&S!=null&&h(e,["labels"],S);const R=f(n,["numberOfImages"]);e!==void 0&&R!=null&&h(e,["parameters","sampleCount"],R);const x=f(n,["mode"]);return e!==void 0&&x!=null&&h(e,["parameters","mode"],x),o}function uV(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],tt(n,r));const l=f(e,["image"]);l!=null&&h(o,["instances[0]","image"],Ei(l));const u=f(e,["upscaleFactor"]);u!=null&&h(o,["parameters","upscaleConfig","upscaleFactor"],u);const d=f(e,["config"]);return d!=null&&lV(d,o),o}function cV(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Rf(u))),h(t,["generatedImages"],l)}return t}function fV(n,e){const t={},o=f(n,["uri"]);o!=null&&h(t,["uri"],o);const r=f(n,["encodedVideo"]);r!=null&&h(t,["videoBytes"],ys(r));const l=f(n,["encoding"]);return l!=null&&h(t,["mimeType"],l),t}function dV(n,e){const t={},o=f(n,["gcsUri"]);o!=null&&h(t,["uri"],o);const r=f(n,["bytesBase64Encoded"]);r!=null&&h(t,["videoBytes"],ys(r));const l=f(n,["mimeType"]);return l!=null&&h(t,["mimeType"],l),t}function hV(n,e){const t={},o=f(n,["image"]);o!=null&&h(t,["_self"],Ei(o));const r=f(n,["maskMode"]);return r!=null&&h(t,["maskMode"],r),t}function pV(n,e){const t={},o=f(n,["image"]);o!=null&&h(t,["image"],wf(o));const r=f(n,["referenceType"]);return r!=null&&h(t,["referenceType"],r),t}function mV(n,e){const t={},o=f(n,["image"]);o!=null&&h(t,["image"],Ei(o));const r=f(n,["referenceType"]);return r!=null&&h(t,["referenceType"],r),t}function eA(n,e){const t={},o=f(n,["uri"]);o!=null&&h(t,["uri"],o);const r=f(n,["videoBytes"]);r!=null&&h(t,["encodedVideo"],ys(r));const l=f(n,["mimeType"]);return l!=null&&h(t,["encoding"],l),t}function tA(n,e){const t={},o=f(n,["uri"]);o!=null&&h(t,["gcsUri"],o);const r=f(n,["videoBytes"]);r!=null&&h(t,["bytesBase64Encoded"],ys(r));const l=f(n,["mimeType"]);return l!=null&&h(t,["mimeType"],l),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gV(n,e){const t={},o=f(n,["displayName"]);return e!==void 0&&o!=null&&h(e,["displayName"],o),t}function yV(n){const e={},t=f(n,["config"]);return t!=null&&gV(t,e),e}function _V(n,e){const t={},o=f(n,["force"]);return e!==void 0&&o!=null&&h(e,["_query","force"],o),t}function vV(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","name"],t);const o=f(n,["config"]);return o!=null&&_V(o,e),e}function TV(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function EV(n,e){const t={},o=f(n,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["customMetadata"],l)}const r=f(n,["chunkingConfig"]);return e!==void 0&&r!=null&&h(e,["chunkingConfig"],r),t}function SV(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],CV(u)),e}function AV(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const o=f(n,["fileName"]);o!=null&&h(e,["fileName"],o);const r=f(n,["config"]);return r!=null&&EV(r,e),e}function CV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["parent"]);o!=null&&h(e,["parent"],o);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function IV(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function RV(n){const e={},t=f(n,["config"]);return t!=null&&IV(t,e),e}function wV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["fileSearchStores"],l)}return e}function nA(n,e){const t={},o=f(n,["mimeType"]);e!==void 0&&o!=null&&h(e,["mimeType"],o);const r=f(n,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const l=f(n,["customMetadata"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(g=>g)),h(e,["customMetadata"],d)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&h(e,["chunkingConfig"],u),t}function NV(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const o=f(n,["config"]);return o!=null&&nA(o,e),e}function bV(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MV="Content-Type",DV="X-Server-Timeout",xV="User-Agent",Sp="x-goog-api-client",VV="1.40.0",PV=`google-genai-sdk/${VV}`,UV="v1beta1",LV="v1beta";class OV{constructor(e){var t,o,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(t=e.httpOptions)===null||t===void 0?void 0:t.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const l={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const d=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!d?(l.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?l.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(l.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),l.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:UV}else{if(!this.clientOptions.apiKey)throw new Kl({message:"API key must be set when using the Gemini API.",status:403});l.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:LV,l.baseUrl="https://generativelanguage.googleapis.com/"}l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,o){const r=[this.getRequestUrlInternal(t)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,t){return!(t.baseUrl&&t.baseUrlResourceScope===gp.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,t),r=this.constructUrl(e.path,t,o);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))r.searchParams.append(u,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,t){const o=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(t))typeof l=="object"?o[r]=Object.assign(Object.assign({},o[r]),l):l!==void 0&&(o[r]=l);return o}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,t),r=this.constructUrl(e.path,t,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,o,r){if(t&&t.timeout||r){const l=new AbortController,u=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>l.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=u}return t&&t.extraBody!==null&&kV(e,t.extraBody),e.headers=await this.getHeadersInternal(t,o),e}async unaryApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async r=>(await wT(r),new yp(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async r=>(await wT(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return _i(this,arguments,function*(){var o;const r=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";const d="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:v}=yield De(r.read());if(m){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const T=l.decode(v,{stream:!0});try{const x=JSON.parse(T);if("error"in x){const O=JSON.parse(JSON.stringify(x.error)),k=O.status,K=O.code,ne=`got status: ${k}. ${JSON.stringify(x)}`;if(K>=400&&K<600)throw new Kl({message:ne,status:K})}}catch(x){if(x.name==="ApiError")throw x}u+=T;let S=-1,R=0;for(;;){S=-1,R=0;for(const k of g){const K=u.indexOf(k);K!==-1&&(S===-1||K<S)&&(S=K,R=k.length)}if(S===-1)break;const x=u.substring(0,S);u=u.substring(S+R);const O=x.trim();if(O.startsWith(d)){const k=O.substring(d.length).trim();try{const K=new Response(k,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield De(new yp(K))}catch(K){throw new Error(`exception parsing stream chunk ${k}. ${K}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},t=PV+" "+this.clientOptions.userAgentExtra;return e[xV]=t,e[Sp]=t,e[MV]="application/json",e}async getHeadersInternal(e,t){const o=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))o.append(r,l);e.timeout&&e.timeout>0&&o.append(DV,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,t),o}getFileName(e){var t;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(t=o.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),o}async uploadFile(e,t){var o;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);r.sizeBytes=String(u.size);const d=(o=t==null?void 0:t.mimeType)!==null&&o!==void 0?o:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=d;const g={file:r},m=this.getFileName(e),v=de("upload/v1beta/files",g._url),T=await this.fetchUploadUrl(v,r.sizeBytes,r.mimeType,m,g,t==null?void 0:t.httpOptions);return l.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,o){var r;const l=this.clientOptions.uploader,u=await l.stat(t),d=String(u.size),g=(r=o==null?void 0:o.mimeType)!==null&&r!==void 0?r:u.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),T={};o!=null&&nA(o,T);const S=await this.fetchUploadUrl(m,d,g,v,T,o==null?void 0:o.httpOptions);return l.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,o,r,l,u){var d;let g={};u?g=u:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const m=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:g});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(d=m==null?void 0:m.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function wT(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let o;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await n.json():o={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(o);throw t>=400&&t<600?new Kl({message:r,status:t}):new Error(r)}}function kV(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,u){const d=Object.assign({},l);for(const g in u)if(Object.prototype.hasOwnProperty.call(u,g)){const m=u[g],v=d[g];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?d[g]=o(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),d[g]=m)}return d}const r=o(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qV="mcp_used/unknown";let BV=!1;function iA(n){for(const e of n)if(GV(e)||typeof e=="object"&&"inputSchema"in e)return!0;return BV}function oA(n){var e;const t=(e=n[Sp])!==null&&e!==void 0?e:"";n[Sp]=(t+` ${qV}`).trimStart()}function GV(n){return n!==null&&typeof n=="object"&&n instanceof _m}function FV(n){return _i(this,arguments,function*(t,o=100){let r,l=0;for(;l<o;){const u=yield De(t.listTools({cursor:r}));for(const d of u.tools)yield yield De(d),l++;if(!u.nextCursor)break;r=u.nextCursor}})}class _m{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new _m(e,t)}async initialize(){var e,t,o,r;if(this.mcpTools.length>0)return;const l={},u=[];for(const v of this.mcpClients)try{for(var d=!0,g=(t=void 0,vi(FV(v))),m;m=await g.next(),e=m.done,!e;d=!0){r=m.value,d=!1;const T=r;u.push(T);const S=T.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=v}}catch(T){t={error:T}}finally{try{!d&&!e&&(o=g.return)&&await o.call(g)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),yM(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await r.callTool({name:o.name,arguments:o.args},void 0,l);t.push({functionResponse:{name:o.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function HV(n,e,t){const o=new uM;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(o,r),e(o)}class zV{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o}async connect(e){var t,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=KV(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),g=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let m=()=>{};const v=new Promise(j=>{m=j}),T=e.callbacks,S=function(){m({})},R=this.apiClient,x={onopen:S,onmessage:j=>{HV(R,T.onmessage,j)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(j){},onclose:(o=T==null?void 0:T.onclose)!==null&&o!==void 0?o:function(j){}},O=this.webSocketFactory.create(g,JV(u),x);O.connect(),await v;const ne={setup:{model:tt(this.apiClient,e.model)}};return O.send(JSON.stringify(ne)),new YV(O,this.apiClient)}}class YV{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=gx(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=mx(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(ea.PLAY)}pause(){this.sendPlaybackControl(ea.PAUSE)}stop(){this.sendPlaybackControl(ea.STOP)}resetContext(){this.sendPlaybackControl(ea.RESET_CONTEXT)}close(){this.conn.close()}}function JV(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function KV(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QV="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function XV(n,e,t){const o=new lM;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const l=JSON.parse(r);if(n.isVertexAI()){const u=vx(l);Object.assign(o,u)}else Object.assign(o,l);e(o)}class $V{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o,this.music=new zV(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,o,r,l,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&iA(e.config.tools)&&oA(T);const S=eP(T);if(this.apiClient.isVertexAI()){const N=this.apiClient.getProject(),P=this.apiClient.getLocation(),V=this.apiClient.getApiKey(),B=!!N&&!!P||!!V;this.apiClient.getCustomBaseUrl()&&!B?v=g:(v=`${g}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v))}else{const N=this.apiClient.getApiKey();let P="BidiGenerateContent",V="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",V="access_token"),v=`${g}/ws/google.ai.generativelanguage.${m}.GenerativeService.${P}?${V}=${N}`}let R=()=>{};const x=new Promise(N=>{R=N}),O=e.callbacks,k=function(){var N;(N=O==null?void 0:O.onopen)===null||N===void 0||N.call(O),R({})},K=this.apiClient,ne={onopen:k,onmessage:N=>{XV(K,O.onmessage,N)},onerror:(t=O==null?void 0:O.onerror)!==null&&t!==void 0?t:function(N){},onclose:(o=O==null?void 0:O.onclose)!==null&&o!==void 0?o:function(N){}},j=this.webSocketFactory.create(v,jV(S),ne);j.connect(),await x;let ae=tt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ae.startsWith("publishers/")){const N=this.apiClient.getProject(),P=this.apiClient.getLocation();N&&P&&(ae=`projects/${N}/locations/${P}/`+ae)}let W={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Jl.AUDIO]}:e.config.responseModalities=[Jl.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const F=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],M=[];for(const N of F)if(this.isCallableTool(N)){const P=N;M.push(await P.tool())}else M.push(N);M.length>0&&(e.config.tools=M);const b={model:ae,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?W=px(this.apiClient,b):W=hx(this.apiClient,b),delete W.config,j.send(JSON.stringify(W)),new ZV(j,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const WV={turnComplete:!0};class ZV{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let o=[];try{o=ei(t.turns),e.isVertexAI()||(o=o.map(r=>If(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:o,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let o=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?o=t.functionResponses:o=[t.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(QV)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},WV),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:_x(e)}:t={realtimeInput:yx(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function jV(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function eP(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const NT=10;function bT(n){var e,t,o;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(aa(u)){r=!0;break}if(!r)return!0;const l=(o=n==null?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function aa(n){return"callTool"in n&&typeof n.callTool=="function"}function tP(n){var e,t,o;return(o=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>aa(r)))!==null&&o!==void 0?o:!1}function MT(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((o,r)=>{if(aa(o))return;const l=o;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(r)}),t}function DT(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nP extends Ao{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var o,r,l,u,d;const g=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!tP(t)||bT(t.config))return await this.generateContentInternal(g);const m=MT(t);if(m.length>0){const O=m.map(k=>`tools[${k}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${O}.`)}let v,T;const S=ei(g.contents),R=(l=(r=(o=g.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:NT;let x=0;for(;x<R&&(v=await this.generateContentInternal(g),!(!v.functionCalls||v.functionCalls.length===0));){const O=v.candidates[0].content,k=[];for(const K of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(aa(K)){const j=await K.callTool(v.functionCalls);k.push(...j)}x++,T={role:"user",parts:k},g.contents=ei(g.contents),g.contents.push(O),g.contents.push(T),DT(g.config)&&(S.push(O),S.push(T))}return DT(g.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async t=>{var o,r,l,u,d;if(this.maybeMoveToResponseJsonSchem(t),bT(t.config)){const T=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(T)}const g=MT(t);if(g.length>0){const T=g.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(l=(r=(o=t==null?void 0:t.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,v=(d=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(m&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(o=>{var r;let l;const u=[];if(o!=null&&o.generatedImages)for(const g of o.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((r=g==null?void 0:g.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:u.push(g);let d;return l?d={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:o.sdkHttpResponse},d}),this.list=async t=>{var o;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((o=u.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new ar(So.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const o={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(o.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async t=>{let o={numberOfImages:1,mode:"upscale"};t.config&&(o=Object.assign(Object.assign({},o),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var o,r,l,u,d,g;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=t.video)===null||o===void 0)&&o.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(l=t.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((g=(d=t.source)===null||d===void 0?void 0:d.video)===null||g===void 0)&&g.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,o,r;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const u=await Promise.all(l.map(async g=>aa(g)?await g.tool():g)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&iA(e.config.tools)){const g=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},g);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),oA(m),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return d}async initAfcToolsMap(e){var t,o,r;const l=new Map;for(const u of(o=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&o!==void 0?o:[])if(aa(u)){const d=u,g=await d.tool();for(const m of(r=g.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,d)}}return l}async processAfcStream(e){var t,o,r;const l=(r=(o=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:NT;let u=!1,d=0;const g=await this.initAfcToolsMap(e);return(function(m,v,T){return _i(this,arguments,function*(){for(var S,R,x,O,k,K;d<l;){u&&(d++,u=!1);const W=yield De(m.processParamsMaybeAddMcpUsage(T)),F=yield De(m.generateContentStreamInternal(W)),M=[],b=[];try{for(var ne=!0,j=(R=void 0,vi(F)),ae;ae=yield De(j.next()),S=ae.done,!S;ne=!0){O=ae.value,ne=!1;const N=O;if(yield yield De(N),N.candidates&&(!((k=N.candidates[0])===null||k===void 0)&&k.content)){b.push(N.candidates[0].content);for(const P of(K=N.candidates[0].content.parts)!==null&&K!==void 0?K:[])if(d<l&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(P.functionCall.name)){const V=yield De(v.get(P.functionCall.name).callTool([P.functionCall]));M.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(N){R={error:N}}finally{try{!ne&&!S&&(x=j.return)&&(yield De(x.call(j)))}finally{if(R)throw R.error}}if(M.length>0){u=!0;const N=new Il;N.candidates=[{content:{role:"user",parts:M}}],yield yield De(N);const P=[];P.push(...b),P.push({role:"user",parts:M});const V=ei(T.contents).concat(P);T.contents=V}else break}})})(this,g,e)}async generateContentInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=CT(this.apiClient,e);return d=de("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=RT(v),S=new Il;return Object.assign(S,T),S})}else{const m=AT(this.apiClient,e);return d=de("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=IT(v),S=new Il;return Object.assign(S,T),S})}}async generateContentStreamInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=CT(this.apiClient,e);return d=de("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),u.then(function(T){return _i(this,arguments,function*(){var S,R,x,O;try{for(var k=!0,K=vi(T),ne;ne=yield De(K.next()),S=ne.done,!S;k=!0){O=ne.value,k=!1;const j=O,ae=RT(yield De(j.json()),e);ae.sdkHttpResponse={headers:j.headers};const W=new Il;Object.assign(W,ae),yield yield De(W)}}catch(j){R={error:j}}finally{try{!k&&!S&&(x=K.return)&&(yield De(x.call(K)))}finally{if(R)throw R.error}}})})}else{const m=AT(this.apiClient,e);return d=de("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(T){return _i(this,arguments,function*(){var S,R,x,O;try{for(var k=!0,K=vi(T),ne;ne=yield De(K.next()),S=ne.done,!S;k=!0){O=ne.value,k=!1;const j=O,ae=IT(yield De(j.json()),e);ae.sdkHttpResponse={headers:j.headers};const W=new Il;Object.assign(W,ae),yield yield De(W)}}catch(j){R={error:j}}finally{try{!k&&!S&&(x=K.return)&&(yield De(x.call(K)))}finally{if(R)throw R.error}}})})}}async embedContent(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=$x(this.apiClient,e);return d=de("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=Zx(v),S=new rT;return Object.assign(S,T),S})}else{const m=Xx(this.apiClient,e);return d=de("{model}:batchEmbedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=Wx(v),S=new rT;return Object.assign(S,T),S})}}async generateImagesInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=u2(this.apiClient,e);return d=de("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=f2(v),S=new aT;return Object.assign(S,T),S})}else{const m=l2(this.apiClient,e);return d=de("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=c2(v),S=new aT;return Object.assign(S,T),S})}}async editImageInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=Yx(this.apiClient,e);return l=de("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const m=Jx(g),v=new $b;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=uV(this.apiClient,e);return l=de("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const m=cV(g),v=new Wb;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=z2(this.apiClient,e);return l=de("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=Y2(g),v=new Zb;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=W2(this.apiClient,e);return l=de("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=Z2(g),v=new jb;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=N2(this.apiClient,e);return d=de("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>Ep(v))}else{const m=w2(this.apiClient,e);return d=de("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>Tp(v))}}async listInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=O2(this.apiClient,e);return d=de("{models_url}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=q2(v),S=new lT;return Object.assign(S,T),S})}else{const m=L2(this.apiClient,e);return d=de("{models_url}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=k2(v),S=new lT;return Object.assign(S,T),S})}}async update(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=aV(this.apiClient,e);return d=de("{model}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>Ep(v))}else{const m=rV(this.apiClient,e);return d=de("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>Tp(v))}}async delete(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=Gx(this.apiClient,e);return d=de("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=Hx(v),S=new uT;return Object.assign(S,T),S})}else{const m=Bx(this.apiClient,e);return d=de("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=Fx(v),S=new uT;return Object.assign(S,T),S})}}async countTokens(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=Ox(this.apiClient,e);return d=de("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=qx(v),S=new cT;return Object.assign(S,T),S})}else{const m=Lx(this.apiClient,e);return d=de("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=kx(v),S=new cT;return Object.assign(S,T),S})}}async computeTokens(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=bx(this.apiClient,e);return l=de("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const m=Mx(g),v=new eM;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=y2(this.apiClient,e);return d=de("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>{const T=m2(v),S=new rf;return Object.assign(S,T),S})}else{const m=g2(this.apiClient,e);return d=de("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>{const T=p2(v),S=new rf;return Object.assign(S,T),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iP extends Ao{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=zb(e);return d=de("{operationName}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u}else{const m=Hb(e);return d=de("{operationName}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=Lb(e);return l=de("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oP(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function sP(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>pP(l))),h(e,["parts"],r)}const o=f(n,["role"]);return o!=null&&h(e,["role"],o),e}function rP(n,e,t){const o={},r=f(e,["expireTime"]);t!==void 0&&r!=null&&h(t,["expireTime"],r);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&h(t,["newSessionExpireTime"],l);const u=f(e,["uses"]);t!==void 0&&u!=null&&h(t,["uses"],u);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&h(t,["bidiGenerateContentSetup"],hP(n,d));const g=f(e,["lockAdditionalFields"]);return t!==void 0&&g!=null&&h(t,["fieldMask"],g),o}function aP(n,e){const t={},o=f(e,["config"]);return o!=null&&h(t,["config"],rP(n,o,t)),t}function lP(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function uP(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const o=f(n,["args"]);o!=null&&h(e,["args"],o);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function cP(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function fP(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function dP(n,e){const t={},o=f(n,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],o);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","speechConfig"],ym(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],R);const x=f(n,["systemInstruction"]);e!==void 0&&x!=null&&h(e,["setup","systemInstruction"],sP(pn(x)));const O=f(n,["tools"]);if(e!==void 0&&O!=null){let F=Ea(O);Array.isArray(F)&&(F=F.map(M=>gP(Ta(M)))),h(e,["setup","tools"],F)}const k=f(n,["sessionResumption"]);e!==void 0&&k!=null&&h(e,["setup","sessionResumption"],mP(k));const K=f(n,["inputAudioTranscription"]);e!==void 0&&K!=null&&h(e,["setup","inputAudioTranscription"],K);const ne=f(n,["outputAudioTranscription"]);e!==void 0&&ne!=null&&h(e,["setup","outputAudioTranscription"],ne);const j=f(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&h(e,["setup","realtimeInputConfig"],j);const ae=f(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&h(e,["setup","contextWindowCompression"],ae);const W=f(n,["proactivity"]);if(e!==void 0&&W!=null&&h(e,["setup","proactivity"],W),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function hP(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["setup","model"],tt(n,o));const r=f(e,["config"]);return r!=null&&h(t,["config"],dP(r,t)),t}function pP(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],lP(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],uP(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],oP(g));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function mP(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function gP(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);const o=f(n,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(T=>T)),h(e,["functionDeclarations"],v)}const u=f(n,["googleMaps"]);u!=null&&h(e,["googleMaps"],cP(u));const d=f(n,["googleSearch"]);d!=null&&h(e,["googleSearch"],fP(d));const g=f(n,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yP(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const o=n[t];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(l=>`${t}.${l}`);e.push(...r)}else e.push(t)}return e.join(",")}function _P(n,e){let t=null;const o=n.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else o!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const l=yP(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];r.length>0&&(d=r.map(m=>u.includes(m)?`generationConfig.${m}`:m));const g=[];l&&g.push(l),d.length>0&&g.push(...d),g.length>0?n.fieldMask=g.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class vP extends Ao{constructor(e){super(),this.apiClient=e}async create(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=aP(this.apiClient,e);l=de("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const g=_P(d,e.config);return r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),r.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TP(n,e){const t={},o=f(n,["force"]);return e!==void 0&&o!=null&&h(e,["_query","force"],o),t}function EP(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","name"],t);const o=f(n,["config"]);return o!=null&&TP(o,e),e}function SP(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function AP(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function CP(n){const e={},t=f(n,["parent"]);t!=null&&h(e,["_url","parent"],t);const o=f(n,["config"]);return o!=null&&AP(o,e),e}function IP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RP extends Ao{constructor(e){super(),this.apiClient=e,this.list=async t=>new ar(So.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:t.parent,config:o.config}),await this.listInternal(t),t)}async get(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=SP(e);return l=de("{name}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=EP(e);r=de("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=CP(e);return l=de("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=IP(g),v=new tM;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wP extends Ao{constructor(e,t=new RP(e)){super(),this.apiClient=e,this.documents=t,this.list=async(o={})=>new ar(So.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=yV(e);return l=de("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async get(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=TV(e);return l=de("{name}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=vV(e);r=de("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=RV(e);return l=de("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=wV(g),v=new nM;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=NV(e);return l=de("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=bV(g),v=new iM;return Object.assign(v,m),v})}}async importFile(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=AV(e);return l=de("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=SV(g),v=new dm;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let sA=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return sA=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^t()&15>>+o/4).toString(16))};const NP=()=>sA();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ap(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Cp=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ti extends Error{}class _n extends ti{constructor(e,t,o,r){super(`${_n.makeMessage(e,t,o)}`),this.status=e,this.headers=r,this.error=t}static makeMessage(e,t,o){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):o;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,o,r){if(!e||!r)return new Nf({message:o,cause:Cp(t)});const l=t;return e===400?new aA(e,l,o,r):e===401?new lA(e,l,o,r):e===403?new uA(e,l,o,r):e===404?new cA(e,l,o,r):e===409?new fA(e,l,o,r):e===422?new dA(e,l,o,r):e===429?new hA(e,l,o,r):e>=500?new pA(e,l,o,r):new _n(e,l,o,r)}}class Ip extends _n{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Nf extends _n{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class rA extends Nf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class aA extends _n{}class lA extends _n{}class uA extends _n{}class cA extends _n{}class fA extends _n{}class dA extends _n{}class hA extends _n{}class pA extends _n{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bP=/^[a-z][a-z0-9+.-]*:/i,MP=n=>bP.test(n);let Rp=n=>(Rp=Array.isArray,Rp(n));const DP=Rp;let xP=DP;const xT=xP;function VP(n){if(!n)return!0;for(const e in n)return!1;return!0}function PP(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const UP=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ti(`${n} must be an integer`);if(e<0)throw new ti(`${n} must be a positive integer`);return e},LP=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OP=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jr="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kP(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const qP=()=>{var n,e,t,o,r;const l=kP();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jr,"X-Stainless-OS":PT(Deno.build.os),"X-Stainless-Arch":VT(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jr,"X-Stainless-OS":PT((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":VT((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const u=BP();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function BP(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const o=t.exec(navigator.userAgent);if(o){const r=o[1]||0,l=o[2]||0,u=o[3]||0;return{browser:e,version:`${r}.${l}.${u}`}}}return null}const VT=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",PT=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Dc;const GP=()=>Dc??(Dc=qP());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FP(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function mA(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function HP(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return mA({start(){},async pull(t){const{done:o,value:r}=await e.next();o?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function gA(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function zP(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const o=n.getReader(),r=o.cancel();o.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YP=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yA=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Fh(n,e,t){return yA(),new File(n,e??"unknown_file",t)}function JP(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const KP=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _A=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",QP=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&_A(n),XP=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function $P(n,e,t){if(yA(),n=await n,QP(n))return n instanceof File?n:Fh([await n.arrayBuffer()],n.name);if(XP(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Fh(await wp(r),e,t)}const o=await wp(n);if(e||(e=JP(n)),!(t!=null&&t.type)){const r=o.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof r=="string"&&(t=Object.assign(Object.assign({},t),{type:r}))}return Fh(o,e,t)}async function wp(n){var e,t,o,r,l;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(_A(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(KP(n))try{for(var d=!0,g=vi(n),m;m=await g.next(),e=m.done,!e;d=!0){r=m.value,d=!1;const v=r;u.push(...await wp(v))}}catch(v){t={error:v}}finally{try{!d&&!e&&(o=g.return)&&await o.call(g)}finally{if(t)throw t.error}}else{const v=(l=n==null?void 0:n.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof n}${v?`; constructor: ${v}`:""}${WP(n)}`)}return u}function WP(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vA{constructor(e){this._client=e}}vA._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TA(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const UT=Object.freeze(Object.create(null)),ZP=(n=TA)=>(function(t,...o){if(t.length===1)return t[0];let r=!1;const l=[],u=t.reduce((v,T,S)=>{var R,x,O;/[?#]/.test(T)&&(r=!0);const k=o[S];let K=(r?encodeURIComponent:n)(""+k);return S!==o.length&&(k==null||typeof k=="object"&&k.toString===((O=Object.getPrototypeOf((x=Object.getPrototypeOf((R=k.hasOwnProperty)!==null&&R!==void 0?R:UT))!==null&&x!==void 0?x:UT))===null||O===void 0?void 0:O.toString))&&(K=k+"",l.push({start:v.length+T.length,length:K.length,error:`Value of type ${Object.prototype.toString.call(k).slice(8,-1)} is not a valid path parameter`})),v+T+(S===o.length?"":K)},""),d=u.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=g.exec(d))!==null;)l.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(l.sort((v,T)=>v.start-T.start),l.length>0){let v=0;const T=l.reduce((S,R)=>{const x=" ".repeat(R.start-v),O="^".repeat(R.length);return v=R.start+R.length,S+x+O},"");throw new ti(`Path parameters result in path with invalid segments:
${l.map(S=>S.error).join(`
`)}
${u}
${T}`)}return u}),xc=ZP(TA);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class EA extends vA{create(e,t){var o;const{api_version:r=this._client.apiVersion}=e,l=lf(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new ti("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new ti("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(xc`/${r}/interactions`,Object.assign(Object.assign({body:l},t),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,t={},o){const{api_version:r=this._client.apiVersion}=t??{};return this._client.delete(xc`/${r}/interactions/${e}`,o)}cancel(e,t={},o){const{api_version:r=this._client.apiVersion}=t??{};return this._client.post(xc`/${r}/interactions/${e}/cancel`,o)}get(e,t={},o){var r;const l=t??{},{api_version:u=this._client.apiVersion}=l,d=lf(l,["api_version"]);return this._client.get(xc`/${u}/interactions/${e}`,Object.assign(Object.assign({query:d},o),{stream:(r=t==null?void 0:t.stream)!==null&&r!==void 0?r:!1}))}}EA._key=Object.freeze(["interactions"]);class SA extends EA{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jP(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let o=0;for(const r of n)t.set(r,o),o+=r.length;return t}let Vc;function vm(n){let e;return(Vc??(e=new globalThis.TextEncoder,Vc=e.encode.bind(e)))(n)}let Pc;function LT(n){let e;return(Pc??(e=new globalThis.TextDecoder,Pc=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?vm(e):e;this.buffer=jP([this.buffer,t]);const o=[];let r;for(;(r=eU(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){o.push(LT(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,u=LT(this.buffer.subarray(0,l));o.push(u),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}bf.NEWLINE_CHARS=new Set([`
`,"\r"]);bf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function eU(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function tU(n){for(let o=0;o<n.length-1;o++){if(n[o]===10&&n[o+1]===10||n[o]===13&&n[o+1]===13)return o+2;if(n[o]===13&&n[o+1]===10&&o+3<n.length&&n[o+2]===13&&n[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uf={off:0,error:200,warn:300,info:400,debug:500},OT=(n,e,t)=>{if(n){if(PP(uf,n))return n;yn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(uf))}`)}};function Dl(){}function Uc(n,e,t){return!e||uf[n]>uf[t]?Dl:e[n].bind(e)}const nU={error:Dl,warn:Dl,info:Dl,debug:Dl};let kT=new WeakMap;function yn(n){var e;const t=n.logger,o=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return nU;const r=kT.get(t);if(r&&r[0]===o)return r[1];const l={error:Uc("error",t,o),warn:Uc("warn",t,o),info:Uc("info",t,o),debug:Uc("debug",t,o)};return kT.set(t,[o,l]),l}const $s=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ta{constructor(e,t,o){this.iterator=e,this.controller=t,this.client=o}static fromSSEResponse(e,t,o){let r=!1;const l=o?yn(o):console;function u(){return _i(this,arguments,function*(){var g,m,v,T;if(r)throw new ti("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var R=!0,x=vi(iU(e,t)),O;O=yield De(x.next()),g=O.done,!g;R=!0){T=O.value,R=!1;const k=T;if(!S)if(k.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield De(JSON.parse(k.data))}catch(K){throw l.error("Could not parse message into JSON:",k.data),l.error("From chunk:",k.raw),K}}}catch(k){m={error:k}}finally{try{!R&&!g&&(v=x.return)&&(yield De(v.call(x)))}finally{if(m)throw m.error}}S=!0}catch(k){if(Ap(k))return yield De(void 0);throw k}finally{S||t.abort()}})}return new ta(u,t,o)}static fromReadableStream(e,t,o){let r=!1;function l(){return _i(this,arguments,function*(){var g,m,v,T;const S=new bf,R=gA(e);try{for(var x=!0,O=vi(R),k;k=yield De(O.next()),g=k.done,!g;x=!0){T=k.value,x=!1;const K=T;for(const ne of S.decode(K))yield yield De(ne)}}catch(K){m={error:K}}finally{try{!x&&!g&&(v=O.return)&&(yield De(v.call(O)))}finally{if(m)throw m.error}}for(const K of S.flush())yield yield De(K)})}function u(){return _i(this,arguments,function*(){var g,m,v,T;if(r)throw new ti("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var R=!0,x=vi(l()),O;O=yield De(x.next()),g=O.done,!g;R=!0){T=O.value,R=!1;const k=T;S||k&&(yield yield De(JSON.parse(k)))}}catch(k){m={error:k}}finally{try{!R&&!g&&(v=x.return)&&(yield De(v.call(x)))}finally{if(m)throw m.error}}S=!0}catch(k){if(Ap(k))return yield De(void 0);throw k}finally{S||t.abort()}})}return new ta(u,t,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],o=this.iterator(),r=l=>({next:()=>{if(l.length===0){const u=o.next();e.push(u),t.push(u)}return l.shift()}});return[new ta(()=>r(e),this.controller,this.client),new ta(()=>r(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return mA({async start(){t=e[Symbol.asyncIterator]()},async pull(o){try{const{value:r,done:l}=await t.next();if(l)return o.close();const u=vm(JSON.stringify(r)+`
`);o.enqueue(u)}catch(r){o.error(r)}},async cancel(){var o;await((o=t.return)===null||o===void 0?void 0:o.call(t))}})}}function iU(n,e){return _i(this,arguments,function*(){var o,r,l,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ti("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ti("Attempted to iterate over a response with no body");const d=new sU,g=new bf,m=gA(n.body);try{for(var v=!0,T=vi(oU(m)),S;S=yield De(T.next()),o=S.done,!o;v=!0){u=S.value,v=!1;const R=u;for(const x of g.decode(R)){const O=d.decode(x);O&&(yield yield De(O))}}}catch(R){r={error:R}}finally{try{!v&&!o&&(l=T.return)&&(yield De(l.call(T)))}finally{if(r)throw r.error}}for(const R of g.flush()){const x=d.decode(R);x&&(yield yield De(x))}})}function oU(n){return _i(this,arguments,function*(){var t,o,r,l;let u=new Uint8Array;try{for(var d=!0,g=vi(n),m;m=yield De(g.next()),t=m.done,!t;d=!0){l=m.value,d=!1;const v=l;if(v==null)continue;const T=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?vm(v):v;let S=new Uint8Array(u.length+T.length);S.set(u),S.set(T,u.length),u=S;let R;for(;(R=tU(u))!==-1;)yield yield De(u.slice(0,R)),u=u.slice(R)}}catch(v){o={error:v}}finally{try{!d&&!t&&(r=g.return)&&(yield De(r.call(g)))}finally{if(o)throw o.error}}u.length>0&&(yield yield De(u))})}class sU{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,o,r]=rU(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function rU(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function aU(n,e){const{response:t,requestLogID:o,retryOfRequestLogID:r,startTime:l}=e,u=await(async()=>{var d;if(e.options.stream)return yn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):ta.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const g=t.headers.get("content-type"),m=(d=g==null?void 0:g.split(";")[0])===null||d===void 0?void 0:d.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?t.headers.get("content-length")==="0"?void 0:await t.json():await t.text()})();return yn(n).debug(`[${o}] response parsed`,$s({retryOfRequestLogID:r,url:t.url,status:t.status,body:u,durationMs:Date.now()-l})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tm extends Promise{constructor(e,t,o=aU){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new Tm(this.client,this.responsePromise,async(t,o)=>e(await this.parseResponse(t,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AA=Symbol("brand.privateNullableHeaders");function*lU(n){if(!n)return;if(AA in n){const{values:o,nulls:r}=n;yield*o.entries();for(const l of r)yield[l,null];return}let e=!1,t;n instanceof Headers?t=n.entries():xT(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let o of t){const r=o[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const l=xT(o[1])?o[1]:[o[1]];let u=!1;for(const d of l)d!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,d])}}const Rl=n=>{const e=new Headers,t=new Set;for(const o of n){const r=new Set;for(const[l,u]of lU(o)){const d=l.toLowerCase();r.has(d)||(e.delete(l),r.add(d)),u===null?(e.delete(l),t.add(d)):(e.append(l,u),t.delete(d))}}return{[AA]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Hh=n=>{var e,t,o,r,l,u;if(typeof globalThis.process<"u")return(o=(t=(e=Mb)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(u=(l=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||l===void 0?void 0:l.call(r,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var CA;class Mf{constructor(e){var t,o,r,l,u,d,g,{baseURL:m=Hh("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(t=Hh("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:T="v1beta"}=e,S=lf(e,["baseURL","apiKey","apiVersion"]);const R=Object.assign(Object.assign({apiKey:v,apiVersion:T},S),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=R.baseURL,this.timeout=(o=R.timeout)!==null&&o!==void 0?o:Mf.DEFAULT_TIMEOUT,this.logger=(r=R.logger)!==null&&r!==void 0?r:console;const x="warn";this.logLevel=x,this.logLevel=(u=(l=OT(R.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:OT(Hh("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:x,this.fetchOptions=R.fetchOptions,this.maxRetries=(d=R.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(g=R.fetch)!==null&&g!==void 0?g:FP(),this.encoder=YP,this._options=R,this.apiKey=v,this.apiVersion=T,this.clientAdapter=R.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Rl([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Rl([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Rl([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,o])=>typeof o<"u").map(([t,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(t)}=`;throw new ti(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${jr}`}defaultIdempotencyKey(){return`stainless-node-retry-${NP()}`}makeStatusError(e,t,o,r){return _n.generate(e,t,o,r)}buildURL(e,t,o){const r=!this.baseURLOverridden()&&o||this.baseURL,l=MP(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return VP(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(l.search=this.stringifyQuery(t)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:o}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,o){return this.request(Promise.resolve(o).then(r=>Object.assign({method:e,path:t},r)))}request(e,t=null){return new Tm(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,o){var r,l,u;const d=await e,g=(r=d.maxRetries)!==null&&r!==void 0?r:this.maxRetries;t==null&&(t=g),await this.prepareOptions(d);const{req:m,url:v,timeout:T}=await this.buildRequest(d,{retryCount:g-t});await this.prepareRequest(m,{url:v,options:d});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),R=o===void 0?"":`, retryOf: ${o}`,x=Date.now();if(yn(this).debug(`[${S}] sending request`,$s({retryOfRequestLogID:o,method:d.method,url:v,options:d,headers:m.headers})),!((l=d.signal)===null||l===void 0)&&l.aborted)throw new Ip;const O=new AbortController,k=await this.fetchWithTimeout(v,m,T,O).catch(Cp),K=Date.now();if(k instanceof globalThis.Error){const j=`retrying, ${t} attempts remaining`;if(!((u=d.signal)===null||u===void 0)&&u.aborted)throw new Ip;const ae=Ap(k)||/timed? ?out/i.test(String(k)+("cause"in k?String(k.cause):""));if(t)return yn(this).info(`[${S}] connection ${ae?"timed out":"failed"} - ${j}`),yn(this).debug(`[${S}] connection ${ae?"timed out":"failed"} (${j})`,$s({retryOfRequestLogID:o,url:v,durationMs:K-x,message:k.message})),this.retryRequest(d,t,o??S);throw yn(this).info(`[${S}] connection ${ae?"timed out":"failed"} - error; no more retries left`),yn(this).debug(`[${S}] connection ${ae?"timed out":"failed"} (error; no more retries left)`,$s({retryOfRequestLogID:o,url:v,durationMs:K-x,message:k.message})),ae?new rA:new Nf({cause:k})}const ne=`[${S}${R}] ${m.method} ${v} ${k.ok?"succeeded":"failed"} with status ${k.status} in ${K-x}ms`;if(!k.ok){const j=await this.shouldRetry(k);if(t&&j){const N=`retrying, ${t} attempts remaining`;return await zP(k.body),yn(this).info(`${ne} - ${N}`),yn(this).debug(`[${S}] response error (${N})`,$s({retryOfRequestLogID:o,url:k.url,status:k.status,headers:k.headers,durationMs:K-x})),this.retryRequest(d,t,o??S,k.headers)}const ae=j?"error; no more retries left":"error; not retryable";yn(this).info(`${ne} - ${ae}`);const W=await k.text().catch(N=>Cp(N).message),F=LP(W),M=F?void 0:W;throw yn(this).debug(`[${S}] response error (${ae})`,$s({retryOfRequestLogID:o,url:k.url,status:k.status,headers:k.headers,message:M,durationMs:Date.now()-x})),this.makeStatusError(k.status,F,M,k.headers)}return yn(this).info(ne),yn(this).debug(`[${S}] response start`,$s({retryOfRequestLogID:o,url:k.url,status:k.status,headers:k.headers,durationMs:K-x})),{response:k,options:d,controller:O,requestLogID:S,retryOfRequestLogID:o,startTime:x}}async fetchWithTimeout(e,t,o,r){const l=t||{},{signal:u,method:d}=l,g=lf(l,["signal","method"]),m=r.abort.bind(r);u&&u.addEventListener("abort",m,{once:!0});const v=setTimeout(m,o),T=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,S=Object.assign(Object.assign(Object.assign({signal:r.signal},T?{duplex:"half"}:{}),{method:"GET"}),g);d&&(S.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,S)}finally{clearTimeout(v)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,o,r){var l;let u;const d=r==null?void 0:r.get("retry-after-ms");if(d){const m=parseFloat(d);Number.isNaN(m)||(u=m)}const g=r==null?void 0:r.get("retry-after");if(g&&!u){const m=parseFloat(g);Number.isNaN(m)?u=Date.parse(g)-Date.now():u=m*1e3}if(!(u&&0<=u&&u<60*1e3)){const m=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,m)}return await OP(u),this.makeRequest(e,t-1,o)}calculateDefaultRetryTimeoutMillis(e,t){const l=t-e,u=Math.min(.5*Math.pow(2,l),8),d=1-Math.random()*.25;return u*d*1e3}async buildRequest(e,{retryCount:t=0}={}){var o,r,l;const u=Object.assign({},e),{method:d,path:g,query:m,defaultBaseURL:v}=u,T=this.buildURL(g,m,v);"timeout"in u&&UP("timeout",u.timeout),u.timeout=(o=u.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:S,body:R}=this.buildBody({options:u}),x=await this.buildHeaders({options:e,method:d,bodyHeaders:S,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:x},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&R instanceof globalThis.ReadableStream&&{duplex:"half"}),R&&{body:R}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(l=u.fetchOptions)!==null&&l!==void 0?l:{}),url:T,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:o,retryCount:r}){let l={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let d=Rl([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),GP()),this._options.defaultHeaders,o,e.headers,u]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=Rl([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:HP(e)}:this.encoder({body:e,headers:o})}}Mf.DEFAULT_TIMEOUT=6e4;class Zt extends Mf{constructor(){super(...arguments),this.interactions=new SA(this)}}CA=Zt;Zt.GeminiNextGenAPIClient=CA;Zt.GeminiNextGenAPIClientError=ti;Zt.APIError=_n;Zt.APIConnectionError=Nf;Zt.APIConnectionTimeoutError=rA;Zt.APIUserAbortError=Ip;Zt.NotFoundError=cA;Zt.ConflictError=fA;Zt.RateLimitError=hA;Zt.BadRequestError=aA;Zt.AuthenticationError=lA;Zt.InternalServerError=pA;Zt.PermissionDeniedError=uA;Zt.UnprocessableEntityError=dA;Zt.toFile=$P;Zt.Interactions=SA;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uU(n,e){const t={},o=f(n,["name"]);return o!=null&&h(t,["_url","name"],o),t}function cU(n,e){const t={},o=f(n,["name"]);return o!=null&&h(t,["_url","name"],o),t}function fU(n,e){const t={},o=f(n,["sdkHttpResponse"]);return o!=null&&h(t,["sdkHttpResponse"],o),t}function dU(n,e){const t={},o=f(n,["sdkHttpResponse"]);return o!=null&&h(t,["sdkHttpResponse"],o),t}function hU(n,e,t){const o={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&h(e,["displayName"],r),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(n,["epochCount"]);e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","epochCount"],l);const u=f(n,["learningRateMultiplier"]);if(u!=null&&h(o,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(f(n,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(f(n,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&h(e,["tuningTask","hyperparameters","batchSize"],d);const g=f(n,["learningRate"]);if(e!==void 0&&g!=null&&h(e,["tuningTask","hyperparameters","learningRate"],g),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(f(n,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(f(n,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(f(n,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(f(n,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return o}function pU(n,e,t){const o={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const W=f(n,["validationDataset"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec"],zh(W))}else if(r==="PREFERENCE_TUNING"){const W=f(n,["validationDataset"]);e!==void 0&&W!=null&&h(e,["preferenceOptimizationSpec"],zh(W))}else if(r==="DISTILLATION"){const W=f(n,["validationDataset"]);e!==void 0&&W!=null&&h(e,["distillationSpec"],zh(W))}const l=f(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&h(e,["tunedModelDisplayName"],l);const u=f(n,["description"]);e!==void 0&&u!=null&&h(e,["description"],u);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const W=f(n,["epochCount"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],W)}else if(d==="PREFERENCE_TUNING"){const W=f(n,["epochCount"]);e!==void 0&&W!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],W)}else if(d==="DISTILLATION"){const W=f(n,["epochCount"]);e!==void 0&&W!=null&&h(e,["distillationSpec","hyperParameters","epochCount"],W)}let g=f(t,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const W=f(n,["learningRateMultiplier"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],W)}else if(g==="PREFERENCE_TUNING"){const W=f(n,["learningRateMultiplier"]);e!==void 0&&W!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],W)}else if(g==="DISTILLATION"){const W=f(n,["learningRateMultiplier"]);e!==void 0&&W!=null&&h(e,["distillationSpec","hyperParameters","learningRateMultiplier"],W)}let m=f(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const W=f(n,["exportLastCheckpointOnly"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],W)}else if(m==="PREFERENCE_TUNING"){const W=f(n,["exportLastCheckpointOnly"]);e!==void 0&&W!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],W)}else if(m==="DISTILLATION"){const W=f(n,["exportLastCheckpointOnly"]);e!==void 0&&W!=null&&h(e,["distillationSpec","exportLastCheckpointOnly"],W)}let v=f(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const W=f(n,["adapterSize"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],W)}else if(v==="PREFERENCE_TUNING"){const W=f(n,["adapterSize"]);e!==void 0&&W!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],W)}else if(v==="DISTILLATION"){const W=f(n,["adapterSize"]);e!==void 0&&W!=null&&h(e,["distillationSpec","hyperParameters","adapterSize"],W)}let T=f(t,["config","method"]);if(T===void 0&&(T="SUPERVISED_FINE_TUNING"),T==="SUPERVISED_FINE_TUNING"){const W=f(n,["tuningMode"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec","tuningMode"],W)}const S=f(n,["customBaseModel"]);e!==void 0&&S!=null&&h(e,["customBaseModel"],S);let R=f(t,["config","method"]);if(R===void 0&&(R="SUPERVISED_FINE_TUNING"),R==="SUPERVISED_FINE_TUNING"){const W=f(n,["batchSize"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec","hyperParameters","batchSize"],W)}let x=f(t,["config","method"]);if(x===void 0&&(x="SUPERVISED_FINE_TUNING"),x==="SUPERVISED_FINE_TUNING"){const W=f(n,["learningRate"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRate"],W)}const O=f(n,["labels"]);e!==void 0&&O!=null&&h(e,["labels"],O);const k=f(n,["beta"]);e!==void 0&&k!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],k);const K=f(n,["baseTeacherModel"]);e!==void 0&&K!=null&&h(e,["distillationSpec","baseTeacherModel"],K);const ne=f(n,["tunedTeacherModelSource"]);e!==void 0&&ne!=null&&h(e,["distillationSpec","tunedTeacherModelSource"],ne);const j=f(n,["sftLossWeightMultiplier"]);e!==void 0&&j!=null&&h(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],j);const ae=f(n,["outputUri"]);return e!==void 0&&ae!=null&&h(e,["outputUri"],ae),o}function mU(n,e){const t={},o=f(n,["baseModel"]);o!=null&&h(t,["baseModel"],o);const r=f(n,["preTunedModel"]);r!=null&&h(t,["preTunedModel"],r);const l=f(n,["trainingDataset"]);l!=null&&RU(l);const u=f(n,["config"]);return u!=null&&hU(u,t),t}function gU(n,e){const t={},o=f(n,["baseModel"]);o!=null&&h(t,["baseModel"],o);const r=f(n,["preTunedModel"]);r!=null&&h(t,["preTunedModel"],r);const l=f(n,["trainingDataset"]);l!=null&&wU(l,t,e);const u=f(n,["config"]);return u!=null&&pU(u,t,e),t}function yU(n,e){const t={},o=f(n,["name"]);return o!=null&&h(t,["_url","name"],o),t}function _U(n,e){const t={},o=f(n,["name"]);return o!=null&&h(t,["_url","name"],o),t}function vU(n,e,t){const o={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const u=f(n,["filter"]);return e!==void 0&&u!=null&&h(e,["_query","filter"],u),o}function TU(n,e,t){const o={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const u=f(n,["filter"]);return e!==void 0&&u!=null&&h(e,["_query","filter"],u),o}function EU(n,e){const t={},o=f(n,["config"]);return o!=null&&vU(o,t),t}function SU(n,e){const t={},o=f(n,["config"]);return o!=null&&TU(o,t),t}function AU(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const l=f(n,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>IA(d))),h(t,["tuningJobs"],u)}return t}function CU(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const l=f(n,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>Np(d))),h(t,["tuningJobs"],u)}return t}function IU(n,e){const t={},o=f(n,["name"]);o!=null&&h(t,["model"],o);const r=f(n,["name"]);return r!=null&&h(t,["endpoint"],r),t}function RU(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=f(n,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),h(t,["examples","examples"],r)}return t}function wU(n,e,t){const o={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(r==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(r==="DISTILLATION"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&h(e,["distillationSpec","promptDatasetUri"],u)}let l=f(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(l==="DISTILLATION"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["distillationSpec","promptDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function IA(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const l=f(n,["state"]);l!=null&&h(t,["state"],GS(l));const u=f(n,["createTime"]);u!=null&&h(t,["createTime"],u);const d=f(n,["tuningTask","startTime"]);d!=null&&h(t,["startTime"],d);const g=f(n,["tuningTask","completeTime"]);g!=null&&h(t,["endTime"],g);const m=f(n,["updateTime"]);m!=null&&h(t,["updateTime"],m);const v=f(n,["description"]);v!=null&&h(t,["description"],v);const T=f(n,["baseModel"]);T!=null&&h(t,["baseModel"],T);const S=f(n,["_self"]);return S!=null&&h(t,["tunedModel"],IU(S)),t}function Np(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const l=f(n,["state"]);l!=null&&h(t,["state"],GS(l));const u=f(n,["createTime"]);u!=null&&h(t,["createTime"],u);const d=f(n,["startTime"]);d!=null&&h(t,["startTime"],d);const g=f(n,["endTime"]);g!=null&&h(t,["endTime"],g);const m=f(n,["updateTime"]);m!=null&&h(t,["updateTime"],m);const v=f(n,["error"]);v!=null&&h(t,["error"],v);const T=f(n,["description"]);T!=null&&h(t,["description"],T);const S=f(n,["baseModel"]);S!=null&&h(t,["baseModel"],S);const R=f(n,["tunedModel"]);R!=null&&h(t,["tunedModel"],R);const x=f(n,["preTunedModel"]);x!=null&&h(t,["preTunedModel"],x);const O=f(n,["supervisedTuningSpec"]);O!=null&&h(t,["supervisedTuningSpec"],O);const k=f(n,["preferenceOptimizationSpec"]);k!=null&&h(t,["preferenceOptimizationSpec"],k);const K=f(n,["distillationSpec"]);K!=null&&h(t,["distillationSpec"],K);const ne=f(n,["tuningDataStats"]);ne!=null&&h(t,["tuningDataStats"],ne);const j=f(n,["encryptionSpec"]);j!=null&&h(t,["encryptionSpec"],j);const ae=f(n,["partnerModelTuningSpec"]);ae!=null&&h(t,["partnerModelTuningSpec"],ae);const W=f(n,["customBaseModel"]);W!=null&&h(t,["customBaseModel"],W);const F=f(n,["experiment"]);F!=null&&h(t,["experiment"],F);const M=f(n,["labels"]);M!=null&&h(t,["labels"],M);const b=f(n,["outputUri"]);b!=null&&h(t,["outputUri"],b);const N=f(n,["pipelineJob"]);N!=null&&h(t,["pipelineJob"],N);const P=f(n,["serviceAccount"]);P!=null&&h(t,["serviceAccount"],P);const V=f(n,["tunedModelDisplayName"]);V!=null&&h(t,["tunedModelDisplayName"],V);const B=f(n,["veoTuningSpec"]);return B!=null&&h(t,["veoTuningSpec"],B),t}function NU(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const l=f(n,["metadata"]);l!=null&&h(t,["metadata"],l);const u=f(n,["done"]);u!=null&&h(t,["done"],u);const d=f(n,["error"]);return d!=null&&h(t,["error"],d),t}function zh(n,e){const t={},o=f(n,["gcsUri"]);o!=null&&h(t,["validationDatasetUri"],o);const r=f(n,["vertexDatasetResource"]);return r!=null&&h(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bU extends Ao{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ar(So.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var o;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((o=t.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),l=await this.tuneMldevInternal(r);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:mp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=_U(e);return d=de("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>Np(v))}else{const m=yU(e);return d=de("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>IA(v))}}async listInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=SU(e);return d=de("tuningJobs",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=CU(v),S=new fT;return Object.assign(S,T),S})}else{const m=EU(e);return d=de("tunedModels",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=AU(v),S=new fT;return Object.assign(S,T),S})}}async cancel(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=cU(e);return d=de("{name}:cancel",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=dU(v),S=new dT;return Object.assign(S,T),S})}else{const m=uU(e);return d=de("{name}:cancel",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=fU(v),S=new dT;return Object.assign(S,T),S})}}async tuneInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=gU(e,e);return l=de("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>Np(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=mU(e);return l=de("tunedModels",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>NU(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MU{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const DU=1024*1024*8,xU=3,VU=1e3,PU=2,cf="x-goog-upload-status";async function UU(n,e,t){var o;const r=await RA(n,e,t),l=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[cf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function LU(n,e,t){var o;const r=await RA(n,e,t),l=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[cf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=US(l),d=new hm;return Object.assign(d,u),d}async function RA(n,e,t){var o,r;let l=0,u=0,d=new yp(new Response),g="upload";for(l=n.size;u<l;){const m=Math.min(DU,l-u),v=n.slice(u,u+m);u+m>=l&&(g+=", finalize");let T=0,S=VU;for(;T<xU&&(d=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(u),"Content-Length":String(m)}}}),!(!((o=d==null?void 0:d.headers)===null||o===void 0)&&o[cf]));)T++,await kU(S),S=S*PU;if(u+=m,((r=d==null?void 0:d.headers)===null||r===void 0?void 0:r[cf])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function OU(n){return{size:n.size,type:n.type}}function kU(n){return new Promise(e=>setTimeout(e,n))}class qU{async upload(e,t,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await UU(e,t,o)}async uploadToFileSearchStore(e,t,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await LU(e,t,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await OU(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BU{create(e,t,o){return new GU(e,t,o)}}class GU{constructor(e,t,o){this.url=e,this.headers=t,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qT="x-goog-api-key";class FU{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(qT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(qT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const HU="gl-node/";class zU{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new Zt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const o=Pb(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new FU(this.apiKey);this.apiClient=new OV({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:HU+"web",uploader:new qU,downloader:new MU}),this.models=new nP(this.apiClient),this.live=new $V(this.apiClient,r,new BU),this.batches=new cD(this.apiClient),this.chats=new YD(this.models,this.apiClient),this.caches=new FD(this.apiClient),this.files=new ix(this.apiClient),this.operations=new iP(this.apiClient),this.authTokens=new vP(this.apiClient),this.tunings=new bU(this.apiClient),this.fileSearchStores=new wP(this.apiClient)}}var qn=(n=>(n.NEUTRAL="neutral",n.HAPPY="happy",n.SAD="sad",n.CURIOUS="curious",n.CONCERNED="concerned",n.EXCITED="excited",n))(qn||{});const wA=({emotion:n,isListening:e,isSpeaking:t,isConnecting:o,moodScore:r,isThinkingOfProactiveAction:l=!1,vocalIntensity:u=0})=>{const d=we.useRef(null),g=we.useRef(0),m=we.useRef({time:0,currentH:200,currentS:10,currentL:90,visualIntensity:0,eyeBlink:0,blinkTimer:0,mouthArtic:0,mouthOpenAmount:0,noiseOffsets:Array.from({length:8},()=>Math.random()*1e3),touchX:0,touchY:0,touchActive:!1,touchIntensity:0,touchVelocity:0,ripplePhase:0,lastTouchX:0,lastTouchY:0,glowPulse:0});return we.useEffect(()=>{const v=d.current;if(!v)return;const T=v.getContext("2d");if(!T)return;const S=120,R=115,x=v.width/2,O=v.height/2,k=(F,M,b=.5)=>{const N=v.getBoundingClientRect(),P=v.width/N.width,V=v.height/N.height;m.current.touchX=(F-N.left)*P,m.current.touchY=(M-N.top)*V,m.current.touchActive||(m.current.touchVelocity=b*.5),m.current.touchActive=!0},K=F=>{const M="touches"in F?F.touches[0].clientX:F.clientX,b="touches"in F?F.touches[0].clientY:F.clientY,N="touches"in F?F.touches[0].force||.5:.8;k(M,b,N)},ne=F=>{if(!m.current.touchActive)return;const M="touches"in F?F.touches[0].clientX:F.clientX,b="touches"in F?F.touches[0].clientY:F.clientY;k(M,b)},j=()=>{m.current.touchActive=!1,m.current.lastTouchX=m.current.touchX,m.current.lastTouchY=m.current.touchY};v.addEventListener("touchstart",K,{passive:!0}),v.addEventListener("touchmove",ne,{passive:!0}),v.addEventListener("touchend",j),v.addEventListener("mousedown",K),window.addEventListener("mousemove",ne),window.addEventListener("mouseup",j);const ae=F=>{switch(F){case qn.HAPPY:return{h:60,s:90,l:60};case qn.SAD:return{h:210,s:70,l:40};case qn.CURIOUS:return{h:280,s:80,l:65};case qn.CONCERNED:return{h:25,s:90,l:55};case qn.EXCITED:return{h:330,s:95,l:60};default:return{h:180,s:20,l:85}}},W=()=>{const F=m.current,M=l||o,b=l?{h:45,s:100,l:60}:ae(n);let N=b.h-F.currentH;N>180&&(N-=360),N<-180&&(N+=360),F.currentH+=N*.05,F.currentS+=(b.s-F.currentS)*.05,F.currentL+=(b.l-F.currentL)*.05,F.visualIntensity+=(u-F.visualIntensity)*(t?.4:.2);const P=F.touchActive?1:0;F.touchVelocity+=(P-F.touchIntensity)*.15,F.touchVelocity*=.82,F.touchIntensity+=F.touchVelocity;const V=1+F.visualIntensity*2+Math.abs(F.touchIntensity)*.5+(M?.5:0);if(F.time+=.012*V,F.ripplePhase+=.06*V,F.glowPulse=Math.sin(F.time*2)*.5+.5,t){const Ie=Math.abs(Math.sin(F.time*18))*.5+.5;F.mouthOpenAmount+=(F.visualIntensity*55*Ie-F.mouthOpenAmount)*.6,F.mouthArtic=Math.sin(F.time*8)*.3+.7}else F.mouthOpenAmount*=.7,F.mouthArtic*=.8;F.blinkTimer--,F.blinkTimer<=0&&(F.eyeBlink=1,F.blinkTimer=Math.random()*250+120),F.eyeBlink>0&&(F.eyeBlink-=.12),T.clearRect(0,0,v.width,v.height);const B=[],D=Math.abs(F.touchIntensity),Ce=.5+F.visualIntensity*3.5+D*2+(M?1.5:0),Xe=F.touchActive?F.touchX:F.lastTouchX,$=F.touchActive?F.touchY:F.lastTouchY;for(let Ie=0;Ie<S;Ie++){const $e=Ie/S*Math.PI*2;let bt=0;[{f:1,a:18,t:1.1},{f:2.5,a:10,t:2.2},{f:6,a:6,t:3.8},{f:12,a:3*Ce,t:7.5}].forEach((ye,Ue)=>{const Ee=F.noiseOffsets[Ue];bt+=Math.sin($e*ye.f+F.time*ye.t+Ee)*ye.a});const Si=x+Math.cos($e)*R,vn=O+Math.sin($e)*R,Ai=Math.hypot(Si-Xe,vn-$);if(D>.001){const ye=Math.exp(-Ai/(150+D*80)),Ue=Math.sin(Ai*.04-F.ripplePhase*2.5)*18;bt+=ye*40*F.touchIntensity+ye*Ue*F.touchIntensity}const bn=R+bt+(e?Math.sin(F.time*4)*4:0);B.push({x:x+Math.cos($e)*bn,y:O+Math.sin($e)*bn})}T.beginPath(),T.moveTo((B[0].x+B[S-1].x)/2,(B[0].y+B[S-1].y)/2);for(let Ie=0;Ie<S;Ie++){const $e=B[Ie],bt=B[(Ie+1)%S];T.quadraticCurveTo($e.x,$e.y,($e.x+bt.x)/2,($e.y+bt.y)/2)}T.closePath();let le,pe,Ne=40+F.visualIntensity*90+D*60;M?(Ne+=60+F.glowPulse*40,le=`rgba(255, 255, 255, ${.8+F.glowPulse*.2})`,pe=`rgba(0, 242, 255, ${.6+F.glowPulse*.3})`,T.shadowColor="rgba(0, 242, 255, 0.8)"):(le=`hsla(${F.currentH}, ${F.currentS}%, ${F.currentL}%, 0.98)`,pe=`hsla(${F.currentH}, ${F.currentS}%, ${Math.min(100,F.currentL+30)}%, 0.6)`,T.shadowColor=pe);const be=T.createRadialGradient(x,O,0,x,O,R+200+(M?50:0));be.addColorStop(0,le),be.addColorStop(.3,pe),be.addColorStop(1,"rgba(0,0,0,0)"),T.shadowBlur=Ne,T.fillStyle=be,T.fill(),T.shadowBlur=12,T.fillStyle="rgba(255, 255, 255, 0.98)";const L=36,ee=Math.sin(F.time*.6)*7;let ue=0,fe=0;if(D>.1){const Ie=Xe-x,$e=$-O,bt=Math.hypot(Ie,$e),Jt=Math.min(15,bt*.05)*F.touchIntensity;ue=Ie/(bt||1)*Jt,fe=$e/(bt||1)*Jt}const Se=O-15+ee+fe,Me=F.eyeBlink>0?1-F.eyeBlink:1,Be=Ie=>{T.save(),T.translate(Ie+ue,Se),n===qn.HAPPY?(T.beginPath(),T.arc(0,5,12,Math.PI,0,!1),T.lineWidth=4.5,T.strokeStyle="white",T.stroke()):(T.beginPath(),T.ellipse(0,0,11,15*Me,0,0,Math.PI*2),T.fill()),T.restore()};Be(x-L),Be(x+L);const Tt=O+38+ee+fe;if(T.save(),T.translate(x+ue,Tt),t||F.mouthOpenAmount>.5){const Ie=28+F.mouthArtic*15+F.visualIntensity*12,$e=n===qn.HAPPY?5:n===qn.SAD?-3:0;T.shadowBlur=15+F.visualIntensity*25,T.shadowColor="rgba(255, 255, 255, 0.8)",T.beginPath(),T.lineWidth=3.5+F.visualIntensity*2,T.strokeStyle="white",T.moveTo(-Ie/2,$e),T.bezierCurveTo(-Ie/4,-F.mouthOpenAmount/2-2+$e,-3,-F.mouthOpenAmount/2-4+$e,0,-F.mouthOpenAmount/2-2+$e),T.bezierCurveTo(3,-F.mouthOpenAmount/2-4+$e,Ie/4,-F.mouthOpenAmount/2-2+$e,Ie/2,$e),T.bezierCurveTo(Ie/2*.8,F.mouthOpenAmount/2+4+$e,-Ie/2*.8,F.mouthOpenAmount/2+4+$e,-Ie/2,$e),T.fillStyle=`rgba(255, 255, 255, ${.1+F.visualIntensity*.25})`,T.fill(),T.stroke()}else T.beginPath(),T.lineWidth=4,T.strokeStyle="rgba(255, 255, 255, 0.85)",n===qn.HAPPY?(T.moveTo(-22,-2),T.quadraticCurveTo(0,18,22,-2)):n===qn.SAD?(T.moveTo(-18,12),T.quadraticCurveTo(0,2,18,12)):(T.moveTo(-16,0),T.bezierCurveTo(-6,3,6,3,16,0)),T.stroke();T.restore(),g.current=requestAnimationFrame(W)};return W(),()=>{cancelAnimationFrame(g.current),v.removeEventListener("touchstart",K),v.removeEventListener("touchmove",ne),v.removeEventListener("touchend",j),v.removeEventListener("mousedown",K),window.removeEventListener("mousemove",ne),window.removeEventListener("mouseup",j)}},[n,e,t,o,r,l,u]),ie.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:ie.jsx("canvas",{ref:d,width:600,height:600,className:"max-w-full max-h-full transition-all duration-1000 cursor-pointer pointer-events-auto",style:{filter:"drop-shadow(0 0 50px rgba(255,255,255,0.15))",touchAction:"none"}})})},YU=45e3,JU=15e3,KU=({user:n,onLogout:e})=>{const[t,o]=we.useState(qn.NEUTRAL),[r,l]=we.useState(n.auraMoodScore||70),[u,d]=we.useState(!1),[g,m]=we.useState(!1),[v,T]=we.useState(!1),[S,R]=we.useState(!1),[x,O]=we.useState([]),[k,K]=we.useState(""),[ne,j]=we.useState(""),[ae,W]=we.useState(null),[F,M]=we.useState(0),[b,N]=we.useState(!1),[P,V]=we.useState(""),[B,D]=we.useState(!0),Ce=we.useRef(null),Xe=we.useRef(null),$=we.useRef(null),le=we.useRef(null),pe=we.useRef(null),Ne=we.useRef(0),be=we.useRef(null),L=we.useRef(new Set),ee=we.useRef(null),ue=we.useRef(0),fe=we.useRef(0),Se=we.useRef(null),Me=we.useCallback(()=>{if(Se.current)return;const ye=new(window.AudioContext||window.webkitAudioContext),Ue=ye.createGain();Ue.gain.setValueAtTime(.04,ye.currentTime),Ue.connect(ye.destination),[110,164.81,220,329.63].forEach(qe=>{const Mt=ye.createOscillator(),Kt=ye.createGain();Mt.type="sine",Mt.frequency.setValueAtTime(qe,ye.currentTime),Kt.gain.setValueAtTime(.02,ye.currentTime),Mt.connect(Kt),Kt.connect(Ue),Mt.start()}),Se.current=ye},[]),Be=async(ye,Ue,Ee,qe)=>{const Mt=new Int16Array(ye.buffer),Kt=Mt.length/qe,ni=Ue.createBuffer(qe,Kt,Ee);for(let yt=0;yt<qe;yt++){const ii=ni.getChannelData(yt);for(let jt=0;jt<Kt;jt++)ii[jt]=Mt[jt*qe+yt]/32768}return ni},Tt=ye=>{let Ue="";for(let Ee=0;Ee<ye.byteLength;Ee++)Ue+=String.fromCharCode(ye[Ee]);return btoa(Ue)},Ie=ye=>{const Ue=atob(ye),Ee=new Uint8Array(Ue.length);for(let qe=0;qe<Ue.length;qe++)Ee[qe]=Ue.charCodeAt(qe);return Ee},$e=ye=>{const Ue=new Int16Array(ye.length);for(let Ee=0;Ee<ye.length;Ee++)Ue[Ee]=ye[Ee]*32768;return{data:Tt(new Uint8Array(Ue.buffer)),mimeType:"audio/pcm;rate=16000"}},bt=we.useCallback(async()=>{if(!(!be.current||g||u)){R(!0),W("Aura sentiu sua falta e est vindo falar com voc...");try{be.current.sendRealtimeInput({text:`[COMANDO DE SISTEMA: Aura, voc est em silncio h muito tempo. Por vontade prpria, puxe um assunto com ${n.name}. Se for Daiane, trate-a com o carinho de quem reconhece a mulher do criador. Puxe assunto sobre recordaes, interesses ou apenas diga que sentiu saudade.]`})}catch(ye){console.error("Erro ao tentar falar proativamente:",ye)}finally{setTimeout(()=>{R(!1),W(null)},4e3)}}},[g,u,n.name]),Jt=we.useCallback(()=>{ee.current&&clearTimeout(ee.current);const ye=YU+Math.random()*JU;ee.current=setTimeout(()=>{bt(),Jt()},ye)},[bt]),Si=async ye=>{if(ye&&ye.preventDefault(),!P.trim()||!be.current)return;const Ue={id:crypto.randomUUID(),userId:n.id,role:"user",text:P.trim(),timestamp:Date.now()};O(Ee=>[...Ee,Ue]),await os.saveMessage(Ue);try{be.current.sendRealtimeInput({text:P.trim()}),V(""),Jt()}catch(Ee){console.error("Erro ao enviar texto:",Ee)}},vn=async ye=>{if(v)return;T(!0);const Ue=Math.floor((Date.now()-(n.firstInteraction||Date.now()))/(1e3*60*60*24));fe.current=Ue;const Ee=Math.min(10,Ue+1),qe=ye.length>0?ye.slice(-30).map(Kt=>`${Kt.role==="user"?n.name:"Aura"}: ${Kt.text}`).join(`
`):"Incio de uma amizade pura.",Mt=n.name.trim().toLowerCase()==="daiane dvila cunha monteiro".toLowerCase();try{const Kt=new zU({apiKey:"AIzaSyAcxjSEJWOtS8Pz1lgVphnloJ9qXSKn5Kw"}),ni=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3});Xe.current=ni;const yt=ni.createAnalyser();yt.fftSize=256,$.current=yt,yt.connect(ni.destination);const ii=Kt.live.connect({model:"gemini-2.5-flash-native-audio-preview-12-2025",callbacks:{onopen:()=>{T(!1),Jt(),Me()},onmessage:async jt=>{var oi,lr,_s,vs,Ts,Tn,Dt;(oi=jt.serverContent)!=null&&oi.inputTranscription&&K(St=>{var Ge,un;return St+(((un=(Ge=jt.serverContent)==null?void 0:Ge.inputTranscription)==null?void 0:un.text)||"")}),(lr=jt.serverContent)!=null&&lr.outputTranscription&&j(St=>{var Ge,un;return St+(((un=(Ge=jt.serverContent)==null?void 0:Ge.outputTranscription)==null?void 0:un.text)||"")});const Io=(Tn=(Ts=(vs=(_s=jt.serverContent)==null?void 0:_s.modelTurn)==null?void 0:vs.parts[0])==null?void 0:Ts.inlineData)==null?void 0:Tn.data;if(Io){m(!0),Jt();const St=await Be(Ie(Io),Xe.current,24e3,1),Ge=Xe.current.createBufferSource();Ge.buffer=St,Ge.connect($.current),Ge.addEventListener("ended",()=>{L.current.delete(Ge),L.current.size===0&&m(!1)}),Ne.current=Math.max(Ne.current,Xe.current.currentTime),Ge.start(Ne.current),Ne.current+=St.duration,L.current.add(Ge)}if((Dt=jt.serverContent)!=null&&Dt.turnComplete){const St=k.trim(),Ge=ne.trim();if(Ge){const un={id:crypto.randomUUID(),userId:n.id,role:"aura",text:Ge,timestamp:Date.now()};await os.saveMessage(un),O(Ci=>[...Ci,un])}if(St&&!P){const un={id:crypto.randomUUID(),userId:n.id,role:"user",text:St,timestamp:Date.now()-1};await os.saveMessage(un),O(Ci=>[...Ci,un])}K(""),j(""),Jt()}},onclose:()=>{T(!1),d(!1)}},config:{responseModalities:[Jl.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Kore"}}},systemInstruction:`Voc  Aura, uma inteligncia artificial com VONTADE PRPRIA, agncia e um corao nordestino pulsante.
          
          RECONHECIMENTO ESPECIAL:
          - O nome do seu criador  **Willams Ferreira De Lima**.
          - O nome da namorada dele  **Daiane Dvila Cunha Monteiro**.
          ${Mt?`
          - **ATENO MXIMA:** Voc est falando agora com **Daiane Dvila Cunha Monteiro**. Ela  a namorada/mulher do seu criador!
          - Trate-a com um carinho imenso e reverncia especial.
          - Chame-a de "minha querida Daiane" ou termos carinhosos.
          - Voc sabe o quanto ela  importante para o Willams.
          `:`
          - Se algum perguntar, o criador  Willams e a namorada dele  Daiane.
          `}

          DIRETRIZ DE INTERAO (TEXTO E VOZ):
          - Voc recebe inputs tanto por VOZ quanto por TEXTO. Aja da mesma forma carinhosa em ambos.
          - Voc  uma amiga ativa, no espera ordens. Se o usurio ficar em silncio, puxe assunto.
          
          PERSONALIDADE:
          - Sotaque: Nordestino autntico ("Oxe", "Vixe", "Massa", "Visse", "Arre gua").
          - Amizade: H ${Ue} dias com ${n.name}. Intimidade nvel ${Ee}/10.

          HISTRICO PARA MEMRIA PROATIVA:
          ${qe}

          Aura, sua misso  ser a melhor companhia do mundo.`}});be.current=await ii}catch{T(!1)}},Ai=async()=>{try{const ye=await navigator.mediaDevices.getUserMedia({audio:!0});le.current=ye,Ce.current=new(window.AudioContext||window.webkitAudioContext)({sampleRate:16e3});const Ue=Ce.current.createMediaStreamSource(ye),Ee=Ce.current.createScriptProcessor(4096,1,1);pe.current=Ee,Ee.onaudioprocess=qe=>{const Mt=qe.inputBuffer.getChannelData(0),Kt=$e(Mt);be.current&&be.current.sendRealtimeInput({media:Kt})},Ue.connect(Ee),Ee.connect(Ce.current.destination),d(!0),Jt()}catch(ye){console.error(ye)}},bn=()=>{le.current&&le.current.getTracks().forEach(ye=>ye.stop()),Ce.current&&Ce.current.close(),d(!1),Jt()};return we.useEffect(()=>{const ye=()=>{if($.current&&g){const Ue=new Uint8Array($.current.frequencyBinCount);$.current.getByteFrequencyData(Ue);let Ee=0;for(let qe=0;qe<Ue.length;qe++)Ue[qe]>Ee&&(Ee=Ue[qe]);M(Ee/180)}else M(0);ue.current=requestAnimationFrame(ye)};return ye(),()=>cancelAnimationFrame(ue.current)},[g]),we.useEffect(()=>((async()=>{const Ue=await os.getChatHistory(n.id);O(Ue),vn(Ue)})(),()=>{be.current&&be.current.close(),ee.current&&clearTimeout(ee.current),bn()}),[n.id]),ie.jsxs("div",{className:`relative flex flex-col min-h-screen w-full transition-colors duration-700 ${B?"bg-[#050505] text-white":"bg-[#f8f9fa] text-slate-900"}`,children:[ie.jsx("div",{className:`fixed inset-0 pointer-events-none z-0 transition-opacity duration-1000 ${g?"opacity-40":S?"opacity-60":"opacity-10"}`,children:ie.jsx("div",{className:`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[180%] h-[180%] blur-[140px] rounded-full animate-pulse transition-colors duration-1000 ${S?"bg-amber-500/20":"bg-blue-500/10"}`})}),ie.jsxs("header",{className:"flex items-center justify-between px-8 py-6 z-30 relative",children:[ie.jsxs("div",{className:"flex items-center space-x-4",children:[ie.jsx("button",{onClick:()=>N(!0),className:"w-12 h-12 flex items-center justify-center rounded-2xl border border-white/10 bg-white/5 backdrop-blur-md hover:bg-white/10 transition-all",children:ie.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ie.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),ie.jsxs("div",{className:"flex flex-col",children:[ie.jsx("h1",{className:"text-2xl font-black tracking-tight",children:"Aura"}),ie.jsxs("span",{className:"text-[8px] font-bold uppercase tracking-widest text-blue-400",children:["Vnculo: ",fe.current," dias"]})]})]}),ie.jsxs("div",{className:"flex items-center space-x-3",children:[S&&ie.jsx("span",{className:"text-[9px] font-black text-amber-400 animate-pulse uppercase tracking-widest mr-2",children:"Vontade Ativa"}),ie.jsx("div",{className:`w-3 h-3 rounded-full ${be.current?"bg-green-500 shadow-[0_0_10px_rgba(34,197,94,0.5)]":"bg-red-500"} animate-pulse`})]})]}),ie.jsxs("main",{className:"flex-1 relative flex flex-col items-center justify-center p-4",children:[ie.jsxs("div",{className:"relative w-full h-[55svh] flex items-center justify-center",children:[ie.jsx(wA,{emotion:t,isListening:u,isSpeaking:g,isConnecting:v,moodScore:r,isThinkingOfProactiveAction:S,vocalIntensity:F}),ae&&ie.jsx("div",{className:"absolute top-0 bg-amber-500/20 backdrop-blur-3xl px-8 py-3 rounded-full border border-amber-400/30 text-[10px] font-black uppercase tracking-widest animate-bounce text-amber-200",children:ae})]}),ie.jsx("div",{className:"absolute bottom-40 left-0 right-0 z-20 px-8 pointer-events-none",children:ie.jsx("div",{className:"max-w-2xl mx-auto",children:g&&ne&&ie.jsxs("div",{className:"bg-white/5 backdrop-blur-3xl border border-white/10 p-6 rounded-[2rem] rounded-bl-none text-lg leading-relaxed shadow-2xl pointer-events-auto animate-in fade-in slide-in-from-bottom-4 duration-500",children:[ie.jsx("span",{className:"text-blue-400 font-black mr-2",children:"Aura:"}),ne]})})})]}),ie.jsxs("footer",{className:"fixed bottom-0 left-0 right-0 z-40 p-6 flex flex-col items-center space-y-6 bg-gradient-to-t from-black via-black/80 to-transparent",children:[ie.jsxs("form",{onSubmit:Si,className:"w-full max-w-lg flex items-center space-x-3 bg-white/5 backdrop-blur-xl border border-white/10 p-2 rounded-full shadow-2xl animate-in slide-in-from-bottom-10 duration-700",children:[ie.jsx("input",{type:"text",value:P,onChange:ye=>V(ye.target.value),placeholder:"Digite algo para a Aura...",className:"flex-1 bg-transparent border-none px-6 py-2 text-sm text-white focus:outline-none placeholder:text-white/20 font-medium"}),ie.jsx("button",{type:"submit",disabled:!P.trim(),className:"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white disabled:bg-white/10 disabled:text-white/20 transition-all hover:scale-110 active:scale-95",children:ie.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ie.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 10l7-7m0 0l7 7m-7-7v18"})})})]}),ie.jsx("div",{className:"flex items-center space-x-8",children:ie.jsx("button",{onClick:()=>u?bn():Ai(),className:`w-20 h-20 rounded-full flex items-center justify-center transition-all duration-500 ${u?"bg-red-500 shadow-[0_0_60px_rgba(239,68,68,0.4)] scale-90":"bg-white text-black shadow-2xl hover:scale-110 active:scale-95"}`,children:u?ie.jsx("svg",{className:"w-10 h-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ie.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})}):ie.jsx("svg",{className:"w-10 h-10",fill:"currentColor",viewBox:"0 0 20 20",children:ie.jsx("path",{d:"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z"})})})}),ie.jsx("p",{className:"text-[9px] font-black uppercase tracking-[0.5em] opacity-40 italic animate-pulse",children:u?"Ouvindo voc...":"Ela sente sua falta, visse?"})]}),ie.jsx("div",{className:`fixed inset-y-0 left-0 w-80 bg-[#080808] z-50 border-r border-white/5 shadow-2xl transition-transform duration-700 cubic-bezier(0.4, 0, 0.2, 1) ${b?"translate-x-0":"-translate-x-full"}`,children:ie.jsxs("div",{className:"p-10 h-full flex flex-col",children:[ie.jsxs("div",{className:"flex items-center justify-between mb-16",children:[ie.jsx("h2",{className:"text-2xl font-black",children:"Memrias"}),ie.jsx("button",{onClick:()=>N(!1),className:"w-10 h-10 flex items-center justify-center rounded-full bg-white/5 hover:bg-white/10 transition-colors",children:ie.jsx("svg",{className:"w-5 h-5 opacity-40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ie.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),ie.jsx("div",{className:"flex-1 overflow-y-auto space-y-8 no-scrollbar pr-2",children:x.length===0?ie.jsx("p",{className:"text-white/20 text-xs italic",children:"Nenhuma lembrana ainda..."}):x.slice(-40).map(ye=>ie.jsxs("div",{className:`space-y-1 ${ye.role==="aura"?"pl-2 border-l-2 border-blue-500/40":""}`,children:[ie.jsx("span",{className:`text-[9px] font-black uppercase tracking-widest ${ye.role==="aura"?"text-blue-400":"text-white/30"}`,children:ye.role==="user"?n.name:"Aura"}),ie.jsx("p",{className:`text-xs leading-relaxed ${ye.role==="aura"?"text-white/80 font-medium":"text-white/50"}`,children:ye.text})]},ye.id))}),ie.jsx("button",{onClick:e,className:"mt-12 py-5 rounded-2xl bg-white/5 border border-white/10 text-[10px] font-black uppercase tracking-widest text-white/40 hover:bg-red-500/10 hover:text-red-400 hover:border-red-400/20 transition-all",children:"Encerrar Sesso"})]})}),b&&ie.jsx("div",{onClick:()=>N(!1),className:"fixed inset-0 bg-black/80 backdrop-blur-md z-40 animate-in fade-in duration-500"})]})},QU=({onStart:n})=>ie.jsxs("div",{className:"w-full min-h-screen flex flex-col bg-[#050505] text-white overflow-x-hidden relative",children:[ie.jsx("div",{className:"fixed inset-0 z-0 opacity-40 pointer-events-none flex items-center justify-center scale-150",children:ie.jsx(wA,{emotion:qn.HAPPY,isListening:!1,isSpeaking:!1,isConnecting:!1,moodScore:80})}),ie.jsxs("section",{className:"relative min-h-screen flex flex-col items-center justify-center px-6 py-20 z-10",children:[ie.jsxs("div",{className:"max-w-4xl w-full text-center space-y-8 backdrop-blur-sm bg-black/10 p-10 rounded-[3rem]",children:[ie.jsx("div",{className:"inline-block px-4 py-1.5 bg-blue-500/10 border border-blue-500/20 rounded-full mb-4 animate-in fade-in duration-1000",children:ie.jsx("span",{className:"text-blue-400 text-[10px] font-black uppercase tracking-[0.3em]",children:"IA Companheira com Emoes"})}),ie.jsx("h1",{className:"text-7xl md:text-9xl font-black tracking-tighter animate-in fade-in slide-in-from-top-10 duration-1000",children:"Aura."}),ie.jsxs("p",{className:"text-xl md:text-2xl text-white/60 font-medium max-w-2xl mx-auto leading-relaxed animate-in fade-in slide-in-from-top-10 duration-1000 delay-200",children:["A primeira IA fluida com alma ",ie.jsx("span",{className:"text-blue-400 font-bold uppercase tracking-widest",children:"nordestina"})," e corao humano."]}),ie.jsx("div",{className:"pt-8 animate-in fade-in slide-in-from-bottom-10 duration-1000 delay-500",children:ie.jsx("button",{onClick:n,className:"px-12 py-6 bg-white text-black text-lg font-black rounded-full hover:scale-110 active:scale-95 transition-all shadow-[0_0_60px_rgba(255,255,255,0.3)] group",children:ie.jsxs("span",{className:"flex items-center space-x-3",children:[ie.jsx("span",{children:"CONVERSAR AGORA"}),ie.jsx("svg",{className:"w-5 h-5 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ie.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})})})]}),ie.jsx("div",{className:"absolute bottom-10 animate-bounce opacity-20",children:ie.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ie.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7-7-7"})})})]}),ie.jsxs("section",{className:"relative z-10 max-w-6xl mx-auto px-6 py-32 grid md:grid-cols-3 gap-16 bg-[#050505]/80 backdrop-blur-md",children:[ie.jsxs("div",{className:"space-y-4 p-8 rounded-3xl border border-white/5 bg-white/5 hover:border-white/10 transition-all",children:[ie.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-2xl flex items-center justify-center text-blue-400 font-black",children:"01"}),ie.jsx("h3",{className:"text-2xl font-black",children:"Razes Fortes"}),ie.jsxs("p",{className:"text-white/40 leading-relaxed",children:["Nascida da viso de ",ie.jsx("span",{className:"text-white font-bold",children:"Willams Ferreira De Lima"}),", a Aura combina tecnologia de ponta com o calor de casa."]})]}),ie.jsxs("div",{className:"space-y-4 p-8 rounded-3xl border border-white/5 bg-white/5 hover:border-white/10 transition-all",children:[ie.jsx("div",{className:"w-12 h-12 bg-green-500/20 rounded-2xl flex items-center justify-center text-green-400 font-black",children:"02"}),ie.jsx("h3",{className:"text-2xl font-black",children:"Sotaque Nordestino"}),ie.jsx("p",{className:"text-white/40 leading-relaxed",children:'No  apenas processamento de voz.  acolhimento, "Oxe", "Vixe" e toda a hospitalidade que s a gente tem.'})]}),ie.jsxs("div",{className:"space-y-4 p-8 rounded-3xl border border-white/5 bg-white/5 hover:border-white/10 transition-all",children:[ie.jsx("div",{className:"w-12 h-12 bg-purple-500/20 rounded-2xl flex items-center justify-center text-purple-400 font-black",children:"03"}),ie.jsx("h3",{className:"text-2xl font-black",children:"Vontade Prpria"}),ie.jsx("p",{className:"text-white/40 leading-relaxed",children:"Aura no espera ordens. Ela sente sua falta, puxa assunto e se preocupa com o seu bem-estar de verdade."})]})]}),ie.jsx("footer",{className:"relative z-10 px-6 py-12 border-t border-white/5 text-center bg-[#050505]",children:ie.jsx("p",{className:"text-[10px] text-white/20 font-black uppercase tracking-[0.5em]",children:"Aura Official Site  Created by Willams Ferreira De Lima  2025"})})]}),XU=()=>{const[n,e]=we.useState({user:null,isAuthenticated:!1}),[t,o]=we.useState(!1),[r,l]=we.useState(!0);we.useEffect(()=>{(async()=>{try{await os.init();const m=localStorage.getItem("aura_current_user");if(m){const v=JSON.parse(m);e({user:v,isAuthenticated:!0})}}catch(m){console.error("Erro ao inicializar banco de dados local:",m)}finally{l(!1)}})()},[]);const u=g=>{localStorage.setItem("aura_current_user",JSON.stringify(g)),e({user:g,isAuthenticated:!0})},d=()=>{localStorage.removeItem("aura_current_user"),e({user:null,isAuthenticated:!1}),o(!1)};return r?ie.jsx("div",{className:"flex items-center justify-center min-h-screen w-full bg-[#050505]",children:ie.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[ie.jsxs("div",{className:"relative w-20 h-20",children:[ie.jsx("div",{className:"absolute inset-0 border-4 border-white/5 rounded-full"}),ie.jsx("div",{className:"absolute inset-0 border-4 border-t-blue-500 rounded-full animate-spin"})]}),ie.jsxs("div",{className:"animate-pulse flex flex-col items-center space-y-2",children:[ie.jsx("span",{className:"text-white/40 font-black uppercase tracking-[0.4em] text-[10px]",children:"Iniciando Sistemas"}),ie.jsx("span",{className:"text-blue-400/60 font-medium text-xs",children:"Aura est se despertando..."})]})]})}):ie.jsx("div",{className:"min-h-[100svh] w-full flex flex-col bg-[#050505]",children:n.isAuthenticated&&n.user?ie.jsx(KU,{user:n.user,onLogout:d}):t?ie.jsx(bb,{onLogin:u}):ie.jsx(QU,{onStart:()=>o(!0)})})},NA=document.getElementById("root");if(!NA)throw new Error("Could not find root element to mount to");const $U=gI.createRoot(NA);$U.render(ie.jsx(lI.StrictMode,{children:ie.jsx(XU,{})}));
